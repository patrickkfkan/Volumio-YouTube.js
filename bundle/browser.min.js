/* eslint-disable */
var O1=Object.create;var Up=Object.defineProperty;var L1=Object.getOwnPropertyDescriptor;var D1=Object.getOwnPropertyNames;var B1=Object.getPrototypeOf,j1=Object.prototype.hasOwnProperty;var s=(n,e)=>Up(n,"name",{value:e,configurable:!0});var Q=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Os=(n,e)=>{for(var t in e)Up(n,t,{get:e[t],enumerable:!0})},Y1=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of D1(e))!j1.call(n,r)&&r!==t&&Up(n,r,{get:()=>e[r],enumerable:!(i=L1(e,r))||i.enumerable});return n};var U1=(n,e,t)=>(t=n!=null?O1(B1(n)):{},Y1(e||!n||!n.__esModule?Up(t,"default",{value:n,enumerable:!0}):t,n));var Ry=Q(Cv=>{"use strict";Object.defineProperty(Cv,"__esModule",{value:!0});var zp=class{static visit(e,t){return e.elements.map(i=>t.visitNode(i))}};s(zp,"ArrayExpression");Cv.default=zp});var qp=Q(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.namedFunction=void 0;var $1=s((n,e)=>Object.defineProperty(e,"name",{value:n}),"namedFunction");Kp.namedFunction=$1});var Fy=Q(Pv=>{"use strict";Object.defineProperty(Pv,"__esModule",{value:!0});var X1=qp(),$p=class{static visit(e,t){let{params:i,body:r}=e;return(0,X1.namedFunction)("anonymous function",l=>{let h=0;for(let v of i)t.visitNode(v),v.type==="Identifier"?t.scope.set(v.name,l[h]):console.warn("Unhandled param type",v.type),h++;return t.visitNode(r)})}};s($p,"ArrowFunctionExpression");Pv.default=$p});var Oy=Q(Nv=>{"use strict";Object.defineProperty(Nv,"__esModule",{value:!0});var Xp=class{static visit(e,t){let i=e.operator,r=t.visitNode(e.right);switch(i){case"=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]=r}else if(e.left.type==="Identifier")return t.scope.set(e.left.name,r),t.scope.get(e.left.name);console.warn("Unhandled left node",e.left);break;case"+=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]+=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)+r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"-=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]-=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)-r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"*=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]*=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)*r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"/=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]/=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)/r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"%=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]%=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)%r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"**=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]**=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)**r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"<<=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]<<=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)<<r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case">>=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]>>=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)>>r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case">>>=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]>>>=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)>>>r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"&=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]&=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)&r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break}}};s(Xp,"AssignmentExpression");Nv.default=Xp});var Ly=Q(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});var Qp=class{static visit(e,t){let i=e.operator,r=t.visitNode(e.left),a=t.visitNode(e.right);switch(i){case"!=":return r!=a;case"!==":return r!==a;case"%":return r%a;case"&":return r&a;case"*":return r*a;case"**":return r**a;case"+":return r+a;case"-":return r-a;case"/":return r/a;case"<":return r<a;case"<<":return r<<a;case"<=":return r<=a;case"==":return r==a;case"===":return r===a;case">":return r>a;case">=":return r>=a;case">>":return r>>a;case">>>":return r>>>a;case"^":return r^a;case"|":return r|a;case"in":return r in a;case"instanceof":return r instanceof a}}};s(Qp,"BinaryExpression");Mv.default=Qp});var Dy=Q(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});var Zp=class{static visit(e,t){for(let i of e.body){let r=t.visitNode(i);if(i.type==="ReturnStatement"||r==="break"||r==="continue"||(i.type==="WhileStatement"||i.type==="IfStatement"||i.type==="ForStatement"||i.type==="TryStatement")&&!!r)return r}}};s(Zp,"BlockStatement");Vv.default=Zp});var By=Q(Av=>{"use strict";Object.defineProperty(Av,"__esModule",{value:!0});var ef=class{static visit(e,t){return"break"}};s(ef,"BreakStatement");Av.default=ef});var Yy=Q(Ds=>{"use strict";var jy=Ds&&Ds.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Rv,Fv;Object.defineProperty(Ds,"__esModule",{value:!0});var Ls=class{static visit(e,t){let i,r;if(e.callee.type==="MemberExpression"?(i=t.getName(e.callee.object),r=t.getName(e.callee.property)):e.callee.type==="Identifier"&&(r=e.callee.name),i&&t.listeners[i]){let h=t.listeners[i](e,t);if(h!=="proceed")return h}if(r&&r!=="toString"&&t.listeners[r]){let h=t.listeners[r](e,t);if(h!=="proceed")return h}if(e.callee.type==="MemberExpression"){if(go.has(e,t))return go.execute(e,t);let h=t.visitNode(e.callee.object),v=e.callee.computed?t.visitNode(e.callee.property):t.getName(e.callee.property),_=e.arguments.map(p=>t.visitNode(p));return typeof h[v]!="function"&&jy(this,Rv,"m",Fv).call(this,e,t),h[v].toString().includes("[native code]")?h[v](..._):h[v](_)}let a=t.visitNode(e.callee),l=e.arguments.map(h=>t.visitNode(h));return typeof a!="function"&&jy(this,Rv,"m",Fv).call(this,e,t),a(l)}};s(Ls,"CallExpression");Ds.default=Ls;Rv=Ls,Fv=s(function(e,t){if(e.callee.type==="MemberExpression")throw new Error(`${e.callee.object.type==="Identifier"?e.callee.object.name:"<object>"}.${e.callee.property.type==="Identifier"?e.callee.property.name:"?"} is not a function`);if(e.callee.type==="Identifier")throw new Error(`${e.callee.name} is not a function`);if(e.callee.type==="SequenceExpression"){let i=[],r=[];throw i.push("("),e.callee.expressions.forEach(a=>{a.type==="Literal"?r.push(a.raw||""):a.type==="Identifier"?r.push(a.name):a.type==="MemberExpression"&&(a.computed?r.push(`${t.getName(a.object)}[${t.getName(a.property)||"..."}]`):r.push(`${t.getName(a.object)}.${t.getName(a.property)}`))}),i.push(r.join(", ")),i.push(")"),new Error(`${i.join("")} is not a function`)}},"_CallExpression_throwError");var go=class{static has(e,t){var i;return e.callee.type==="MemberExpression"?!!(!((i=this.builtins)===null||i===void 0)&&i[t.getName(e.callee.property)||""]):!1}static execute(e,t){if(e.callee.type==="MemberExpression")return this.builtins[t.getName(e.callee.property)||""](e,t)}};s(go,"Builtins");go.builtins={forEach:(n,e)=>{let t=n.arguments.map(i=>e.visitNode(i));if(n.callee.type==="MemberExpression"){let i=e.visitNode(n.callee.object);t.length>1&&e.scope.set("_this",t.slice(-1)[0]);let r=0;for(let a of i)t[0]([a,r++,i])}else console.warn("Unhandled callee type:",n.callee.type)},toString:(n,e)=>{if(n.callee.type==="MemberExpression")return e.visitNode(n.callee.object).toString()}}});var Uy=Q(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0});var tf=class{static visit(e,t){let{test:i,consequent:r,alternate:a}=e;return t.visitNode(i)?t.visitNode(r):t.visitNode(a)}};s(tf,"ConditionalExpression");Ov.default=tf});var Wy=Q(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0});var nf=class{static visit(e,t){return"continue"}};s(nf,"ContinueStatement");Lv.default=nf});var Gy=Q(Dv=>{"use strict";Object.defineProperty(Dv,"__esModule",{value:!0});var of=class{static visit(e,t){return t.visitNode(e.expression)}};s(of,"ExpressionStatement");Dv.default=of});var Jy=Q(Bv=>{"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});var sf=class{static visit(e,t){e.init&&t.visitNode(e.init);let i=s(()=>e.test?t.visitNode(e.test):!0,"test");for(;i();){let a=t.visitNode(e.body);if(a!=="continue"){if(a==="break")break;if(e.update&&t.visitNode(e.update),a&&e.body.type!=="ExpressionStatement")return a}}}};s(sf,"ForStatement");Bv.default=sf});var Hy=Q(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});var Q1=qp(),rf=class{static visit(e,t){let{params:i,body:r}=e,a=t.visitNode(e.id),l=(0,Q1.namedFunction)(a,h=>{let v=0;for(let _ of i)t.visitNode(_),_.type==="Identifier"?t.scope.set(_.name,h[v]):console.warn("Unhandled param type",_.type),v++;return t.visitNode(r)});t.scope.set(a,l)}};s(rf,"FunctionDeclaration");jv.default=rf});var zy=Q(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});var Z1=qp(),af=class{static visit(e,t){let{params:i,body:r}=e;return(0,Z1.namedFunction)("anonymous function",l=>{let h=0;for(let v of i)t.visitNode(v),v.type==="Identifier"?t.scope.set(v.name,l[h]):console.warn("Unhandled param type",v.type),h++;return t.visitNode(r)})}};s(af,"FunctionExpression");Yv.default=af});var Ky=Q(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});var uf=class{static visit(e,t){if(t.listeners[e.name]){let i=t.listeners[e.name](e,t);if(i!=="proceed")return i}return t.scope.has(e.name)?t.scope.get(e.name):e.name}};s(uf,"Identifier");Uv.default=uf});var qy=Q(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});var lf=class{static visit(e,t){if(t.visitNode(e.test))return t.visitNode(e.consequent);if(e.alternate)return t.visitNode(e.alternate)}};s(lf,"IfStatement");Wv.default=lf});var $y=Q(Gv=>{"use strict";Object.defineProperty(Gv,"__esModule",{value:!0});var cf=class{static visit(e,t){return e.value}};s(cf,"Literal");Gv.default=cf});var Xy=Q(Jv=>{"use strict";Object.defineProperty(Jv,"__esModule",{value:!0});var df=class{static visit(e,t){switch(e.operator){case"&&":{let r=t.visitNode(e.left);return r===!0?t.visitNode(e.right):r}case"||":return t.visitNode(e.left)||t.visitNode(e.right);case"??":{let r=t.visitNode(e.left);return r!=null?r:t.visitNode(e.right)}}}};s(df,"LogicalExpression");Jv.default=df});var Qy=Q(Hv=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});var pf=class{static visit(e,t){let{object:i,property:r,computed:a}=e,l=t.visitNode(i),h=a?t.visitNode(r):t.getName(r);if(h!==void 0||h!==null){if(t.listeners[h]){let v=t.listeners[h](e,t);if(v!=="proceed")return v}return l==null?void 0:l[h]}}};s(pf,"MemberExpression");Hv.default=pf});var Zy=Q(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});var ff=class{static visit(e,t){let i=t.visitNode(e.callee),r=e.arguments.map(a=>t.visitNode(a));return new i(r)}};s(ff,"NewExpression");zv.default=ff});var eb=Q(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});var hf=class{static visit(e,t){let i={};for(let r of e.properties)if(r.type==="Property")i=Object.assign(Object.assign({},i),t.visitNode(r));else throw new Error(`Unhandled property type: ${r.type}`);return i}};s(hf,"ObjectExpression");Kv.default=hf});var tb=Q(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0});var mf=class{static init(e,t){let i=e.computed?t.visitNode(e.key):t.getName(e.key),r=t.visitNode(e.value);if(i)return{[i]:r}}static get(e,t){throw new TypeError("Not implemented: Property.get")}static set(e,t){throw new TypeError("Not implemented: Property.set")}static visit(e,t){switch(e.kind){case"init":return this.init(e,t);case"get":return this.get(e,t);case"set":return this.set(e,t);default:throw new Error(`Unhandled property kind: ${e.kind}`)}}};s(mf,"Property");qv.default=mf});var ib=Q($v=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});var _f=class{static visit(e,t){if(e.argument)return t.visitNode(e.argument)}};s(_f,"ReturnStatement");$v.default=_f});var nb=Q(Xv=>{"use strict";Object.defineProperty(Xv,"__esModule",{value:!0});var vf=class{static visit(e,t){let i;for(let r of e.expressions)i=t.visitNode(r);return i}};s(vf,"SequenceExpression");Xv.default=vf});var ob=Q(Qv=>{"use strict";Object.defineProperty(Qv,"__esModule",{value:!0});var yf=class{static visit(e,t){for(let i of e.consequent){let r=t.visitNode(i);if(i.type==="ContinueStatement")return r;if(i.type==="BreakStatement")return r}}};s(yf,"SwitchCase");Qv.default=yf});var sb=Q(Zv=>{"use strict";Object.defineProperty(Zv,"__esModule",{value:!0});var bf=class{static visit(e,t){let i=t.visitNode(e.discriminant),r=!1,a=-1,l=0;for(;;){let h=e.cases[l];if(r){let v=t.visitNode(h);if(v==="break")break;if(v==="continue")return v;if(++l,l>=e.cases.length){l=0;break}else continue}if(r=h&&i===t.visitNode(h.test),r===void 0&&l>e.cases.length)break;if(h&&!r&&!h.test){a=l,l+=1;continue}if(!h&&!r&&a!==-1){r=!0,l=a;continue}r||++l}}};s(bf,"SwitchStatement");Zv.default=bf});var rb=Q(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});var wf=class{static visit(e,t){return t.scope.get("_this")}};s(wf,"ThisExpression");e0.default=wf});var ab=Q(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});var gf=class{static visit(e,t){throw t.visitNode(e.argument)}};s(gf,"ThrowStatement");t0.default=gf});var ub=Q(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});var xf=class{static visit(e,t){try{return t.visitNode(e.block)}catch(i){if(e.handler)return e.handler.param&&e.handler.param.type==="Identifier"&&t.scope.set(e.handler.param.name,i),t.visitNode(e.handler.body)}finally{t.visitNode(e.finalizer)}}};s(xf,"TryStatement");i0.default=xf});var lb=Q(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});var Tf=class{static visit(e,t){let i=e.operator;switch(i){case"-":return-t.visitNode(e.argument);case"+":return+t.visitNode(e.argument);case"!":return!t.visitNode(e.argument);case"~":return~t.visitNode(e.argument);case"void":{t.visitNode(e.argument);return}case"typeof":return typeof t.visitNode(e.argument);case"delete":{if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object),a=e.argument.computed?t.visitNode(e.argument.property):t.getName(e.argument.property);return delete r[a]}else if(e.argument.type==="Identifier")return t.scope.delete(e.argument.name);return!0}default:console.warn("Unhandled UnaryExpression operator",i)}}};s(Tf,"UnaryExpression");n0.default=Tf});var cb=Q(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});var If=class{static visit(e,t){switch(e.operator){case"++":if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object);return r[t.visitNode(e.argument.property)]++}else if(e.argument.type==="Identifier"){let r=t.visitNode(e.argument);return t.scope.set(e.argument.name,r+1),e.prefix?++r:r}break;case"--":if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object);return r[t.visitNode(e.argument.property)]--}else if(e.argument.type==="Identifier"){let r=t.visitNode(e.argument);return t.scope.set(e.argument.name,r-1),e.prefix?--r:r}break}}};s(If,"UpdateExpression");o0.default=If});var db=Q(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});var Sf=class{static visit(e,t){e.declarations.forEach(i=>{let{id:r,init:a}=i,l=t.getName(r),h=a?t.visitNode(a):void 0;l&&t.scope.set(l,h),typeof h=="object"&&h!==null&&t.scope.set("_this",h)})}};s(Sf,"VariableDeclaration");s0.default=Sf});var pb=Q(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var Ef=class{static visit(e,t){for(;t.visitNode(e.test);){let i=t.visitNode(e.body);if(i==="break")break;if(i!=="continue"&&i)return i}}};s(Ef,"WhileStatement");r0.default=Ef});var fb=Q(Bs=>{"use strict";var fe=Bs&&Bs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bs,"__esModule",{value:!0});var eI=fe(Ry()),tI=fe(Fy()),iI=fe(Oy()),nI=fe(Ly()),oI=fe(Dy()),sI=fe(By()),rI=fe(Yy()),aI=fe(Uy()),uI=fe(Wy()),lI=fe(Gy()),cI=fe(Jy()),dI=fe(Hy()),pI=fe(zy()),fI=fe(Ky()),hI=fe(qy()),mI=fe($y()),_I=fe(Xy()),vI=fe(Qy()),yI=fe(Zy()),bI=fe(eb()),wI=fe(tb()),gI=fe(ib()),xI=fe(nb()),TI=fe(ob()),II=fe(sb()),SI=fe(rb()),EI=fe(ab()),kI=fe(ub()),CI=fe(lb()),PI=fe(cb()),NI=fe(db()),MI=fe(pb()),VI={ArrayExpression:eI.default,ArrowFunctionExpression:tI.default,AssignmentExpression:iI.default,BinaryExpression:nI.default,BlockStatement:oI.default,BreakStatement:sI.default,CallExpression:rI.default,ConditionalExpression:aI.default,ContinueStatement:uI.default,ExpressionStatement:lI.default,ForStatement:cI.default,FunctionDeclaration:dI.default,FunctionExpression:pI.default,Identifier:fI.default,IfStatement:hI.default,Literal:mI.default,LogicalExpression:_I.default,MemberExpression:vI.default,NewExpression:yI.default,ObjectExpression:bI.default,Property:wI.default,ReturnStatement:gI.default,SequenceExpression:xI.default,SwitchCase:TI.default,SwitchStatement:II.default,ThisExpression:SI.default,ThrowStatement:EI.default,TryStatement:kI.default,UnaryExpression:CI.default,UpdateExpression:PI.default,VariableDeclaration:NI.default,WhileStatement:MI.default};function AI(n){let e=VI[n];if(!e){let t=new Error(`Module not found: ${n}`);throw t.code="MODULE_NOT_FOUND",t}return e}s(AI,"getNode");Bs.default=AI});var hb=Q((DE,RI)=>{RI.exports={name:"jintr",version:"0.4.1",description:"A tiny JavaScript interpreter written in TypeScript.",main:"./dist/index.js",types:"./dist",scripts:{test:"npx jest --verbose",build:"npx tsc",lint:"npx eslint ./src/**/*.ts","lint:fix":"npx eslint --fix ./src/**/*.ts","build:nodes-map":"node ./scripts/build-nodes-map.js",prepare:"npm run build",watch:"npx tsc --watch"},author:"LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT)",funding:["https://github.com/sponsors/LuanRT"],keywords:["js","vm","typescript","javascript","interpreter"],license:"MIT",devDependencies:{"@types/estree":"^1.0.0","@types/jest":"^28.1.7","@typescript-eslint/eslint-plugin":"^5.33.1","@typescript-eslint/parser":"^5.33.1",eslint:"^8.22.0","eslint-plugin-tsdoc":"^0.2.16",glob:"^8.0.3",jest:"^28.1.3","ts-jest":"^28.0.8",typescript:"^4.7.4"},dependencies:{acorn:"^8.8.0"},bugs:{url:"https://github.com/LuanRT/Jinter/issues"},homepage:"https://github.com/LuanRT/Jinter#readme"}});var vb=Q(En=>{"use strict";var FI=En&&En.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},mb=En&&En.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},a0,_b;Object.defineProperty(En,"__esModule",{value:!0});var OI=mb(fb()),LI=mb(hb()),kf=class{constructor(e){a0.add(this),this.scope=new Map,this.listeners={},this.ast=e}run(){let e;for(let t of this.ast)e=this.visitNode(t);return e}visitNode(e){if(!e)return null;try{return(0,OI.default)(e.type).visit(e,this)}catch(t){FI(this,a0,"m",_b).call(this,e,t)}}getName(e){if(e.type==="Identifier")return e.name;if(e.type==="Literal")return e.value}on(e,t){this.listeners[e]=t}};s(kf,"Visitor");En.default=kf;a0=new WeakSet,_b=s(function(e,t){if(t.code==="MODULE_NOT_FOUND")console.warn(`Node ${e.type} not found!
This is a bug, please report it at ${LI.default.bugs.url}.`);else throw t},"_Visitor_printError")});var bb=Q((Cf,yb)=>{(function(n,e){typeof Cf=="object"&&typeof yb<"u"?e(Cf):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.acorn={}))})(Cf,function(n){"use strict";var e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],t=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],i="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",r="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",a={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h={5:l,"5module":l+" export import",6:l+" const class extends export import super"},v=/^in(stanceof)?$/,_=new RegExp("["+r+"]"),p=new RegExp("["+r+i+"]");function b(o,u){for(var m=65536,y=0;y<u.length;y+=2){if(m+=u[y],m>o)return!1;if(m+=u[y+1],m>=o)return!0}}s(b,"isInAstralSet");function I(o,u){return o<65?o===36:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&_.test(String.fromCharCode(o)):u===!1?!1:b(o,t)}s(I,"isIdentifierStart");function C(o,u){return o<48?o===36:o<58?!0:o<65?!1:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&p.test(String.fromCharCode(o)):u===!1?!1:b(o,t)||b(o,e)}s(C,"isIdentifierChar");var N=s(function(u,m){m===void 0&&(m={}),this.label=u,this.keyword=m.keyword,this.beforeExpr=!!m.beforeExpr,this.startsExpr=!!m.startsExpr,this.isLoop=!!m.isLoop,this.isAssign=!!m.isAssign,this.prefix=!!m.prefix,this.postfix=!!m.postfix,this.binop=m.binop||null,this.updateContext=null},"TokenType");function L(o,u){return new N(o,{beforeExpr:!0,binop:u})}s(L,"binop");var O={beforeExpr:!0},D={startsExpr:!0},K={};function F(o,u){return u===void 0&&(u={}),u.keyword=o,K[o]=new N(o,u)}s(F,"kw");var w={num:new N("num",D),regexp:new N("regexp",D),string:new N("string",D),name:new N("name",D),privateId:new N("privateId",D),eof:new N("eof"),bracketL:new N("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new N("]"),braceL:new N("{",{beforeExpr:!0,startsExpr:!0}),braceR:new N("}"),parenL:new N("(",{beforeExpr:!0,startsExpr:!0}),parenR:new N(")"),comma:new N(",",O),semi:new N(";",O),colon:new N(":",O),dot:new N("."),question:new N("?",O),questionDot:new N("?."),arrow:new N("=>",O),template:new N("template"),invalidTemplate:new N("invalidTemplate"),ellipsis:new N("...",O),backQuote:new N("`",D),dollarBraceL:new N("${",{beforeExpr:!0,startsExpr:!0}),eq:new N("=",{beforeExpr:!0,isAssign:!0}),assign:new N("_=",{beforeExpr:!0,isAssign:!0}),incDec:new N("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new N("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:L("||",1),logicalAND:L("&&",2),bitwiseOR:L("|",3),bitwiseXOR:L("^",4),bitwiseAND:L("&",5),equality:L("==/!=/===/!==",6),relational:L("</>/<=/>=",7),bitShift:L("<</>>/>>>",8),plusMin:new N("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:L("%",10),star:L("*",10),slash:L("/",10),starstar:new N("**",{beforeExpr:!0}),coalesce:L("??",1),_break:F("break"),_case:F("case",O),_catch:F("catch"),_continue:F("continue"),_debugger:F("debugger"),_default:F("default",O),_do:F("do",{isLoop:!0,beforeExpr:!0}),_else:F("else",O),_finally:F("finally"),_for:F("for",{isLoop:!0}),_function:F("function",D),_if:F("if"),_return:F("return",O),_switch:F("switch"),_throw:F("throw",O),_try:F("try"),_var:F("var"),_const:F("const"),_while:F("while",{isLoop:!0}),_with:F("with"),_new:F("new",{beforeExpr:!0,startsExpr:!0}),_this:F("this",D),_super:F("super",D),_class:F("class",D),_extends:F("extends",O),_export:F("export"),_import:F("import",D),_null:F("null",D),_true:F("true",D),_false:F("false",D),_in:F("in",{beforeExpr:!0,binop:7}),_instanceof:F("instanceof",{beforeExpr:!0,binop:7}),_typeof:F("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:F("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:F("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ve=/\r\n?|\n|\u2028|\u2029/,Ge=new RegExp(ve.source,"g");function Ee(o){return o===10||o===13||o===8232||o===8233}s(Ee,"isNewLine");function tt(o,u,m){m===void 0&&(m=o.length);for(var y=u;y<m;y++){var g=o.charCodeAt(y);if(Ee(g))return y<m-1&&g===13&&o.charCodeAt(y+1)===10?y+2:y+1}return-1}s(tt,"nextLineBreak");var $=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,B=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,se=Object.prototype,re=se.hasOwnProperty,st=se.toString,rt=Object.hasOwn||function(o,u){return re.call(o,u)},xt=Array.isArray||function(o){return st.call(o)==="[object Array]"};function Xe(o){return new RegExp("^(?:"+o.replace(/ /g,"|")+")$")}s(Xe,"wordsRegexp");function Je(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}s(Je,"codePointToString");var ce=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Me=s(function(u,m){this.line=u,this.column=m},"Position");Me.prototype.offset=s(function(u){return new Me(this.line,this.column+u)},"offset");var He=s(function(u,m,y){this.start=m,this.end=y,u.sourceFile!==null&&(this.source=u.sourceFile)},"SourceLocation");function Vt(o,u){for(var m=1,y=0;;){var g=tt(o,y,u);if(g<0)return new Me(m,u-y);++m,y=g}}s(Vt,"getLineInfo");var At={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ct=!1;function Hi(o){var u={};for(var m in At)u[m]=o&&rt(o,m)?o[m]:At[m];if(u.ecmaVersion==="latest"?u.ecmaVersion=1e8:u.ecmaVersion==null?(!ct&&typeof console=="object"&&console.warn&&(ct=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),u.ecmaVersion=11):u.ecmaVersion>=2015&&(u.ecmaVersion-=2009),u.allowReserved==null&&(u.allowReserved=u.ecmaVersion<5),o.allowHashBang==null&&(u.allowHashBang=u.ecmaVersion>=14),xt(u.onToken)){var y=u.onToken;u.onToken=function(g){return y.push(g)}}return xt(u.onComment)&&(u.onComment=Rp(u,u.onComment)),u}s(Hi,"getOptions");function Rp(o,u){return function(m,y,g,E,k,M){var R={type:m?"Block":"Line",value:y,start:g,end:E};o.locations&&(R.loc=new He(this,k,M)),o.ranges&&(R.range=[g,E]),u.push(R)}}s(Rp,"pushComment");var zi=1,Ei=2,fv=4,Z0=8,ey=16,ty=32,hv=64,iy=128,Ms=256,mv=zi|Ei|Ms;function _v(o,u){return Ei|(o?fv:0)|(u?Z0:0)}s(_v,"functionFlags");var Fp=0,vv=1,ki=2,ny=3,oy=4,sy=5,Fe=s(function(u,m,y){this.options=u=Hi(u),this.sourceFile=u.sourceFile,this.keywords=Xe(h[u.ecmaVersion>=6?6:u.sourceType==="module"?"5module":5]);var g="";u.allowReserved!==!0&&(g=a[u.ecmaVersion>=6?6:u.ecmaVersion===5?5:3],u.sourceType==="module"&&(g+=" await")),this.reservedWords=Xe(g);var E=(g?g+" ":"")+a.strict;this.reservedWordsStrict=Xe(E),this.reservedWordsStrictBind=Xe(E+" "+a.strictBind),this.input=String(m),this.containsEsc=!1,y?(this.pos=y,this.lineStart=this.input.lastIndexOf(`
`,y-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ve).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=u.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&u.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(zi),this.regexpState=null,this.privateNameStack=[]},"Parser"),ii={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Fe.prototype.parse=s(function(){var u=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(u)},"parse"),ii.inFunction.get=function(){return(this.currentVarScope().flags&Ei)>0},ii.inGenerator.get=function(){return(this.currentVarScope().flags&Z0)>0&&!this.currentVarScope().inClassFieldInit},ii.inAsync.get=function(){return(this.currentVarScope().flags&fv)>0&&!this.currentVarScope().inClassFieldInit},ii.canAwait.get=function(){for(var o=this.scopeStack.length-1;o>=0;o--){var u=this.scopeStack[o];if(u.inClassFieldInit||u.flags&Ms)return!1;if(u.flags&Ei)return(u.flags&fv)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},ii.allowSuper.get=function(){var o=this.currentThisScope(),u=o.flags,m=o.inClassFieldInit;return(u&hv)>0||m||this.options.allowSuperOutsideMethod},ii.allowDirectSuper.get=function(){return(this.currentThisScope().flags&iy)>0},ii.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ii.allowNewDotTarget.get=function(){var o=this.currentThisScope(),u=o.flags,m=o.inClassFieldInit;return(u&(Ei|Ms))>0||m},ii.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ms)>0},Fe.extend=s(function(){for(var u=[],m=arguments.length;m--;)u[m]=arguments[m];for(var y=this,g=0;g<u.length;g++)y=u[g](y);return y},"extend"),Fe.parse=s(function(u,m){return new this(m,u).parse()},"parse"),Fe.parseExpressionAt=s(function(u,m,y){var g=new this(y,u,m);return g.nextToken(),g.parseExpression()},"parseExpressionAt"),Fe.tokenizer=s(function(u,m){return new this(m,u)},"tokenizer"),Object.defineProperties(Fe.prototype,ii);var dt=Fe.prototype,m1=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;dt.strictDirective=function(o){if(this.options.ecmaVersion<5)return!1;for(;;){B.lastIndex=o,o+=B.exec(this.input)[0].length;var u=m1.exec(this.input.slice(o));if(!u)return!1;if((u[1]||u[2])==="use strict"){B.lastIndex=o+u[0].length;var m=B.exec(this.input),y=m.index+m[0].length,g=this.input.charAt(y);return g===";"||g==="}"||ve.test(m[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(g)||g==="!"&&this.input.charAt(y+1)==="=")}o+=u[0].length,B.lastIndex=o,o+=B.exec(this.input)[0].length,this.input[o]===";"&&o++}},dt.eat=function(o){return this.type===o?(this.next(),!0):!1},dt.isContextual=function(o){return this.type===w.name&&this.value===o&&!this.containsEsc},dt.eatContextual=function(o){return this.isContextual(o)?(this.next(),!0):!1},dt.expectContextual=function(o){this.eatContextual(o)||this.unexpected()},dt.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||ve.test(this.input.slice(this.lastTokEnd,this.start))},dt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},dt.semicolon=function(){!this.eat(w.semi)&&!this.insertSemicolon()&&this.unexpected()},dt.afterTrailingComma=function(o,u){if(this.type===o)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),u||this.next(),!0},dt.expect=function(o){this.eat(o)||this.unexpected()},dt.unexpected=function(o){this.raise(o!=null?o:this.start,"Unexpected token")};var Op=s(function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1},"DestructuringErrors");dt.checkPatternErrors=function(o,u){if(!!o){o.trailingComma>-1&&this.raiseRecoverable(o.trailingComma,"Comma is not permitted after the rest element");var m=u?o.parenthesizedAssign:o.parenthesizedBind;m>-1&&this.raiseRecoverable(m,u?"Assigning to rvalue":"Parenthesized pattern")}},dt.checkExpressionErrors=function(o,u){if(!o)return!1;var m=o.shorthandAssign,y=o.doubleProto;if(!u)return m>=0||y>=0;m>=0&&this.raise(m,"Shorthand property assignments are valid only in destructuring patterns"),y>=0&&this.raiseRecoverable(y,"Redefinition of __proto__ property")},dt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},dt.isSimpleAssignTarget=function(o){return o.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(o.expression):o.type==="Identifier"||o.type==="MemberExpression"};var J=Fe.prototype;J.parseTopLevel=function(o){var u=Object.create(null);for(o.body||(o.body=[]);this.type!==w.eof;){var m=this.parseStatement(null,!0,u);o.body.push(m)}if(this.inModule)for(var y=0,g=Object.keys(this.undefinedExports);y<g.length;y+=1){var E=g[y];this.raiseRecoverable(this.undefinedExports[E].start,"Export '"+E+"' is not defined")}return this.adaptDirectivePrologue(o.body),this.next(),o.sourceType=this.options.sourceType,this.finishNode(o,"Program")};var yv={kind:"loop"},_1={kind:"switch"};J.isLet=function(o){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;B.lastIndex=this.pos;var u=B.exec(this.input),m=this.pos+u[0].length,y=this.input.charCodeAt(m);if(y===91||y===92||y>55295&&y<56320)return!0;if(o)return!1;if(y===123)return!0;if(I(y,!0)){for(var g=m+1;C(y=this.input.charCodeAt(g),!0);)++g;if(y===92||y>55295&&y<56320)return!0;var E=this.input.slice(m,g);if(!v.test(E))return!0}return!1},J.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;B.lastIndex=this.pos;var o=B.exec(this.input),u=this.pos+o[0].length,m;return!ve.test(this.input.slice(this.pos,u))&&this.input.slice(u,u+8)==="function"&&(u+8===this.input.length||!(C(m=this.input.charCodeAt(u+8))||m>55295&&m<56320))},J.parseStatement=function(o,u,m){var y=this.type,g=this.startNode(),E;switch(this.isLet(o)&&(y=w._var,E="let"),y){case w._break:case w._continue:return this.parseBreakContinueStatement(g,y.keyword);case w._debugger:return this.parseDebuggerStatement(g);case w._do:return this.parseDoStatement(g);case w._for:return this.parseForStatement(g);case w._function:return o&&(this.strict||o!=="if"&&o!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(g,!1,!o);case w._class:return o&&this.unexpected(),this.parseClass(g,!0);case w._if:return this.parseIfStatement(g);case w._return:return this.parseReturnStatement(g);case w._switch:return this.parseSwitchStatement(g);case w._throw:return this.parseThrowStatement(g);case w._try:return this.parseTryStatement(g);case w._const:case w._var:return E=E||this.value,o&&E!=="var"&&this.unexpected(),this.parseVarStatement(g,E);case w._while:return this.parseWhileStatement(g);case w._with:return this.parseWithStatement(g);case w.braceL:return this.parseBlock(!0,g);case w.semi:return this.parseEmptyStatement(g);case w._export:case w._import:if(this.options.ecmaVersion>10&&y===w._import){B.lastIndex=this.pos;var k=B.exec(this.input),M=this.pos+k[0].length,R=this.input.charCodeAt(M);if(R===40||R===46)return this.parseExpressionStatement(g,this.parseExpression())}return this.options.allowImportExportEverywhere||(u||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),y===w._import?this.parseImport(g):this.parseExport(g,m);default:if(this.isAsyncFunction())return o&&this.unexpected(),this.next(),this.parseFunctionStatement(g,!0,!o);var q=this.value,oe=this.parseExpression();return y===w.name&&oe.type==="Identifier"&&this.eat(w.colon)?this.parseLabeledStatement(g,q,oe,o):this.parseExpressionStatement(g,oe)}},J.parseBreakContinueStatement=function(o,u){var m=u==="break";this.next(),this.eat(w.semi)||this.insertSemicolon()?o.label=null:this.type!==w.name?this.unexpected():(o.label=this.parseIdent(),this.semicolon());for(var y=0;y<this.labels.length;++y){var g=this.labels[y];if((o.label==null||g.name===o.label.name)&&(g.kind!=null&&(m||g.kind==="loop")||o.label&&m))break}return y===this.labels.length&&this.raise(o.start,"Unsyntactic "+u),this.finishNode(o,m?"BreakStatement":"ContinueStatement")},J.parseDebuggerStatement=function(o){return this.next(),this.semicolon(),this.finishNode(o,"DebuggerStatement")},J.parseDoStatement=function(o){return this.next(),this.labels.push(yv),o.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),o.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(o,"DoWhileStatement")},J.parseForStatement=function(o){this.next();var u=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(yv),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return u>-1&&this.unexpected(u),this.parseFor(o,null);var m=this.isLet();if(this.type===w._var||this.type===w._const||m){var y=this.startNode(),g=m?"let":this.value;return this.next(),this.parseVar(y,!0,g),this.finishNode(y,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&y.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===w._in?u>-1&&this.unexpected(u):o.await=u>-1),this.parseForIn(o,y)):(u>-1&&this.unexpected(u),this.parseFor(o,y))}var E=this.isContextual("let"),k=!1,M=new Op,R=this.parseExpression(u>-1?"await":!0,M);return this.type===w._in||(k=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===w._in?u>-1&&this.unexpected(u):o.await=u>-1),E&&k&&this.raise(R.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(R,!1,M),this.checkLValPattern(R),this.parseForIn(o,R)):(this.checkExpressionErrors(M,!0),u>-1&&this.unexpected(u),this.parseFor(o,R))},J.parseFunctionStatement=function(o,u,m){return this.next(),this.parseFunction(o,Vs|(m?0:bv),!1,u)},J.parseIfStatement=function(o){return this.next(),o.test=this.parseParenExpression(),o.consequent=this.parseStatement("if"),o.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(o,"IfStatement")},J.parseReturnStatement=function(o){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?o.argument=null:(o.argument=this.parseExpression(),this.semicolon()),this.finishNode(o,"ReturnStatement")},J.parseSwitchStatement=function(o){this.next(),o.discriminant=this.parseParenExpression(),o.cases=[],this.expect(w.braceL),this.labels.push(_1),this.enterScope(0);for(var u,m=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var y=this.type===w._case;u&&this.finishNode(u,"SwitchCase"),o.cases.push(u=this.startNode()),u.consequent=[],this.next(),y?u.test=this.parseExpression():(m&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),m=!0,u.test=null),this.expect(w.colon)}else u||this.unexpected(),u.consequent.push(this.parseStatement(null));return this.exitScope(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(o,"SwitchStatement")},J.parseThrowStatement=function(o){return this.next(),ve.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),o.argument=this.parseExpression(),this.semicolon(),this.finishNode(o,"ThrowStatement")};var v1=[];J.parseTryStatement=function(o){if(this.next(),o.block=this.parseBlock(),o.handler=null,this.type===w._catch){var u=this.startNode();if(this.next(),this.eat(w.parenL)){u.param=this.parseBindingAtom();var m=u.param.type==="Identifier";this.enterScope(m?ty:0),this.checkLValPattern(u.param,m?oy:ki),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),u.param=null,this.enterScope(0);u.body=this.parseBlock(!1),this.exitScope(),o.handler=this.finishNode(u,"CatchClause")}return o.finalizer=this.eat(w._finally)?this.parseBlock():null,!o.handler&&!o.finalizer&&this.raise(o.start,"Missing catch or finally clause"),this.finishNode(o,"TryStatement")},J.parseVarStatement=function(o,u){return this.next(),this.parseVar(o,!1,u),this.semicolon(),this.finishNode(o,"VariableDeclaration")},J.parseWhileStatement=function(o){return this.next(),o.test=this.parseParenExpression(),this.labels.push(yv),o.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(o,"WhileStatement")},J.parseWithStatement=function(o){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),o.object=this.parseParenExpression(),o.body=this.parseStatement("with"),this.finishNode(o,"WithStatement")},J.parseEmptyStatement=function(o){return this.next(),this.finishNode(o,"EmptyStatement")},J.parseLabeledStatement=function(o,u,m,y){for(var g=0,E=this.labels;g<E.length;g+=1){var k=E[g];k.name===u&&this.raise(m.start,"Label '"+u+"' is already declared")}for(var M=this.type.isLoop?"loop":this.type===w._switch?"switch":null,R=this.labels.length-1;R>=0;R--){var q=this.labels[R];if(q.statementStart===o.start)q.statementStart=this.start,q.kind=M;else break}return this.labels.push({name:u,kind:M,statementStart:this.start}),o.body=this.parseStatement(y?y.indexOf("label")===-1?y+"label":y:"label"),this.labels.pop(),o.label=m,this.finishNode(o,"LabeledStatement")},J.parseExpressionStatement=function(o,u){return o.expression=u,this.semicolon(),this.finishNode(o,"ExpressionStatement")},J.parseBlock=function(o,u,m){for(o===void 0&&(o=!0),u===void 0&&(u=this.startNode()),u.body=[],this.expect(w.braceL),o&&this.enterScope(0);this.type!==w.braceR;){var y=this.parseStatement(null);u.body.push(y)}return m&&(this.strict=!1),this.next(),o&&this.exitScope(),this.finishNode(u,"BlockStatement")},J.parseFor=function(o,u){return o.init=u,this.expect(w.semi),o.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),o.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,"ForStatement")},J.parseForIn=function(o,u){var m=this.type===w._in;return this.next(),u.type==="VariableDeclaration"&&u.declarations[0].init!=null&&(!m||this.options.ecmaVersion<8||this.strict||u.kind!=="var"||u.declarations[0].id.type!=="Identifier")&&this.raise(u.start,(m?"for-in":"for-of")+" loop variable declaration may not have an initializer"),o.left=u,o.right=m?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,m?"ForInStatement":"ForOfStatement")},J.parseVar=function(o,u,m){for(o.declarations=[],o.kind=m;;){var y=this.startNode();if(this.parseVarId(y,m),this.eat(w.eq)?y.init=this.parseMaybeAssign(u):m==="const"&&!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():y.id.type!=="Identifier"&&!(u&&(this.type===w._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):y.init=null,o.declarations.push(this.finishNode(y,"VariableDeclarator")),!this.eat(w.comma))break}return o},J.parseVarId=function(o,u){o.id=this.parseBindingAtom(),this.checkLValPattern(o.id,u==="var"?vv:ki,!1)};var Vs=1,bv=2,ry=4;J.parseFunction=function(o,u,m,y,g){this.initFunction(o),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!y)&&(this.type===w.star&&u&bv&&this.unexpected(),o.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(o.async=!!y),u&Vs&&(o.id=u&ry&&this.type!==w.name?null:this.parseIdent(),o.id&&!(u&bv)&&this.checkLValSimple(o.id,this.strict||o.generator||o.async?this.treatFunctionsAsVar?vv:ki:ny));var E=this.yieldPos,k=this.awaitPos,M=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_v(o.async,o.generator)),u&Vs||(o.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(o),this.parseFunctionBody(o,m,!1,g),this.yieldPos=E,this.awaitPos=k,this.awaitIdentPos=M,this.finishNode(o,u&Vs?"FunctionDeclaration":"FunctionExpression")},J.parseFunctionParams=function(o){this.expect(w.parenL),o.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},J.parseClass=function(o,u){this.next();var m=this.strict;this.strict=!0,this.parseClassId(o,u),this.parseClassSuper(o);var y=this.enterClassBody(),g=this.startNode(),E=!1;for(g.body=[],this.expect(w.braceL);this.type!==w.braceR;){var k=this.parseClassElement(o.superClass!==null);k&&(g.body.push(k),k.type==="MethodDefinition"&&k.kind==="constructor"?(E&&this.raise(k.start,"Duplicate constructor in the same class"),E=!0):k.key&&k.key.type==="PrivateIdentifier"&&y1(y,k)&&this.raiseRecoverable(k.key.start,"Identifier '#"+k.key.name+"' has already been declared"))}return this.strict=m,this.next(),o.body=this.finishNode(g,"ClassBody"),this.exitClassBody(),this.finishNode(o,u?"ClassDeclaration":"ClassExpression")},J.parseClassElement=function(o){if(this.eat(w.semi))return null;var u=this.options.ecmaVersion,m=this.startNode(),y="",g=!1,E=!1,k="method",M=!1;if(this.eatContextual("static")){if(u>=13&&this.eat(w.braceL))return this.parseClassStaticBlock(m),m;this.isClassElementNameStart()||this.type===w.star?M=!0:y="static"}if(m.static=M,!y&&u>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===w.star)&&!this.canInsertSemicolon()?E=!0:y="async"),!y&&(u>=9||!E)&&this.eat(w.star)&&(g=!0),!y&&!E&&!g){var R=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?k=R:y=R)}if(y?(m.computed=!1,m.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),m.key.name=y,this.finishNode(m.key,"Identifier")):this.parseClassElementName(m),u<13||this.type===w.parenL||k!=="method"||g||E){var q=!m.static&&Lp(m,"constructor"),oe=q&&o;q&&k!=="method"&&this.raise(m.key.start,"Constructor can't have get/set modifier"),m.kind=q?"constructor":k,this.parseClassMethod(m,g,E,oe)}else this.parseClassField(m);return m},J.isClassElementNameStart=function(){return this.type===w.name||this.type===w.privateId||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword},J.parseClassElementName=function(o){this.type===w.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),o.computed=!1,o.key=this.parsePrivateIdent()):this.parsePropertyName(o)},J.parseClassMethod=function(o,u,m,y){var g=o.key;o.kind==="constructor"?(u&&this.raise(g.start,"Constructor can't be a generator"),m&&this.raise(g.start,"Constructor can't be an async method")):o.static&&Lp(o,"prototype")&&this.raise(g.start,"Classes may not have a static property named prototype");var E=o.value=this.parseMethod(u,m,y);return o.kind==="get"&&E.params.length!==0&&this.raiseRecoverable(E.start,"getter should have no params"),o.kind==="set"&&E.params.length!==1&&this.raiseRecoverable(E.start,"setter should have exactly one param"),o.kind==="set"&&E.params[0].type==="RestElement"&&this.raiseRecoverable(E.params[0].start,"Setter cannot use rest params"),this.finishNode(o,"MethodDefinition")},J.parseClassField=function(o){if(Lp(o,"constructor")?this.raise(o.key.start,"Classes can't have a field named 'constructor'"):o.static&&Lp(o,"prototype")&&this.raise(o.key.start,"Classes can't have a static field named 'prototype'"),this.eat(w.eq)){var u=this.currentThisScope(),m=u.inClassFieldInit;u.inClassFieldInit=!0,o.value=this.parseMaybeAssign(),u.inClassFieldInit=m}else o.value=null;return this.semicolon(),this.finishNode(o,"PropertyDefinition")},J.parseClassStaticBlock=function(o){o.body=[];var u=this.labels;for(this.labels=[],this.enterScope(Ms|hv);this.type!==w.braceR;){var m=this.parseStatement(null);o.body.push(m)}return this.next(),this.exitScope(),this.labels=u,this.finishNode(o,"StaticBlock")},J.parseClassId=function(o,u){this.type===w.name?(o.id=this.parseIdent(),u&&this.checkLValSimple(o.id,ki,!1)):(u===!0&&this.unexpected(),o.id=null)},J.parseClassSuper=function(o){o.superClass=this.eat(w._extends)?this.parseExprSubscripts(!1):null},J.enterClassBody=function(){var o={declared:Object.create(null),used:[]};return this.privateNameStack.push(o),o.declared},J.exitClassBody=function(){for(var o=this.privateNameStack.pop(),u=o.declared,m=o.used,y=this.privateNameStack.length,g=y===0?null:this.privateNameStack[y-1],E=0;E<m.length;++E){var k=m[E];rt(u,k.name)||(g?g.used.push(k):this.raiseRecoverable(k.start,"Private field '#"+k.name+"' must be declared in an enclosing class"))}};function y1(o,u){var m=u.key.name,y=o[m],g="true";return u.type==="MethodDefinition"&&(u.kind==="get"||u.kind==="set")&&(g=(u.static?"s":"i")+u.kind),y==="iget"&&g==="iset"||y==="iset"&&g==="iget"||y==="sget"&&g==="sset"||y==="sset"&&g==="sget"?(o[m]="true",!1):y?!0:(o[m]=g,!1)}s(y1,"isPrivateNameConflicted");function Lp(o,u){var m=o.computed,y=o.key;return!m&&(y.type==="Identifier"&&y.name===u||y.type==="Literal"&&y.value===u)}s(Lp,"checkKeyName"),J.parseExport=function(o,u){if(this.next(),this.eat(w.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(o.exported=this.parseModuleExportName(),this.checkExport(u,o.exported,this.lastTokStart)):o.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),o.source=this.parseExprAtom(),this.semicolon(),this.finishNode(o,"ExportAllDeclaration");if(this.eat(w._default)){this.checkExport(u,"default",this.lastTokStart);var m;if(this.type===w._function||(m=this.isAsyncFunction())){var y=this.startNode();this.next(),m&&this.next(),o.declaration=this.parseFunction(y,Vs|ry,!1,m)}else if(this.type===w._class){var g=this.startNode();o.declaration=this.parseClass(g,"nullableID")}else o.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(o,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())o.declaration=this.parseStatement(null),o.declaration.type==="VariableDeclaration"?this.checkVariableExport(u,o.declaration.declarations):this.checkExport(u,o.declaration.id,o.declaration.id.start),o.specifiers=[],o.source=null;else{if(o.declaration=null,o.specifiers=this.parseExportSpecifiers(u),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),o.source=this.parseExprAtom();else{for(var E=0,k=o.specifiers;E<k.length;E+=1){var M=k[E];this.checkUnreserved(M.local),this.checkLocalExport(M.local),M.local.type==="Literal"&&this.raise(M.local.start,"A string literal cannot be used as an exported binding without `from`.")}o.source=null}this.semicolon()}return this.finishNode(o,"ExportNamedDeclaration")},J.checkExport=function(o,u,m){!o||(typeof u!="string"&&(u=u.type==="Identifier"?u.name:u.value),rt(o,u)&&this.raiseRecoverable(m,"Duplicate export '"+u+"'"),o[u]=!0)},J.checkPatternExport=function(o,u){var m=u.type;if(m==="Identifier")this.checkExport(o,u,u.start);else if(m==="ObjectPattern")for(var y=0,g=u.properties;y<g.length;y+=1){var E=g[y];this.checkPatternExport(o,E)}else if(m==="ArrayPattern")for(var k=0,M=u.elements;k<M.length;k+=1){var R=M[k];R&&this.checkPatternExport(o,R)}else m==="Property"?this.checkPatternExport(o,u.value):m==="AssignmentPattern"?this.checkPatternExport(o,u.left):m==="RestElement"?this.checkPatternExport(o,u.argument):m==="ParenthesizedExpression"&&this.checkPatternExport(o,u.expression)},J.checkVariableExport=function(o,u){if(!!o)for(var m=0,y=u;m<y.length;m+=1){var g=y[m];this.checkPatternExport(o,g.id)}},J.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},J.parseExportSpecifiers=function(o){var u=[],m=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(m)m=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var y=this.startNode();y.local=this.parseModuleExportName(),y.exported=this.eatContextual("as")?this.parseModuleExportName():y.local,this.checkExport(o,y.exported,y.exported.start),u.push(this.finishNode(y,"ExportSpecifier"))}return u},J.parseImport=function(o){return this.next(),this.type===w.string?(o.specifiers=v1,o.source=this.parseExprAtom()):(o.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),o.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(o,"ImportDeclaration")},J.parseImportSpecifiers=function(){var o=[],u=!0;if(this.type===w.name){var m=this.startNode();if(m.local=this.parseIdent(),this.checkLValSimple(m.local,ki),o.push(this.finishNode(m,"ImportDefaultSpecifier")),!this.eat(w.comma))return o}if(this.type===w.star){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,ki),o.push(this.finishNode(y,"ImportNamespaceSpecifier")),o}for(this.expect(w.braceL);!this.eat(w.braceR);){if(u)u=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var g=this.startNode();g.imported=this.parseModuleExportName(),this.eatContextual("as")?g.local=this.parseIdent():(this.checkUnreserved(g.imported),g.local=g.imported),this.checkLValSimple(g.local,ki),o.push(this.finishNode(g,"ImportSpecifier"))}return o},J.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===w.string){var o=this.parseLiteral(this.value);return ce.test(o.value)&&this.raise(o.start,"An export name cannot include a lone surrogate."),o}return this.parseIdent(!0)},J.adaptDirectivePrologue=function(o){for(var u=0;u<o.length&&this.isDirectiveCandidate(o[u]);++u)o[u].directive=o[u].expression.raw.slice(1,-1)},J.isDirectiveCandidate=function(o){return this.options.ecmaVersion>=5&&o.type==="ExpressionStatement"&&o.expression.type==="Literal"&&typeof o.expression.value=="string"&&(this.input[o.start]==='"'||this.input[o.start]==="'")};var Ut=Fe.prototype;Ut.toAssignable=function(o,u,m){if(this.options.ecmaVersion>=6&&o)switch(o.type){case"Identifier":this.inAsync&&o.name==="await"&&this.raise(o.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":o.type="ObjectPattern",m&&this.checkPatternErrors(m,!0);for(var y=0,g=o.properties;y<g.length;y+=1){var E=g[y];this.toAssignable(E,u),E.type==="RestElement"&&(E.argument.type==="ArrayPattern"||E.argument.type==="ObjectPattern")&&this.raise(E.argument.start,"Unexpected token")}break;case"Property":o.kind!=="init"&&this.raise(o.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(o.value,u);break;case"ArrayExpression":o.type="ArrayPattern",m&&this.checkPatternErrors(m,!0),this.toAssignableList(o.elements,u);break;case"SpreadElement":o.type="RestElement",this.toAssignable(o.argument,u),o.argument.type==="AssignmentPattern"&&this.raise(o.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":o.operator!=="="&&this.raise(o.left.end,"Only '=' operator can be used for specifying default value."),o.type="AssignmentPattern",delete o.operator,this.toAssignable(o.left,u);break;case"ParenthesizedExpression":this.toAssignable(o.expression,u,m);break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!u)break;default:this.raise(o.start,"Assigning to rvalue")}else m&&this.checkPatternErrors(m,!0);return o},Ut.toAssignableList=function(o,u){for(var m=o.length,y=0;y<m;y++){var g=o[y];g&&this.toAssignable(g,u)}if(m){var E=o[m-1];this.options.ecmaVersion===6&&u&&E&&E.type==="RestElement"&&E.argument.type!=="Identifier"&&this.unexpected(E.argument.start)}return o},Ut.parseSpread=function(o){var u=this.startNode();return this.next(),u.argument=this.parseMaybeAssign(!1,o),this.finishNode(u,"SpreadElement")},Ut.parseRestBinding=function(){var o=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==w.name&&this.unexpected(),o.argument=this.parseBindingAtom(),this.finishNode(o,"RestElement")},Ut.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var o=this.startNode();return this.next(),o.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(o,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Ut.parseBindingList=function(o,u,m){for(var y=[],g=!0;!this.eat(o);)if(g?g=!1:this.expect(w.comma),u&&this.type===w.comma)y.push(null);else{if(m&&this.afterTrailingComma(o))break;if(this.type===w.ellipsis){var E=this.parseRestBinding();this.parseBindingListItem(E),y.push(E),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(o);break}else{var k=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(k),y.push(k)}}return y},Ut.parseBindingListItem=function(o){return o},Ut.parseMaybeDefault=function(o,u,m){if(m=m||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return m;var y=this.startNodeAt(o,u);return y.left=m,y.right=this.parseMaybeAssign(),this.finishNode(y,"AssignmentPattern")},Ut.checkLValSimple=function(o,u,m){u===void 0&&(u=Fp);var y=u!==Fp;switch(o.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(o.name)&&this.raiseRecoverable(o.start,(y?"Binding ":"Assigning to ")+o.name+" in strict mode"),y&&(u===ki&&o.name==="let"&&this.raiseRecoverable(o.start,"let is disallowed as a lexically bound name"),m&&(rt(m,o.name)&&this.raiseRecoverable(o.start,"Argument name clash"),m[o.name]=!0),u!==sy&&this.declareName(o.name,u,o.start));break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":y&&this.raiseRecoverable(o.start,"Binding member expression");break;case"ParenthesizedExpression":return y&&this.raiseRecoverable(o.start,"Binding parenthesized expression"),this.checkLValSimple(o.expression,u,m);default:this.raise(o.start,(y?"Binding":"Assigning to")+" rvalue")}},Ut.checkLValPattern=function(o,u,m){switch(u===void 0&&(u=Fp),o.type){case"ObjectPattern":for(var y=0,g=o.properties;y<g.length;y+=1){var E=g[y];this.checkLValInnerPattern(E,u,m)}break;case"ArrayPattern":for(var k=0,M=o.elements;k<M.length;k+=1){var R=M[k];R&&this.checkLValInnerPattern(R,u,m)}break;default:this.checkLValSimple(o,u,m)}},Ut.checkLValInnerPattern=function(o,u,m){switch(u===void 0&&(u=Fp),o.type){case"Property":this.checkLValInnerPattern(o.value,u,m);break;case"AssignmentPattern":this.checkLValPattern(o.left,u,m);break;case"RestElement":this.checkLValPattern(o.argument,u,m);break;default:this.checkLValPattern(o,u,m)}};var Rt=s(function(u,m,y,g,E){this.token=u,this.isExpr=!!m,this.preserveSpace=!!y,this.override=g,this.generator=!!E},"TokContext"),ke={b_stat:new Rt("{",!1),b_expr:new Rt("{",!0),b_tmpl:new Rt("${",!1),p_stat:new Rt("(",!1),p_expr:new Rt("(",!0),q_tmpl:new Rt("`",!0,!0,function(o){return o.tryReadTemplateToken()}),f_stat:new Rt("function",!1),f_expr:new Rt("function",!0),f_expr_gen:new Rt("function",!0,!1,null,!0),f_gen:new Rt("function",!1,!1,null,!0)},fo=Fe.prototype;fo.initialContext=function(){return[ke.b_stat]},fo.curContext=function(){return this.context[this.context.length-1]},fo.braceIsBlock=function(o){var u=this.curContext();return u===ke.f_expr||u===ke.f_stat?!0:o===w.colon&&(u===ke.b_stat||u===ke.b_expr)?!u.isExpr:o===w._return||o===w.name&&this.exprAllowed?ve.test(this.input.slice(this.lastTokEnd,this.start)):o===w._else||o===w.semi||o===w.eof||o===w.parenR||o===w.arrow?!0:o===w.braceL?u===ke.b_stat:o===w._var||o===w._const||o===w.name?!1:!this.exprAllowed},fo.inGeneratorContext=function(){for(var o=this.context.length-1;o>=1;o--){var u=this.context[o];if(u.token==="function")return u.generator}return!1},fo.updateContext=function(o){var u,m=this.type;m.keyword&&o===w.dot?this.exprAllowed=!1:(u=m.updateContext)?u.call(this,o):this.exprAllowed=m.beforeExpr},fo.overrideContext=function(o){this.curContext()!==o&&(this.context[this.context.length-1]=o)},w.parenR.updateContext=w.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var o=this.context.pop();o===ke.b_stat&&this.curContext().token==="function"&&(o=this.context.pop()),this.exprAllowed=!o.isExpr},w.braceL.updateContext=function(o){this.context.push(this.braceIsBlock(o)?ke.b_stat:ke.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ke.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(o){var u=o===w._if||o===w._for||o===w._with||o===w._while;this.context.push(u?ke.p_stat:ke.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(o){o.beforeExpr&&o!==w._else&&!(o===w.semi&&this.curContext()!==ke.p_stat)&&!(o===w._return&&ve.test(this.input.slice(this.lastTokEnd,this.start)))&&!((o===w.colon||o===w.braceL)&&this.curContext()===ke.b_stat)?this.context.push(ke.f_expr):this.context.push(ke.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ke.q_tmpl?this.context.pop():this.context.push(ke.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(o){if(o===w._function){var u=this.context.length-1;this.context[u]===ke.f_expr?this.context[u]=ke.f_expr_gen:this.context[u]=ke.f_gen}this.exprAllowed=!0},w.name.updateContext=function(o){var u=!1;this.options.ecmaVersion>=6&&o!==w.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(u=!0),this.exprAllowed=u};var X=Fe.prototype;X.checkPropClash=function(o,u,m){if(!(this.options.ecmaVersion>=9&&o.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(o.computed||o.method||o.shorthand))){var y=o.key,g;switch(y.type){case"Identifier":g=y.name;break;case"Literal":g=String(y.value);break;default:return}var E=o.kind;if(this.options.ecmaVersion>=6){g==="__proto__"&&E==="init"&&(u.proto&&(m?m.doubleProto<0&&(m.doubleProto=y.start):this.raiseRecoverable(y.start,"Redefinition of __proto__ property")),u.proto=!0);return}g="$"+g;var k=u[g];if(k){var M;E==="init"?M=this.strict&&k.init||k.get||k.set:M=k.init||k[E],M&&this.raiseRecoverable(y.start,"Redefinition of property")}else k=u[g]={init:!1,get:!1,set:!1};k[E]=!0}},X.parseExpression=function(o,u){var m=this.start,y=this.startLoc,g=this.parseMaybeAssign(o,u);if(this.type===w.comma){var E=this.startNodeAt(m,y);for(E.expressions=[g];this.eat(w.comma);)E.expressions.push(this.parseMaybeAssign(o,u));return this.finishNode(E,"SequenceExpression")}return g},X.parseMaybeAssign=function(o,u,m){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(o);this.exprAllowed=!1}var y=!1,g=-1,E=-1,k=-1;u?(g=u.parenthesizedAssign,E=u.trailingComma,k=u.doubleProto,u.parenthesizedAssign=u.trailingComma=-1):(u=new Op,y=!0);var M=this.start,R=this.startLoc;(this.type===w.parenL||this.type===w.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=o==="await");var q=this.parseMaybeConditional(o,u);if(m&&(q=m.call(this,q,M,R)),this.type.isAssign){var oe=this.startNodeAt(M,R);return oe.operator=this.value,this.type===w.eq&&(q=this.toAssignable(q,!1,u)),y||(u.parenthesizedAssign=u.trailingComma=u.doubleProto=-1),u.shorthandAssign>=q.start&&(u.shorthandAssign=-1),this.type===w.eq?this.checkLValPattern(q):this.checkLValSimple(q),oe.left=q,this.next(),oe.right=this.parseMaybeAssign(o),k>-1&&(u.doubleProto=k),this.finishNode(oe,"AssignmentExpression")}else y&&this.checkExpressionErrors(u,!0);return g>-1&&(u.parenthesizedAssign=g),E>-1&&(u.trailingComma=E),q},X.parseMaybeConditional=function(o,u){var m=this.start,y=this.startLoc,g=this.parseExprOps(o,u);if(this.checkExpressionErrors(u))return g;if(this.eat(w.question)){var E=this.startNodeAt(m,y);return E.test=g,E.consequent=this.parseMaybeAssign(),this.expect(w.colon),E.alternate=this.parseMaybeAssign(o),this.finishNode(E,"ConditionalExpression")}return g},X.parseExprOps=function(o,u){var m=this.start,y=this.startLoc,g=this.parseMaybeUnary(u,!1,!1,o);return this.checkExpressionErrors(u)||g.start===m&&g.type==="ArrowFunctionExpression"?g:this.parseExprOp(g,m,y,-1,o)},X.parseExprOp=function(o,u,m,y,g){var E=this.type.binop;if(E!=null&&(!g||this.type!==w._in)&&E>y){var k=this.type===w.logicalOR||this.type===w.logicalAND,M=this.type===w.coalesce;M&&(E=w.logicalAND.binop);var R=this.value;this.next();var q=this.start,oe=this.startLoc,at=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,g),q,oe,E,g),xn=this.buildBinary(u,m,o,at,R,k||M);return(k&&this.type===w.coalesce||M&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(xn,u,m,y,g)}return o},X.buildBinary=function(o,u,m,y,g,E){y.type==="PrivateIdentifier"&&this.raise(y.start,"Private identifier can only be left side of binary expression");var k=this.startNodeAt(o,u);return k.left=m,k.operator=g,k.right=y,this.finishNode(k,E?"LogicalExpression":"BinaryExpression")},X.parseMaybeUnary=function(o,u,m,y){var g=this.start,E=this.startLoc,k;if(this.isContextual("await")&&this.canAwait)k=this.parseAwait(y),u=!0;else if(this.type.prefix){var M=this.startNode(),R=this.type===w.incDec;M.operator=this.value,M.prefix=!0,this.next(),M.argument=this.parseMaybeUnary(null,!0,R,y),this.checkExpressionErrors(o,!0),R?this.checkLValSimple(M.argument):this.strict&&M.operator==="delete"&&M.argument.type==="Identifier"?this.raiseRecoverable(M.start,"Deleting local variable in strict mode"):M.operator==="delete"&&ay(M.argument)?this.raiseRecoverable(M.start,"Private fields can not be deleted"):u=!0,k=this.finishNode(M,R?"UpdateExpression":"UnaryExpression")}else if(!u&&this.type===w.privateId)(y||this.privateNameStack.length===0)&&this.unexpected(),k=this.parsePrivateIdent(),this.type!==w._in&&this.unexpected();else{if(k=this.parseExprSubscripts(o,y),this.checkExpressionErrors(o))return k;for(;this.type.postfix&&!this.canInsertSemicolon();){var q=this.startNodeAt(g,E);q.operator=this.value,q.prefix=!1,q.argument=k,this.checkLValSimple(k),this.next(),k=this.finishNode(q,"UpdateExpression")}}if(!m&&this.eat(w.starstar))if(u)this.unexpected(this.lastTokStart);else return this.buildBinary(g,E,k,this.parseMaybeUnary(null,!1,!1,y),"**",!1);else return k};function ay(o){return o.type==="MemberExpression"&&o.property.type==="PrivateIdentifier"||o.type==="ChainExpression"&&ay(o.expression)}s(ay,"isPrivateFieldAccess"),X.parseExprSubscripts=function(o,u){var m=this.start,y=this.startLoc,g=this.parseExprAtom(o,u);if(g.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return g;var E=this.parseSubscripts(g,m,y,!1,u);return o&&E.type==="MemberExpression"&&(o.parenthesizedAssign>=E.start&&(o.parenthesizedAssign=-1),o.parenthesizedBind>=E.start&&(o.parenthesizedBind=-1),o.trailingComma>=E.start&&(o.trailingComma=-1)),E},X.parseSubscripts=function(o,u,m,y,g){for(var E=this.options.ecmaVersion>=8&&o.type==="Identifier"&&o.name==="async"&&this.lastTokEnd===o.end&&!this.canInsertSemicolon()&&o.end-o.start===5&&this.potentialArrowAt===o.start,k=!1;;){var M=this.parseSubscript(o,u,m,y,E,k,g);if(M.optional&&(k=!0),M===o||M.type==="ArrowFunctionExpression"){if(k){var R=this.startNodeAt(u,m);R.expression=M,M=this.finishNode(R,"ChainExpression")}return M}o=M}},X.parseSubscript=function(o,u,m,y,g,E,k){var M=this.options.ecmaVersion>=11,R=M&&this.eat(w.questionDot);y&&R&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var q=this.eat(w.bracketL);if(q||R&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var oe=this.startNodeAt(u,m);oe.object=o,q?(oe.property=this.parseExpression(),this.expect(w.bracketR)):this.type===w.privateId&&o.type!=="Super"?oe.property=this.parsePrivateIdent():oe.property=this.parseIdent(this.options.allowReserved!=="never"),oe.computed=!!q,M&&(oe.optional=R),o=this.finishNode(oe,"MemberExpression")}else if(!y&&this.eat(w.parenL)){var at=new Op,xn=this.yieldPos,Fs=this.awaitPos,ho=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Yp=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,at);if(g&&!R&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(at,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=xn,this.awaitPos=Fs,this.awaitIdentPos=ho,this.parseArrowExpression(this.startNodeAt(u,m),Yp,!0,k);this.checkExpressionErrors(at,!0),this.yieldPos=xn||this.yieldPos,this.awaitPos=Fs||this.awaitPos,this.awaitIdentPos=ho||this.awaitIdentPos;var mo=this.startNodeAt(u,m);mo.callee=o,mo.arguments=Yp,M&&(mo.optional=R),o=this.finishNode(mo,"CallExpression")}else if(this.type===w.backQuote){(R||E)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var _o=this.startNodeAt(u,m);_o.tag=o,_o.quasi=this.parseTemplate({isTagged:!0}),o=this.finishNode(_o,"TaggedTemplateExpression")}return o},X.parseExprAtom=function(o,u){this.type===w.slash&&this.readRegexp();var m,y=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),m=this.startNode(),this.next(),this.type===w.parenL&&!this.allowDirectSuper&&this.raise(m.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(m,"Super");case w._this:return m=this.startNode(),this.next(),this.finishNode(m,"ThisExpression");case w.name:var g=this.start,E=this.startLoc,k=this.containsEsc,M=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!k&&M.name==="async"&&!this.canInsertSemicolon()&&this.eat(w._function))return this.overrideContext(ke.f_expr),this.parseFunction(this.startNodeAt(g,E),0,!1,!0,u);if(y&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(g,E),[M],!1,u);if(this.options.ecmaVersion>=8&&M.name==="async"&&this.type===w.name&&!k&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return M=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(w.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(g,E),[M],!0,u)}return M;case w.regexp:var R=this.value;return m=this.parseLiteral(R.value),m.regex={pattern:R.pattern,flags:R.flags},m;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return m=this.startNode(),m.value=this.type===w._null?null:this.type===w._true,m.raw=this.type.keyword,this.next(),this.finishNode(m,"Literal");case w.parenL:var q=this.start,oe=this.parseParenAndDistinguishExpression(y,u);return o&&(o.parenthesizedAssign<0&&!this.isSimpleAssignTarget(oe)&&(o.parenthesizedAssign=q),o.parenthesizedBind<0&&(o.parenthesizedBind=q)),oe;case w.bracketL:return m=this.startNode(),this.next(),m.elements=this.parseExprList(w.bracketR,!0,!0,o),this.finishNode(m,"ArrayExpression");case w.braceL:return this.overrideContext(ke.b_expr),this.parseObj(!1,o);case w._function:return m=this.startNode(),this.next(),this.parseFunction(m,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},X.parseExprImport=function(){var o=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var u=this.parseIdent(!0);switch(this.type){case w.parenL:return this.parseDynamicImport(o);case w.dot:return o.meta=u,this.parseImportMeta(o);default:this.unexpected()}},X.parseDynamicImport=function(o){if(this.next(),o.source=this.parseMaybeAssign(),!this.eat(w.parenR)){var u=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(u,"Trailing comma is not allowed in import()"):this.unexpected(u)}return this.finishNode(o,"ImportExpression")},X.parseImportMeta=function(o){this.next();var u=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="meta"&&this.raiseRecoverable(o.property.start,"The only valid meta property for import is 'import.meta'"),u&&this.raiseRecoverable(o.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(o.start,"Cannot use 'import.meta' outside a module"),this.finishNode(o,"MetaProperty")},X.parseLiteral=function(o){var u=this.startNode();return u.value=o,u.raw=this.input.slice(this.start,this.end),u.raw.charCodeAt(u.raw.length-1)===110&&(u.bigint=u.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(u,"Literal")},X.parseParenExpression=function(){this.expect(w.parenL);var o=this.parseExpression();return this.expect(w.parenR),o},X.parseParenAndDistinguishExpression=function(o,u){var m=this.start,y=this.startLoc,g,E=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var k=this.start,M=this.startLoc,R=[],q=!0,oe=!1,at=new Op,xn=this.yieldPos,Fs=this.awaitPos,ho;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;)if(q?q=!1:this.expect(w.comma),E&&this.afterTrailingComma(w.parenR,!0)){oe=!0;break}else if(this.type===w.ellipsis){ho=this.start,R.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else R.push(this.parseMaybeAssign(!1,at,this.parseParenItem));var Yp=this.lastTokEnd,mo=this.lastTokEndLoc;if(this.expect(w.parenR),o&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(at,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=xn,this.awaitPos=Fs,this.parseParenArrowList(m,y,R,u);(!R.length||oe)&&this.unexpected(this.lastTokStart),ho&&this.unexpected(ho),this.checkExpressionErrors(at,!0),this.yieldPos=xn||this.yieldPos,this.awaitPos=Fs||this.awaitPos,R.length>1?(g=this.startNodeAt(k,M),g.expressions=R,this.finishNodeAt(g,"SequenceExpression",Yp,mo)):g=R[0]}else g=this.parseParenExpression();if(this.options.preserveParens){var _o=this.startNodeAt(m,y);return _o.expression=g,this.finishNode(_o,"ParenthesizedExpression")}else return g},X.parseParenItem=function(o){return o},X.parseParenArrowList=function(o,u,m,y){return this.parseArrowExpression(this.startNodeAt(o,u),m,!1,y)};var b1=[];X.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var o=this.startNode(),u=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){o.meta=u;var m=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="target"&&this.raiseRecoverable(o.property.start,"The only valid meta property for new is 'new.target'"),m&&this.raiseRecoverable(o.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(o.start,"'new.target' can only be used in functions and class static block"),this.finishNode(o,"MetaProperty")}var y=this.start,g=this.startLoc,E=this.type===w._import;return o.callee=this.parseSubscripts(this.parseExprAtom(),y,g,!0,!1),E&&o.callee.type==="ImportExpression"&&this.raise(y,"Cannot use new with import()"),this.eat(w.parenL)?o.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):o.arguments=b1,this.finishNode(o,"NewExpression")},X.parseTemplateElement=function(o){var u=o.isTagged,m=this.startNode();return this.type===w.invalidTemplate?(u||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),m.value={raw:this.value,cooked:null}):m.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),m.tail=this.type===w.backQuote,this.finishNode(m,"TemplateElement")},X.parseTemplate=function(o){o===void 0&&(o={});var u=o.isTagged;u===void 0&&(u=!1);var m=this.startNode();this.next(),m.expressions=[];var y=this.parseTemplateElement({isTagged:u});for(m.quasis=[y];!y.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),m.expressions.push(this.parseExpression()),this.expect(w.braceR),m.quasis.push(y=this.parseTemplateElement({isTagged:u}));return this.next(),this.finishNode(m,"TemplateLiteral")},X.isAsyncProp=function(o){return!o.computed&&o.key.type==="Identifier"&&o.key.name==="async"&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!ve.test(this.input.slice(this.lastTokEnd,this.start))},X.parseObj=function(o,u){var m=this.startNode(),y=!0,g={};for(m.properties=[],this.next();!this.eat(w.braceR);){if(y)y=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var E=this.parseProperty(o,u);o||this.checkPropClash(E,g,u),m.properties.push(E)}return this.finishNode(m,o?"ObjectPattern":"ObjectExpression")},X.parseProperty=function(o,u){var m=this.startNode(),y,g,E,k;if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return o?(m.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(m,"RestElement")):(m.argument=this.parseMaybeAssign(!1,u),this.type===w.comma&&u&&u.trailingComma<0&&(u.trailingComma=this.start),this.finishNode(m,"SpreadElement"));this.options.ecmaVersion>=6&&(m.method=!1,m.shorthand=!1,(o||u)&&(E=this.start,k=this.startLoc),o||(y=this.eat(w.star)));var M=this.containsEsc;return this.parsePropertyName(m),!o&&!M&&this.options.ecmaVersion>=8&&!y&&this.isAsyncProp(m)?(g=!0,y=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(m,u)):g=!1,this.parsePropertyValue(m,o,y,g,E,k,u,M),this.finishNode(m,"Property")},X.parsePropertyValue=function(o,u,m,y,g,E,k,M){if((m||y)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))o.value=u?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,k),o.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)u&&this.unexpected(),o.kind="init",o.method=!0,o.value=this.parseMethod(m,y);else if(!u&&!M&&this.options.ecmaVersion>=5&&!o.computed&&o.key.type==="Identifier"&&(o.key.name==="get"||o.key.name==="set")&&this.type!==w.comma&&this.type!==w.braceR&&this.type!==w.eq){(m||y)&&this.unexpected(),o.kind=o.key.name,this.parsePropertyName(o),o.value=this.parseMethod(!1);var R=o.kind==="get"?0:1;if(o.value.params.length!==R){var q=o.value.start;o.kind==="get"?this.raiseRecoverable(q,"getter should have no params"):this.raiseRecoverable(q,"setter should have exactly one param")}else o.kind==="set"&&o.value.params[0].type==="RestElement"&&this.raiseRecoverable(o.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!o.computed&&o.key.type==="Identifier"?((m||y)&&this.unexpected(),this.checkUnreserved(o.key),o.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=g),o.kind="init",u?o.value=this.parseMaybeDefault(g,E,this.copyNode(o.key)):this.type===w.eq&&k?(k.shorthandAssign<0&&(k.shorthandAssign=this.start),o.value=this.parseMaybeDefault(g,E,this.copyNode(o.key))):o.value=this.copyNode(o.key),o.shorthand=!0):this.unexpected()},X.parsePropertyName=function(o){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return o.computed=!0,o.key=this.parseMaybeAssign(),this.expect(w.bracketR),o.key;o.computed=!1}return o.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},X.initFunction=function(o){o.id=null,this.options.ecmaVersion>=6&&(o.generator=o.expression=!1),this.options.ecmaVersion>=8&&(o.async=!1)},X.parseMethod=function(o,u,m){var y=this.startNode(),g=this.yieldPos,E=this.awaitPos,k=this.awaitIdentPos;return this.initFunction(y),this.options.ecmaVersion>=6&&(y.generator=o),this.options.ecmaVersion>=8&&(y.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_v(u,y.generator)|hv|(m?iy:0)),this.expect(w.parenL),y.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(y,!1,!0,!1),this.yieldPos=g,this.awaitPos=E,this.awaitIdentPos=k,this.finishNode(y,"FunctionExpression")},X.parseArrowExpression=function(o,u,m,y){var g=this.yieldPos,E=this.awaitPos,k=this.awaitIdentPos;return this.enterScope(_v(m,!1)|ey),this.initFunction(o),this.options.ecmaVersion>=8&&(o.async=!!m),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,o.params=this.toAssignableList(u,!0),this.parseFunctionBody(o,!0,!1,y),this.yieldPos=g,this.awaitPos=E,this.awaitIdentPos=k,this.finishNode(o,"ArrowFunctionExpression")},X.parseFunctionBody=function(o,u,m,y){var g=u&&this.type!==w.braceL,E=this.strict,k=!1;if(g)o.body=this.parseMaybeAssign(y),o.expression=!0,this.checkParams(o,!1);else{var M=this.options.ecmaVersion>=7&&!this.isSimpleParamList(o.params);(!E||M)&&(k=this.strictDirective(this.end),k&&M&&this.raiseRecoverable(o.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var R=this.labels;this.labels=[],k&&(this.strict=!0),this.checkParams(o,!E&&!k&&!u&&!m&&this.isSimpleParamList(o.params)),this.strict&&o.id&&this.checkLValSimple(o.id,sy),o.body=this.parseBlock(!1,void 0,k&&!E),o.expression=!1,this.adaptDirectivePrologue(o.body.body),this.labels=R}this.exitScope()},X.isSimpleParamList=function(o){for(var u=0,m=o;u<m.length;u+=1){var y=m[u];if(y.type!=="Identifier")return!1}return!0},X.checkParams=function(o,u){for(var m=Object.create(null),y=0,g=o.params;y<g.length;y+=1){var E=g[y];this.checkLValInnerPattern(E,vv,u?null:m)}},X.parseExprList=function(o,u,m,y){for(var g=[],E=!0;!this.eat(o);){if(E)E=!1;else if(this.expect(w.comma),u&&this.afterTrailingComma(o))break;var k=void 0;m&&this.type===w.comma?k=null:this.type===w.ellipsis?(k=this.parseSpread(y),y&&this.type===w.comma&&y.trailingComma<0&&(y.trailingComma=this.start)):k=this.parseMaybeAssign(!1,y),g.push(k)}return g},X.checkUnreserved=function(o){var u=o.start,m=o.end,y=o.name;if(this.inGenerator&&y==="yield"&&this.raiseRecoverable(u,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&y==="await"&&this.raiseRecoverable(u,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&y==="arguments"&&this.raiseRecoverable(u,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(y==="arguments"||y==="await")&&this.raise(u,"Cannot use "+y+" in class static initialization block"),this.keywords.test(y)&&this.raise(u,"Unexpected keyword '"+y+"'"),!(this.options.ecmaVersion<6&&this.input.slice(u,m).indexOf("\\")!==-1)){var g=this.strict?this.reservedWordsStrict:this.reservedWords;g.test(y)&&(!this.inAsync&&y==="await"&&this.raiseRecoverable(u,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(u,"The keyword '"+y+"' is reserved"))}},X.parseIdent=function(o,u){var m=this.startNode();return this.type===w.name?m.name=this.value:this.type.keyword?(m.name=this.type.keyword,(m.name==="class"||m.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!o),this.finishNode(m,"Identifier"),o||(this.checkUnreserved(m),m.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=m.start)),m},X.parsePrivateIdent=function(){var o=this.startNode();return this.type===w.privateId?o.name=this.value:this.unexpected(),this.next(),this.finishNode(o,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(o),o},X.parseYield=function(o){this.yieldPos||(this.yieldPos=this.start);var u=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(u.delegate=!1,u.argument=null):(u.delegate=this.eat(w.star),u.argument=this.parseMaybeAssign(o)),this.finishNode(u,"YieldExpression")},X.parseAwait=function(o){this.awaitPos||(this.awaitPos=this.start);var u=this.startNode();return this.next(),u.argument=this.parseMaybeUnary(null,!0,!1,o),this.finishNode(u,"AwaitExpression")};var Dp=Fe.prototype;Dp.raise=function(o,u){var m=Vt(this.input,o);u+=" ("+m.line+":"+m.column+")";var y=new SyntaxError(u);throw y.pos=o,y.loc=m,y.raisedAt=this.pos,y},Dp.raiseRecoverable=Dp.raise,Dp.curPosition=function(){if(this.options.locations)return new Me(this.curLine,this.pos-this.lineStart)};var Ki=Fe.prototype,w1=s(function(u){this.flags=u,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1},"Scope");Ki.enterScope=function(o){this.scopeStack.push(new w1(o))},Ki.exitScope=function(){this.scopeStack.pop()},Ki.treatFunctionsAsVarInScope=function(o){return o.flags&Ei||!this.inModule&&o.flags&zi},Ki.declareName=function(o,u,m){var y=!1;if(u===ki){var g=this.currentScope();y=g.lexical.indexOf(o)>-1||g.functions.indexOf(o)>-1||g.var.indexOf(o)>-1,g.lexical.push(o),this.inModule&&g.flags&zi&&delete this.undefinedExports[o]}else if(u===oy){var E=this.currentScope();E.lexical.push(o)}else if(u===ny){var k=this.currentScope();this.treatFunctionsAsVar?y=k.lexical.indexOf(o)>-1:y=k.lexical.indexOf(o)>-1||k.var.indexOf(o)>-1,k.functions.push(o)}else for(var M=this.scopeStack.length-1;M>=0;--M){var R=this.scopeStack[M];if(R.lexical.indexOf(o)>-1&&!(R.flags&ty&&R.lexical[0]===o)||!this.treatFunctionsAsVarInScope(R)&&R.functions.indexOf(o)>-1){y=!0;break}if(R.var.push(o),this.inModule&&R.flags&zi&&delete this.undefinedExports[o],R.flags&mv)break}y&&this.raiseRecoverable(m,"Identifier '"+o+"' has already been declared")},Ki.checkLocalExport=function(o){this.scopeStack[0].lexical.indexOf(o.name)===-1&&this.scopeStack[0].var.indexOf(o.name)===-1&&(this.undefinedExports[o.name]=o)},Ki.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Ki.currentVarScope=function(){for(var o=this.scopeStack.length-1;;o--){var u=this.scopeStack[o];if(u.flags&mv)return u}},Ki.currentThisScope=function(){for(var o=this.scopeStack.length-1;;o--){var u=this.scopeStack[o];if(u.flags&mv&&!(u.flags&ey))return u}};var As=s(function(u,m,y){this.type="",this.start=m,this.end=0,u.options.locations&&(this.loc=new He(u,y)),u.options.directSourceFile&&(this.sourceFile=u.options.directSourceFile),u.options.ranges&&(this.range=[m,0])},"Node"),Rs=Fe.prototype;Rs.startNode=function(){return new As(this,this.start,this.startLoc)},Rs.startNodeAt=function(o,u){return new As(this,o,u)};function uy(o,u,m,y){return o.type=u,o.end=m,this.options.locations&&(o.loc.end=y),this.options.ranges&&(o.range[1]=m),o}s(uy,"finishNodeAt"),Rs.finishNode=function(o,u){return uy.call(this,o,u,this.lastTokEnd,this.lastTokEndLoc)},Rs.finishNodeAt=function(o,u,m,y){return uy.call(this,o,u,m,y)},Rs.copyNode=function(o){var u=new As(this,o.start,this.startLoc);for(var m in o)u[m]=o[m];return u};var ly="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",cy=ly+" Extended_Pictographic",dy=cy,py=dy+" EBase EComp EMod EPres ExtPict",g1=py,x1={9:ly,10:cy,11:dy,12:py,13:g1},fy="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",hy="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",my=hy+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",_y=my+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",vy=_y+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",T1=vy+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",I1={9:hy,10:my,11:_y,12:vy,13:T1},yy={};function S1(o){var u=yy[o]={binary:Xe(x1[o]+" "+fy),nonBinary:{General_Category:Xe(fy),Script:Xe(I1[o])}};u.nonBinary.Script_Extensions=u.nonBinary.Script,u.nonBinary.gc=u.nonBinary.General_Category,u.nonBinary.sc=u.nonBinary.Script,u.nonBinary.scx=u.nonBinary.Script_Extensions}s(S1,"buildUnicodeData");for(var wv=0,by=[9,10,11,12,13];wv<by.length;wv+=1){var E1=by[wv];S1(E1)}var j=Fe.prototype,Ci=s(function(u){this.parser=u,this.validFlags="gim"+(u.options.ecmaVersion>=6?"uy":"")+(u.options.ecmaVersion>=9?"s":"")+(u.options.ecmaVersion>=13?"d":""),this.unicodeProperties=yy[u.options.ecmaVersion>=13?13:u.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]},"RegExpValidationState");Ci.prototype.reset=s(function(u,m,y){var g=y.indexOf("u")!==-1;this.start=u|0,this.source=m+"",this.flags=y,this.switchU=g&&this.parser.options.ecmaVersion>=6,this.switchN=g&&this.parser.options.ecmaVersion>=9},"reset"),Ci.prototype.raise=s(function(u){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+u)},"raise"),Ci.prototype.at=s(function(u,m){m===void 0&&(m=!1);var y=this.source,g=y.length;if(u>=g)return-1;var E=y.charCodeAt(u);if(!(m||this.switchU)||E<=55295||E>=57344||u+1>=g)return E;var k=y.charCodeAt(u+1);return k>=56320&&k<=57343?(E<<10)+k-56613888:E},"at"),Ci.prototype.nextIndex=s(function(u,m){m===void 0&&(m=!1);var y=this.source,g=y.length;if(u>=g)return g;var E=y.charCodeAt(u),k;return!(m||this.switchU)||E<=55295||E>=57344||u+1>=g||(k=y.charCodeAt(u+1))<56320||k>57343?u+1:u+2},"nextIndex"),Ci.prototype.current=s(function(u){return u===void 0&&(u=!1),this.at(this.pos,u)},"current"),Ci.prototype.lookahead=s(function(u){return u===void 0&&(u=!1),this.at(this.nextIndex(this.pos,u),u)},"lookahead"),Ci.prototype.advance=s(function(u){u===void 0&&(u=!1),this.pos=this.nextIndex(this.pos,u)},"advance"),Ci.prototype.eat=s(function(u,m){return m===void 0&&(m=!1),this.current(m)===u?(this.advance(m),!0):!1},"eat"),j.validateRegExpFlags=function(o){for(var u=o.validFlags,m=o.flags,y=0;y<m.length;y++){var g=m.charAt(y);u.indexOf(g)===-1&&this.raise(o.start,"Invalid regular expression flag"),m.indexOf(g,y+1)>-1&&this.raise(o.start,"Duplicate regular expression flag")}},j.validateRegExpPattern=function(o){this.regexp_pattern(o),!o.switchN&&this.options.ecmaVersion>=9&&o.groupNames.length>0&&(o.switchN=!0,this.regexp_pattern(o))},j.regexp_pattern=function(o){o.pos=0,o.lastIntValue=0,o.lastStringValue="",o.lastAssertionIsQuantifiable=!1,o.numCapturingParens=0,o.maxBackReference=0,o.groupNames.length=0,o.backReferenceNames.length=0,this.regexp_disjunction(o),o.pos!==o.source.length&&(o.eat(41)&&o.raise("Unmatched ')'"),(o.eat(93)||o.eat(125))&&o.raise("Lone quantifier brackets")),o.maxBackReference>o.numCapturingParens&&o.raise("Invalid escape");for(var u=0,m=o.backReferenceNames;u<m.length;u+=1){var y=m[u];o.groupNames.indexOf(y)===-1&&o.raise("Invalid named capture referenced")}},j.regexp_disjunction=function(o){for(this.regexp_alternative(o);o.eat(124);)this.regexp_alternative(o);this.regexp_eatQuantifier(o,!0)&&o.raise("Nothing to repeat"),o.eat(123)&&o.raise("Lone quantifier brackets")},j.regexp_alternative=function(o){for(;o.pos<o.source.length&&this.regexp_eatTerm(o););},j.regexp_eatTerm=function(o){return this.regexp_eatAssertion(o)?(o.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(o)&&o.switchU&&o.raise("Invalid quantifier"),!0):(o.switchU?this.regexp_eatAtom(o):this.regexp_eatExtendedAtom(o))?(this.regexp_eatQuantifier(o),!0):!1},j.regexp_eatAssertion=function(o){var u=o.pos;if(o.lastAssertionIsQuantifiable=!1,o.eat(94)||o.eat(36))return!0;if(o.eat(92)){if(o.eat(66)||o.eat(98))return!0;o.pos=u}if(o.eat(40)&&o.eat(63)){var m=!1;if(this.options.ecmaVersion>=9&&(m=o.eat(60)),o.eat(61)||o.eat(33))return this.regexp_disjunction(o),o.eat(41)||o.raise("Unterminated group"),o.lastAssertionIsQuantifiable=!m,!0}return o.pos=u,!1},j.regexp_eatQuantifier=function(o,u){return u===void 0&&(u=!1),this.regexp_eatQuantifierPrefix(o,u)?(o.eat(63),!0):!1},j.regexp_eatQuantifierPrefix=function(o,u){return o.eat(42)||o.eat(43)||o.eat(63)||this.regexp_eatBracedQuantifier(o,u)},j.regexp_eatBracedQuantifier=function(o,u){var m=o.pos;if(o.eat(123)){var y=0,g=-1;if(this.regexp_eatDecimalDigits(o)&&(y=o.lastIntValue,o.eat(44)&&this.regexp_eatDecimalDigits(o)&&(g=o.lastIntValue),o.eat(125)))return g!==-1&&g<y&&!u&&o.raise("numbers out of order in {} quantifier"),!0;o.switchU&&!u&&o.raise("Incomplete quantifier"),o.pos=m}return!1},j.regexp_eatAtom=function(o){return this.regexp_eatPatternCharacters(o)||o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)},j.regexp_eatReverseSolidusAtomEscape=function(o){var u=o.pos;if(o.eat(92)){if(this.regexp_eatAtomEscape(o))return!0;o.pos=u}return!1},j.regexp_eatUncapturingGroup=function(o){var u=o.pos;if(o.eat(40)){if(o.eat(63)&&o.eat(58)){if(this.regexp_disjunction(o),o.eat(41))return!0;o.raise("Unterminated group")}o.pos=u}return!1},j.regexp_eatCapturingGroup=function(o){if(o.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(o):o.current()===63&&o.raise("Invalid group"),this.regexp_disjunction(o),o.eat(41))return o.numCapturingParens+=1,!0;o.raise("Unterminated group")}return!1},j.regexp_eatExtendedAtom=function(o){return o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)||this.regexp_eatInvalidBracedQuantifier(o)||this.regexp_eatExtendedPatternCharacter(o)},j.regexp_eatInvalidBracedQuantifier=function(o){return this.regexp_eatBracedQuantifier(o,!0)&&o.raise("Nothing to repeat"),!1},j.regexp_eatSyntaxCharacter=function(o){var u=o.current();return wy(u)?(o.lastIntValue=u,o.advance(),!0):!1};function wy(o){return o===36||o>=40&&o<=43||o===46||o===63||o>=91&&o<=94||o>=123&&o<=125}s(wy,"isSyntaxCharacter"),j.regexp_eatPatternCharacters=function(o){for(var u=o.pos,m=0;(m=o.current())!==-1&&!wy(m);)o.advance();return o.pos!==u},j.regexp_eatExtendedPatternCharacter=function(o){var u=o.current();return u!==-1&&u!==36&&!(u>=40&&u<=43)&&u!==46&&u!==63&&u!==91&&u!==94&&u!==124?(o.advance(),!0):!1},j.regexp_groupSpecifier=function(o){if(o.eat(63)){if(this.regexp_eatGroupName(o)){o.groupNames.indexOf(o.lastStringValue)!==-1&&o.raise("Duplicate capture group name"),o.groupNames.push(o.lastStringValue);return}o.raise("Invalid group")}},j.regexp_eatGroupName=function(o){if(o.lastStringValue="",o.eat(60)){if(this.regexp_eatRegExpIdentifierName(o)&&o.eat(62))return!0;o.raise("Invalid capture group name")}return!1},j.regexp_eatRegExpIdentifierName=function(o){if(o.lastStringValue="",this.regexp_eatRegExpIdentifierStart(o)){for(o.lastStringValue+=Je(o.lastIntValue);this.regexp_eatRegExpIdentifierPart(o);)o.lastStringValue+=Je(o.lastIntValue);return!0}return!1},j.regexp_eatRegExpIdentifierStart=function(o){var u=o.pos,m=this.options.ecmaVersion>=11,y=o.current(m);return o.advance(m),y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,m)&&(y=o.lastIntValue),k1(y)?(o.lastIntValue=y,!0):(o.pos=u,!1)};function k1(o){return I(o,!0)||o===36||o===95}s(k1,"isRegExpIdentifierStart"),j.regexp_eatRegExpIdentifierPart=function(o){var u=o.pos,m=this.options.ecmaVersion>=11,y=o.current(m);return o.advance(m),y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,m)&&(y=o.lastIntValue),C1(y)?(o.lastIntValue=y,!0):(o.pos=u,!1)};function C1(o){return C(o,!0)||o===36||o===95||o===8204||o===8205}s(C1,"isRegExpIdentifierPart"),j.regexp_eatAtomEscape=function(o){return this.regexp_eatBackReference(o)||this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)||o.switchN&&this.regexp_eatKGroupName(o)?!0:(o.switchU&&(o.current()===99&&o.raise("Invalid unicode escape"),o.raise("Invalid escape")),!1)},j.regexp_eatBackReference=function(o){var u=o.pos;if(this.regexp_eatDecimalEscape(o)){var m=o.lastIntValue;if(o.switchU)return m>o.maxBackReference&&(o.maxBackReference=m),!0;if(m<=o.numCapturingParens)return!0;o.pos=u}return!1},j.regexp_eatKGroupName=function(o){if(o.eat(107)){if(this.regexp_eatGroupName(o))return o.backReferenceNames.push(o.lastStringValue),!0;o.raise("Invalid named reference")}return!1},j.regexp_eatCharacterEscape=function(o){return this.regexp_eatControlEscape(o)||this.regexp_eatCControlLetter(o)||this.regexp_eatZero(o)||this.regexp_eatHexEscapeSequence(o)||this.regexp_eatRegExpUnicodeEscapeSequence(o,!1)||!o.switchU&&this.regexp_eatLegacyOctalEscapeSequence(o)||this.regexp_eatIdentityEscape(o)},j.regexp_eatCControlLetter=function(o){var u=o.pos;if(o.eat(99)){if(this.regexp_eatControlLetter(o))return!0;o.pos=u}return!1},j.regexp_eatZero=function(o){return o.current()===48&&!Bp(o.lookahead())?(o.lastIntValue=0,o.advance(),!0):!1},j.regexp_eatControlEscape=function(o){var u=o.current();return u===116?(o.lastIntValue=9,o.advance(),!0):u===110?(o.lastIntValue=10,o.advance(),!0):u===118?(o.lastIntValue=11,o.advance(),!0):u===102?(o.lastIntValue=12,o.advance(),!0):u===114?(o.lastIntValue=13,o.advance(),!0):!1},j.regexp_eatControlLetter=function(o){var u=o.current();return gy(u)?(o.lastIntValue=u%32,o.advance(),!0):!1};function gy(o){return o>=65&&o<=90||o>=97&&o<=122}s(gy,"isControlLetter"),j.regexp_eatRegExpUnicodeEscapeSequence=function(o,u){u===void 0&&(u=!1);var m=o.pos,y=u||o.switchU;if(o.eat(117)){if(this.regexp_eatFixedHexDigits(o,4)){var g=o.lastIntValue;if(y&&g>=55296&&g<=56319){var E=o.pos;if(o.eat(92)&&o.eat(117)&&this.regexp_eatFixedHexDigits(o,4)){var k=o.lastIntValue;if(k>=56320&&k<=57343)return o.lastIntValue=(g-55296)*1024+(k-56320)+65536,!0}o.pos=E,o.lastIntValue=g}return!0}if(y&&o.eat(123)&&this.regexp_eatHexDigits(o)&&o.eat(125)&&P1(o.lastIntValue))return!0;y&&o.raise("Invalid unicode escape"),o.pos=m}return!1};function P1(o){return o>=0&&o<=1114111}s(P1,"isValidUnicode"),j.regexp_eatIdentityEscape=function(o){if(o.switchU)return this.regexp_eatSyntaxCharacter(o)?!0:o.eat(47)?(o.lastIntValue=47,!0):!1;var u=o.current();return u!==99&&(!o.switchN||u!==107)?(o.lastIntValue=u,o.advance(),!0):!1},j.regexp_eatDecimalEscape=function(o){o.lastIntValue=0;var u=o.current();if(u>=49&&u<=57){do o.lastIntValue=10*o.lastIntValue+(u-48),o.advance();while((u=o.current())>=48&&u<=57);return!0}return!1},j.regexp_eatCharacterClassEscape=function(o){var u=o.current();if(N1(u))return o.lastIntValue=-1,o.advance(),!0;if(o.switchU&&this.options.ecmaVersion>=9&&(u===80||u===112)){if(o.lastIntValue=-1,o.advance(),o.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(o)&&o.eat(125))return!0;o.raise("Invalid property name")}return!1};function N1(o){return o===100||o===68||o===115||o===83||o===119||o===87}s(N1,"isCharacterClassEscape"),j.regexp_eatUnicodePropertyValueExpression=function(o){var u=o.pos;if(this.regexp_eatUnicodePropertyName(o)&&o.eat(61)){var m=o.lastStringValue;if(this.regexp_eatUnicodePropertyValue(o)){var y=o.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(o,m,y),!0}}if(o.pos=u,this.regexp_eatLoneUnicodePropertyNameOrValue(o)){var g=o.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(o,g),!0}return!1},j.regexp_validateUnicodePropertyNameAndValue=function(o,u,m){rt(o.unicodeProperties.nonBinary,u)||o.raise("Invalid property name"),o.unicodeProperties.nonBinary[u].test(m)||o.raise("Invalid property value")},j.regexp_validateUnicodePropertyNameOrValue=function(o,u){o.unicodeProperties.binary.test(u)||o.raise("Invalid property name")},j.regexp_eatUnicodePropertyName=function(o){var u=0;for(o.lastStringValue="";xy(u=o.current());)o.lastStringValue+=Je(u),o.advance();return o.lastStringValue!==""};function xy(o){return gy(o)||o===95}s(xy,"isUnicodePropertyNameCharacter"),j.regexp_eatUnicodePropertyValue=function(o){var u=0;for(o.lastStringValue="";M1(u=o.current());)o.lastStringValue+=Je(u),o.advance();return o.lastStringValue!==""};function M1(o){return xy(o)||Bp(o)}s(M1,"isUnicodePropertyValueCharacter"),j.regexp_eatLoneUnicodePropertyNameOrValue=function(o){return this.regexp_eatUnicodePropertyValue(o)},j.regexp_eatCharacterClass=function(o){if(o.eat(91)){if(o.eat(94),this.regexp_classRanges(o),o.eat(93))return!0;o.raise("Unterminated character class")}return!1},j.regexp_classRanges=function(o){for(;this.regexp_eatClassAtom(o);){var u=o.lastIntValue;if(o.eat(45)&&this.regexp_eatClassAtom(o)){var m=o.lastIntValue;o.switchU&&(u===-1||m===-1)&&o.raise("Invalid character class"),u!==-1&&m!==-1&&u>m&&o.raise("Range out of order in character class")}}},j.regexp_eatClassAtom=function(o){var u=o.pos;if(o.eat(92)){if(this.regexp_eatClassEscape(o))return!0;if(o.switchU){var m=o.current();(m===99||Sy(m))&&o.raise("Invalid class escape"),o.raise("Invalid escape")}o.pos=u}var y=o.current();return y!==93?(o.lastIntValue=y,o.advance(),!0):!1},j.regexp_eatClassEscape=function(o){var u=o.pos;if(o.eat(98))return o.lastIntValue=8,!0;if(o.switchU&&o.eat(45))return o.lastIntValue=45,!0;if(!o.switchU&&o.eat(99)){if(this.regexp_eatClassControlLetter(o))return!0;o.pos=u}return this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)},j.regexp_eatClassControlLetter=function(o){var u=o.current();return Bp(u)||u===95?(o.lastIntValue=u%32,o.advance(),!0):!1},j.regexp_eatHexEscapeSequence=function(o){var u=o.pos;if(o.eat(120)){if(this.regexp_eatFixedHexDigits(o,2))return!0;o.switchU&&o.raise("Invalid escape"),o.pos=u}return!1},j.regexp_eatDecimalDigits=function(o){var u=o.pos,m=0;for(o.lastIntValue=0;Bp(m=o.current());)o.lastIntValue=10*o.lastIntValue+(m-48),o.advance();return o.pos!==u};function Bp(o){return o>=48&&o<=57}s(Bp,"isDecimalDigit"),j.regexp_eatHexDigits=function(o){var u=o.pos,m=0;for(o.lastIntValue=0;Ty(m=o.current());)o.lastIntValue=16*o.lastIntValue+Iy(m),o.advance();return o.pos!==u};function Ty(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102}s(Ty,"isHexDigit");function Iy(o){return o>=65&&o<=70?10+(o-65):o>=97&&o<=102?10+(o-97):o-48}s(Iy,"hexToInt"),j.regexp_eatLegacyOctalEscapeSequence=function(o){if(this.regexp_eatOctalDigit(o)){var u=o.lastIntValue;if(this.regexp_eatOctalDigit(o)){var m=o.lastIntValue;u<=3&&this.regexp_eatOctalDigit(o)?o.lastIntValue=u*64+m*8+o.lastIntValue:o.lastIntValue=u*8+m}else o.lastIntValue=u;return!0}return!1},j.regexp_eatOctalDigit=function(o){var u=o.current();return Sy(u)?(o.lastIntValue=u-48,o.advance(),!0):(o.lastIntValue=0,!1)};function Sy(o){return o>=48&&o<=55}s(Sy,"isOctalDigit"),j.regexp_eatFixedHexDigits=function(o,u){var m=o.pos;o.lastIntValue=0;for(var y=0;y<u;++y){var g=o.current();if(!Ty(g))return o.pos=m,!1;o.lastIntValue=16*o.lastIntValue+Iy(g),o.advance()}return!0};var jp=s(function(u){this.type=u.type,this.value=u.value,this.start=u.start,this.end=u.end,u.options.locations&&(this.loc=new He(u,u.startLoc,u.endLoc)),u.options.ranges&&(this.range=[u.start,u.end])},"Token"),ae=Fe.prototype;ae.next=function(o){!o&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new jp(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ae.getToken=function(){return this.next(),new jp(this)},typeof Symbol<"u"&&(ae[Symbol.iterator]=function(){var o=this;return{next:function(){var u=o.getToken();return{done:u.type===w.eof,value:u}}}}),ae.nextToken=function(){var o=this.curContext();if((!o||!o.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(w.eof);if(o.override)return o.override(this);this.readToken(this.fullCharCodeAtPos())},ae.readToken=function(o){return I(o,this.options.ecmaVersion>=6)||o===92?this.readWord():this.getTokenFromCode(o)},ae.fullCharCodeAtPos=function(){var o=this.input.charCodeAt(this.pos);if(o<=55295||o>=56320)return o;var u=this.input.charCodeAt(this.pos+1);return u<=56319||u>=57344?o:(o<<10)+u-56613888},ae.skipBlockComment=function(){var o=this.options.onComment&&this.curPosition(),u=this.pos,m=this.input.indexOf("*/",this.pos+=2);if(m===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=m+2,this.options.locations)for(var y=void 0,g=u;(y=tt(this.input,g,this.pos))>-1;)++this.curLine,g=this.lineStart=y;this.options.onComment&&this.options.onComment(!0,this.input.slice(u+2,m),u,this.pos,o,this.curPosition())},ae.skipLineComment=function(o){for(var u=this.pos,m=this.options.onComment&&this.curPosition(),y=this.input.charCodeAt(this.pos+=o);this.pos<this.input.length&&!Ee(y);)y=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(u+o,this.pos),u,this.pos,m,this.curPosition())},ae.skipSpace=function(){e:for(;this.pos<this.input.length;){var o=this.input.charCodeAt(this.pos);switch(o){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(o>8&&o<14||o>=5760&&$.test(String.fromCharCode(o)))++this.pos;else break e}}},ae.finishToken=function(o,u){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var m=this.type;this.type=o,this.value=u,this.updateContext(m)},ae.readToken_dot=function(){var o=this.input.charCodeAt(this.pos+1);if(o>=48&&o<=57)return this.readNumber(!0);var u=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&o===46&&u===46?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},ae.readToken_slash=function(){var o=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):o===61?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},ae.readToken_mult_modulo_exp=function(o){var u=this.input.charCodeAt(this.pos+1),m=1,y=o===42?w.star:w.modulo;return this.options.ecmaVersion>=7&&o===42&&u===42&&(++m,y=w.starstar,u=this.input.charCodeAt(this.pos+2)),u===61?this.finishOp(w.assign,m+1):this.finishOp(y,m)},ae.readToken_pipe_amp=function(o){var u=this.input.charCodeAt(this.pos+1);if(u===o){if(this.options.ecmaVersion>=12){var m=this.input.charCodeAt(this.pos+2);if(m===61)return this.finishOp(w.assign,3)}return this.finishOp(o===124?w.logicalOR:w.logicalAND,2)}return u===61?this.finishOp(w.assign,2):this.finishOp(o===124?w.bitwiseOR:w.bitwiseAND,1)},ae.readToken_caret=function(){var o=this.input.charCodeAt(this.pos+1);return o===61?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},ae.readToken_plus_min=function(o){var u=this.input.charCodeAt(this.pos+1);return u===o?u===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ve.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(w.incDec,2):u===61?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},ae.readToken_lt_gt=function(o){var u=this.input.charCodeAt(this.pos+1),m=1;return u===o?(m=o===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+m)===61?this.finishOp(w.assign,m+1):this.finishOp(w.bitShift,m)):u===33&&o===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(u===61&&(m=2),this.finishOp(w.relational,m))},ae.readToken_eq_excl=function(o){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(w.equality,this.input.charCodeAt(this.pos+2)===61?3:2):o===61&&u===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(o===61?w.eq:w.prefix,1)},ae.readToken_question=function(){var o=this.options.ecmaVersion;if(o>=11){var u=this.input.charCodeAt(this.pos+1);if(u===46){var m=this.input.charCodeAt(this.pos+2);if(m<48||m>57)return this.finishOp(w.questionDot,2)}if(u===63){if(o>=12){var y=this.input.charCodeAt(this.pos+2);if(y===61)return this.finishOp(w.assign,3)}return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},ae.readToken_numberSign=function(){var o=this.options.ecmaVersion,u=35;if(o>=13&&(++this.pos,u=this.fullCharCodeAtPos(),I(u,!0)||u===92))return this.finishToken(w.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Je(u)+"'")},ae.getTokenFromCode=function(o){switch(o){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var u=this.input.charCodeAt(this.pos+1);if(u===120||u===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(u===111||u===79)return this.readRadixNumber(8);if(u===98||u===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(o);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(o);case 124:case 38:return this.readToken_pipe_amp(o);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(o);case 60:case 62:return this.readToken_lt_gt(o);case 61:case 33:return this.readToken_eq_excl(o);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Je(o)+"'")},ae.finishOp=function(o,u){var m=this.input.slice(this.pos,this.pos+u);return this.pos+=u,this.finishToken(o,m)},ae.readRegexp=function(){for(var o,u,m=this.pos;;){this.pos>=this.input.length&&this.raise(m,"Unterminated regular expression");var y=this.input.charAt(this.pos);if(ve.test(y)&&this.raise(m,"Unterminated regular expression"),o)o=!1;else{if(y==="[")u=!0;else if(y==="]"&&u)u=!1;else if(y==="/"&&!u)break;o=y==="\\"}++this.pos}var g=this.input.slice(m,this.pos);++this.pos;var E=this.pos,k=this.readWord1();this.containsEsc&&this.unexpected(E);var M=this.regexpState||(this.regexpState=new Ci(this));M.reset(m,g,k),this.validateRegExpFlags(M),this.validateRegExpPattern(M);var R=null;try{R=new RegExp(g,k)}catch(q){}return this.finishToken(w.regexp,{pattern:g,flags:k,value:R})},ae.readInt=function(o,u,m){for(var y=this.options.ecmaVersion>=12&&u===void 0,g=m&&this.input.charCodeAt(this.pos)===48,E=this.pos,k=0,M=0,R=0,q=u==null?1/0:u;R<q;++R,++this.pos){var oe=this.input.charCodeAt(this.pos),at=void 0;if(y&&oe===95){g&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),M===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),R===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),M=oe;continue}if(oe>=97?at=oe-97+10:oe>=65?at=oe-65+10:oe>=48&&oe<=57?at=oe-48:at=1/0,at>=o)break;M=oe,k=k*o+at}return y&&M===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===E||u!=null&&this.pos-E!==u?null:k};function V1(o,u){return u?parseInt(o,8):parseFloat(o.replace(/_/g,""))}s(V1,"stringToNumber");function Ey(o){return typeof BigInt!="function"?null:BigInt(o.replace(/_/g,""))}s(Ey,"stringToBigInt"),ae.readRadixNumber=function(o){var u=this.pos;this.pos+=2;var m=this.readInt(o);return m==null&&this.raise(this.start+2,"Expected number in radix "+o),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(m=Ey(this.input.slice(u,this.pos)),++this.pos):I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,m)},ae.readNumber=function(o){var u=this.pos;!o&&this.readInt(10,void 0,!0)===null&&this.raise(u,"Invalid number");var m=this.pos-u>=2&&this.input.charCodeAt(u)===48;m&&this.strict&&this.raise(u,"Invalid number");var y=this.input.charCodeAt(this.pos);if(!m&&!o&&this.options.ecmaVersion>=11&&y===110){var g=Ey(this.input.slice(u,this.pos));return++this.pos,I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,g)}m&&/[89]/.test(this.input.slice(u,this.pos))&&(m=!1),y===46&&!m&&(++this.pos,this.readInt(10),y=this.input.charCodeAt(this.pos)),(y===69||y===101)&&!m&&(y=this.input.charCodeAt(++this.pos),(y===43||y===45)&&++this.pos,this.readInt(10)===null&&this.raise(u,"Invalid number")),I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var E=V1(this.input.slice(u,this.pos),m);return this.finishToken(w.num,E)},ae.readCodePoint=function(){var o=this.input.charCodeAt(this.pos),u;if(o===123){this.options.ecmaVersion<6&&this.unexpected();var m=++this.pos;u=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,u>1114111&&this.invalidStringToken(m,"Code point out of bounds")}else u=this.readHexChar(4);return u},ae.readString=function(o){for(var u="",m=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var y=this.input.charCodeAt(this.pos);if(y===o)break;y===92?(u+=this.input.slice(m,this.pos),u+=this.readEscapedChar(!1),m=this.pos):y===8232||y===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ee(y)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return u+=this.input.slice(m,this.pos++),this.finishToken(w.string,u)};var ky={};ae.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(o){if(o===ky)this.readInvalidTemplateToken();else throw o}this.inTemplateElement=!1},ae.invalidStringToken=function(o,u){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ky;this.raise(o,u)},ae.readTmplToken=function(){for(var o="",u=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var m=this.input.charCodeAt(this.pos);if(m===96||m===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===w.template||this.type===w.invalidTemplate)?m===36?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote)):(o+=this.input.slice(u,this.pos),this.finishToken(w.template,o));if(m===92)o+=this.input.slice(u,this.pos),o+=this.readEscapedChar(!0),u=this.pos;else if(Ee(m)){switch(o+=this.input.slice(u,this.pos),++this.pos,m){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:o+=`
`;break;default:o+=String.fromCharCode(m);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),u=this.pos}else++this.pos}},ae.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ae.readEscapedChar=function(o){var u=this.input.charCodeAt(++this.pos);switch(++this.pos,u){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Je(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),o){var m=this.pos-1;return this.invalidStringToken(m,"Invalid escape sequence in template string"),null}default:if(u>=48&&u<=55){var y=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],g=parseInt(y,8);return g>255&&(y=y.slice(0,-1),g=parseInt(y,8)),this.pos+=y.length-1,u=this.input.charCodeAt(this.pos),(y!=="0"||u===56||u===57)&&(this.strict||o)&&this.invalidStringToken(this.pos-1-y.length,o?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(g)}return Ee(u)?"":String.fromCharCode(u)}},ae.readHexChar=function(o){var u=this.pos,m=this.readInt(16,o);return m===null&&this.invalidStringToken(u,"Bad character escape sequence"),m},ae.readWord1=function(){this.containsEsc=!1;for(var o="",u=!0,m=this.pos,y=this.options.ecmaVersion>=6;this.pos<this.input.length;){var g=this.fullCharCodeAtPos();if(C(g,y))this.pos+=g<=65535?1:2;else if(g===92){this.containsEsc=!0,o+=this.input.slice(m,this.pos);var E=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var k=this.readCodePoint();(u?I:C)(k,y)||this.invalidStringToken(E,"Invalid Unicode escape"),o+=Je(k),m=this.pos}else break;u=!1}return o+this.input.slice(m,this.pos)},ae.readWord=function(){var o=this.readWord1(),u=w.name;return this.keywords.test(o)&&(u=K[o]),this.finishToken(u,o)};var Cy="8.8.1";Fe.acorn={Parser:Fe,version:Cy,defaultOptions:At,Position:Me,SourceLocation:He,getLineInfo:Vt,Node:As,TokenType:N,tokTypes:w,keywordTypes:K,TokContext:Rt,tokContexts:ke,isIdentifierChar:C,isIdentifierStart:I,Token:jp,isNewLine:Ee,lineBreak:ve,lineBreakG:Ge,nonASCIIwhitespace:$};function A1(o,u){return Fe.parse(o,u)}s(A1,"parse");function R1(o,u,m){return Fe.parseExpressionAt(o,u,m)}s(R1,"parseExpressionAt");function F1(o,u){return Fe.tokenizer(o,u)}s(F1,"tokenizer"),n.Node=As,n.Parser=Fe,n.Position=Me,n.SourceLocation=He,n.TokContext=Rt,n.Token=jp,n.TokenType=N,n.defaultOptions=At,n.getLineInfo=Vt,n.isIdentifierChar=C,n.isIdentifierStart=I,n.isNewLine=Ee,n.keywordTypes=K,n.lineBreak=ve,n.lineBreakG=Ge,n.nonASCIIwhitespace=$,n.parse=A1,n.parseExpressionAt=R1,n.tokContexts=ke,n.tokTypes=w,n.tokenizer=F1,n.version=Cy,Object.defineProperty(n,"__esModule",{value:!0})})});var wb=Q(Mi=>{"use strict";var DI=Mi&&Mi.__classPrivateFieldSet||function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},BI=Mi&&Mi.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},jI=Mi&&Mi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},Pf;Object.defineProperty(Mi,"__esModule",{value:!0});var YI=jI(vb()),UI=bb(),Nf=class{constructor(e){Pf.set(this,void 0);let t=(0,UI.parse)(e,{ecmaVersion:2020});DI(this,Pf,t.body,"f"),this.visitor=new YI.default(BI(this,Pf,"f")),this.scope=this.visitor.scope,this.scope.set("print",i=>console.log(...i)),this.visitor.on("console",(i,r)=>{if(i.type==="Identifier")return console;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=console[a];return h?h(...l):"proceed"}return"proceed"}),this.visitor.on("Math",(i,r)=>{if(i.type==="Identifier")return Math;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=Math[a];return h?h(...l):"proceed"}return"proceed"}),this.visitor.on("String",(i,r)=>{if(i.type==="Identifier")return String;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=String[a];return h?h(l):"proceed"}return"proceed"}),this.visitor.on("Date",i=>{if(i.type==="Identifier")return Date})}interpret(){return this.visitor.run()}};s(Nf,"Jinter");Mi.default=Nf;Pf=new WeakMap});var xb=Q(kn=>{"use strict";var WI=kn&&kn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kn,"__esModule",{value:!0});kn.Jinter=void 0;var gb=WI(wb());kn.Jinter=gb.default;kn.default=gb.default});var Pb=Q(()=>{var xo=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis;function Cb(n){try{new n}catch(e){return!1}return!0}s(Cb,"isConstructor");(typeof xo.Event!="function"||!Cb(xo.Event))&&(xo.Event=function(){function n(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}return s(n,"Event"),n}());(typeof xo.EventTarget>"u"||!Cb(xo.Event))&&(xo.EventTarget=function(){function n(){this.__listeners=new Map}return s(n,"EventTarget"),n.prototype=Object.create(Object.prototype),n.prototype.addEventListener=function(e,t,i){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);let r=this.__listeners,a=e.toString();r.has(a)||r.set(a,new Map);let l=r.get(a);l.has(t)||l.set(t,i)},n.prototype.removeEventListener=function(e,t,i){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);let r=this.__listeners,a=e.toString();if(r.has(a)){let l=r.get(a);l.has(t)&&l.delete(t)}},n.prototype.dispatchEvent=function(e){if(!(e instanceof Event))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");let t=e.type,r=this.__listeners.get(t);if(r)for(let[a,l]of r.entries()){try{typeof a=="function"?a.call(this,e):a&&typeof a.handleEvent=="function"&&a.handleEvent(e)}catch(h){setTimeout(()=>{throw h})}l&&l.once&&r.delete(a)}return!0},n}())});var Ev={};Os(Ev,{ChannelError:()=>wo,InnertubeError:()=>x,MissingParamError:()=>Sn,OAuthError:()=>oi,ParsingError:()=>Tt,Platform:()=>Y,PlayerError:()=>It,SessionError:()=>bo,concatMemos:()=>Iv,debugFetch:()=>z1,deepCompare:()=>Wp,escapeStringRegexp:()=>xv,generateRandomString:()=>Wt,generateSidAuth:()=>Tv,getRandomUserAgent:()=>qi,getStringBetweenStrings:()=>Ft,hasKeys:()=>H1,streamToIterable:()=>Sv,throwIfMissing:()=>pe,timeToSeconds:()=>ut,u8ToBase64:()=>Ot});var H=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Py=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},gv,Ny,ze,xe,ni,Pi,Tn,My=Symbol("ObservedArray.isObserved"),c=class{constructor(){gv.add(this),this.type=this.constructor.type}is(...e){return e.some(t=>H(this,gv,"m",Ny).call(this,t))}as(...e){if(!this.is(...e))throw new Tt(`Cannot cast ${this.type} to one of ${e.map(t=>t.type).join(", ")}`);return this}hasKey(e){return Reflect.has(this,e)}key(e){if(!this.hasKey(e))throw new Tt(`Missing key ${e}`);return new vo(this[e])}};s(c,"YTNode");gv=new WeakSet,Ny=s(function(e){return this.type===e.type},"_YTNode_is");c.type="YTNode";var vo=class{constructor(e){ze.add(this),xe.set(this,void 0),Py(this,xe,e,"f")}get typeof(){return typeof H(this,xe,"f")}string(){return H(this,ze,"m",Pi).call(this,"string")}isString(){return H(this,ze,"m",ni).call(this,"string")}number(){return H(this,ze,"m",Pi).call(this,"number")}isNumber(){return H(this,ze,"m",ni).call(this,"number")}bigint(){return H(this,ze,"m",Pi).call(this,"bigint")}isBigint(){return H(this,ze,"m",ni).call(this,"bigint")}boolean(){return H(this,ze,"m",Pi).call(this,"boolean")}isBoolean(){return H(this,ze,"m",ni).call(this,"boolean")}symbol(){return H(this,ze,"m",Pi).call(this,"symbol")}isSymbol(){return H(this,ze,"m",ni).call(this,"symbol")}undefined(){return H(this,ze,"m",Pi).call(this,"undefined")}isUndefined(){return H(this,ze,"m",ni).call(this,"undefined")}null(){if(H(this,xe,"f")!==null)throw new TypeError(`Expected null, got ${typeof H(this,xe,"f")}`);return H(this,xe,"f")}isNull(){return H(this,xe,"f")===null}object(){return H(this,ze,"m",Pi).call(this,"object")}isObject(){return H(this,ze,"m",ni).call(this,"object")}function(){return H(this,ze,"m",Pi).call(this,"function")}isFunction(){return H(this,ze,"m",ni).call(this,"function")}array(){if(!Array.isArray(H(this,xe,"f")))throw new TypeError(`Expected array, got ${typeof H(this,xe,"f")}`);return H(this,xe,"f")}arrayOfMaybe(){let e=[];return new Proxy(this.array(),{get(t,i){return Reflect.has(e,i)?Reflect.get(t,i):new vo(Reflect.get(t,i))}})}isArray(){return Array.isArray(H(this,xe,"f"))}node(){if(!(H(this,xe,"f")instanceof c))throw new TypeError(`Expected YTNode, got ${H(this,xe,"f").constructor.name}`);return H(this,xe,"f")}isNode(){return H(this,xe,"f")instanceof c}nodeOfType(...e){return this.node().as(...e)}isNodeOfType(...e){return this.isNode()&&this.node().is(...e)}observed(){if(!this.isObserved())throw new TypeError(`Expected ObservedArray, got ${typeof H(this,xe,"f")}`);return H(this,xe,"f")}isObserved(){var e;return(e=H(this,xe,"f"))===null||e===void 0?void 0:e[My]}parsed(){if(!(H(this,xe,"f")instanceof Ni))throw new TypeError(`Expected SuperParsedResult, got ${typeof H(this,xe,"f")}`);return H(this,xe,"f")}isParsed(){return H(this,xe,"f")instanceof Ni}any(){return console.warn("This call is not meant to be used outside of debugging. Please use the specific type getter instead."),H(this,xe,"f")}instanceof(e){if(!this.isInstanceof(e))throw new TypeError(`Expected instance of ${e.name}, got ${H(this,xe,"f").constructor.name}`);return H(this,xe,"f")}isInstanceof(e){return H(this,xe,"f")instanceof e}};s(vo,"Maybe");xe=new WeakMap,ze=new WeakSet,ni=s(function(e){return typeof H(this,xe,"f")===e},"_Maybe_checkPrimative"),Pi=s(function(e){if(!H(this,ze,"m",ni).call(this,e))throw new TypeError(`Expected ${e}, got ${this.typeof}`);return H(this,xe,"f")},"_Maybe_assertPrimative");var Ni=class{constructor(e){Tn.set(this,void 0),Py(this,Tn,e,"f")}get is_null(){return H(this,Tn,"f")===null}get is_array(){return!this.is_null&&Array.isArray(H(this,Tn,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return H(this,Tn,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return H(this,Tn,"f")}};s(Ni,"SuperParsedResult");Tn=new WeakMap;function de(n){return new Proxy(n,{get(e,t){return t=="get"?(i,r)=>e.find((a,l)=>{let h=Wp(i,a);return h&&r&&e.splice(l,1),h}):t==My?!0:t=="getAll"?(i,r)=>e.filter((a,l)=>{let h=Wp(i,a);return h&&r&&e.splice(l,1),h}):t=="matchCondition"?i=>e.find(r=>i(r)):t=="filterType"?(...i)=>de(e.filter(r=>!!r.is(...i))):t=="firstOfType"?(...i)=>e.find(r=>!!r.is(...i)):t=="first"?()=>e[0]:t=="as"?(...i)=>de(e.map(r=>{if(r.is(...i))return r;throw new Tt(`Expected node of any type ${i.map(a=>a.type).join(", ")}, got ${r.type}`)})):t=="remove"?i=>e.splice(i,1):Reflect.get(e,t)}})}s(de,"observe");var In=class extends Map{getType(e){return Array.isArray(e)?de(e.flatMap(t=>this.get(t.type)||[])):de(this.get(e.type)||[])}};s(In,"Memo");var Vy={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};var W1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},G1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ay=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},yo=function(n){return this instanceof yo?(this.v=n,this):new yo(n)},J1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r;function l(I){i[I]&&(r[I]=function(C){return new Promise(function(N,L){a.push([I,C,N,L])>1||h(I,C)})})}function h(I,C){try{v(i[I](C))}catch(N){b(a[0][3],N)}}function v(I){I.value instanceof yo?Promise.resolve(I.value.v).then(_,p):b(a[0][2],I)}function _(I){h("next",I)}function p(I){h("throw",I)}function b(I,C){I(C),a.shift(),a.length&&h(a[0][0],a[0][1])}},Gp,Jp,Y=class{static load(e){G1(Y,Gp,e,"f",Jp)}static get shim(){if(!Ay(Y,Gp,"f",Jp))throw new Error("Platform is not loaded");return Ay(Y,Gp,"f",Jp)}};s(Y,"Platform");Gp=Y;Jp={value:void 0};var x=class extends Error{constructor(e,t){super(e),t&&(this.info=t),this.date=new Date,this.version=Y.shim.info.version}};s(x,"InnertubeError");var Tt=class extends x{};s(Tt,"ParsingError");var Sn=class extends x{};s(Sn,"MissingParamError");var oi=class extends x{};s(oi,"OAuthError");var It=class extends Error{};s(It,"PlayerError");var bo=class extends Error{};s(bo,"SessionError");var wo=class extends Error{};s(wo,"ChannelError");function Wp(n,e){return Reflect.ownKeys(n).some(i=>{var r;let a=((r=e[i])===null||r===void 0?void 0:r.constructor.name)==="Text";return!a&&typeof e[i]=="object"?JSON.stringify(n[i])===JSON.stringify(e[i]):n[i]===(a?e[i].toString():e[i])})}s(Wp,"deepCompare");function Ft(n,e,t){let i=new RegExp(`${xv(e)}(.*?)${xv(t)}`,"s"),r=n.match(i);return r?r[1]:void 0}s(Ft,"getStringBetweenStrings");function xv(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}s(xv,"escapeStringRegexp");function qi(n){let e=Vy[n],t=Math.floor(Math.random()*e.length);return e[t]}s(qi,"getRandomUserAgent");function Tv(n){return W1(this,void 0,void 0,function*(){let e="https://www.youtube.com",t=Math.floor(new Date().getTime()/1e3),i=[t,n,e].join(" "),r=yield Y.shim.sha1Hash(i);return["SAPISIDHASH",[t,r].join("_")].join(" ")})}s(Tv,"generateSidAuth");function Wt(n){let e=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}s(Wt,"generateRandomString");function ut(n){let e=n.split(":").map(t=>parseInt(t));switch(e.length){case 1:return e[0];case 2:return e[0]*60+e[1];case 3:return e[0]*3600+e[1]*60+e[2];default:throw new Error("Invalid time string")}}s(ut,"timeToSeconds");function Iv(...n){let e=new In;for(let t of n)if(!!t)for(let i of t)e.set(...i);return e}s(Iv,"concatMemos");function pe(n){for(let[e,t]of Object.entries(n))if(!t)throw new Sn(`${e} is missing`)}s(pe,"throwIfMissing");function H1(n,...e){for(let t of e)if(!Reflect.has(n,t)||n[t]===void 0)return!1;return!0}s(H1,"hasKeys");function Sv(n){return J1(this,arguments,s(function*(){let t=n.getReader();try{for(;;){let{done:i,value:r}=yield yo(t.read());if(i)return yield yo(void 0);yield yield yo(r)}}finally{t.releaseLock()}},"streamToIterable_1"))}s(Sv,"streamToIterable");var z1=s((n,e)=>{let t=typeof n=="string"?new URL(n):n instanceof URL?n:new URL(n.url),i=e!=null&&e.headers?new Headers(e.headers):n instanceof Request?n.headers:new Headers,r=[...i],a=e!=null&&e.body?typeof e.body=="string"?i.get("content-type")==="application/json"?JSON.stringify(JSON.parse(e.body),null,2):e.body:"    <binary>":"    (none)",l=r.length>0?`${r.map(([h,v])=>`    ${h}: ${v}`).join(`
`)}`:"    (none)";return console.log(`YouTube.js Fetch:
  url: ${t.toString()}
  method: ${(e==null?void 0:e.method)||"GET"}
  headers:
${l}
' + 
    '  body:
${a}`),Y.shim.fetch(n,e)},"debugFetch");function Ot(n){return btoa(String.fromCharCode.apply(null,Array.from(n)))}s(Ot,"u8ToBase64");var K1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})};function kv(n){return K1(this,void 0,void 0,function*(){let e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function t(i){let r=new Uint8Array(i),a=[];for(let l=0;l<r.length;++l)a.push(e[r[l]]);return a.join("")}return s(t,"hex"),t(yield crypto.subtle.digest("SHA-1",new TextEncoder().encode(n)))})}s(kv,"sha1Hash");var Hp={name:"volumio-youtubei.js",version:"0.2.0-a.1",description:"Modified version of YouTube.js library for use with Volumio's YouTube Music plugin.",type:"module",types:"./dist/src/platform/lib.d.ts",typesVersions:{"*":{agnostic:["./dist/src/platform/lib.d.ts"],web:["./dist/src/platform/lib.d.ts"],"web.bundle":["./dist/src/platform/lib.d.ts"],"web.bundle.min":["./dist/src/platform/lib.d.ts"]}},exports:{".":{node:{import:"./dist/src/platform/node.js",require:"./bundle/node.cjs"},deno:"./dist/src/platform/deno.js",types:"./dist/src/platform/lib.d.ts",browser:"./dist/src/platform/web.js",default:"./dist/src/platform/web.js"},"./agnostic":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/lib.js"},"./web":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/web.js"},"./web.bundle":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.js"},"./web.bundle.min":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.min.js"}},author:"Original author: LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT). Modified by Patrick Kan (https://github.com/patrickkfkan).",funding:["https://github.com/sponsors/LuanRT"],contributors:["Wykerd (https://github.com/wykerd/)","MasterOfBob777 (https://github.com/MasterOfBob777)","patrickkfkan (https://github.com/patrickkfkan)","akkadaska (https://github.com/akkadaska)"],directories:{test:"./test",examples:"./examples",dist:"./dist"},scripts:{test:"npx jest --verbose",lint:"npx eslint ./src","lint:fix":"npx eslint --fix ./src",build:"npm run build:parser-map && npm run build:proto && npm run build:esm && npm run bundle:node && npm run bundle:browser && npm run bundle:browser:prod","build:parser-map":"node ./scripts/build-parser-map.cjs","build:proto":'npx pb-gen-ts --entry-path="src/proto" --out-dir="src/proto/generated" --ext-in-import=".js"',"build:esm":"npx tsc","build:deno":`npx cpy ./src ./deno && npx cpy ./package.json ./deno && npx replace ".js';" ".ts';" ./deno -r && npx replace '.js";' '.ts";' ./deno -r && npx replace "'linkedom';" "'https://esm.sh/linkedom';" ./deno -r && npx replace "'jintr';" "'https://esm.sh/jintr';" ./deno -r && npx replace "new Jinter.default" "new Jinter" ./deno -r`,"bundle:node":'npx esbuild ./dist/src/platform/node.js --bundle --target=node10 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --external:jintr --external:undici --external:linkedom --sourcemap --banner:js="/* eslint-disable */"',"bundle:browser":'npx esbuild ./dist/src/platform/web.js --banner:js="/* eslint-disable */" --bundle --target=chrome58 --keep-names --format=esm --sourcemap --define:global=globalThis --outfile=./bundle/browser.js --platform=browser',"bundle:browser:prod":"npm run bundle:browser -- --outfile=./bundle/browser.min.js --minify",watch:"npx tsc --watch"},repository:{type:"git",url:"git+https://github.com/patrickkfkan/Volumio-YouTube.js.git"},license:"MIT",dependencies:{jintr:"^0.4.1","event-target-polyfill":"0.0.3",linkedom:"^0.14.12","node-fetch":"^2.6.7","web-streams-polyfill":"^3.2.1"},devDependencies:{"@types/jest":"^28.1.7","@types/node":"^17.0.45","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","cpy-cli":"^4.2.0",esbuild:"^0.14.49",eslint:"^8.19.0","eslint-plugin-tsdoc":"^0.2.16",glob:"^8.0.3",jest:"^28.1.3",pbkit:"^0.0.59",replace:"^1.2.2","ts-jest":"^28.0.8",typescript:"^4.9.5"},bugs:{url:"https://github.com/patrickkfkan/Volumio-YouTube.js/issues"},homepage:"https://github.com/patrickkfkan/Volumio-YouTube.js#readme",keywords:["yt","dl","ytdl","youtube","youtubedl","youtube-dl","youtube-downloader","youtube-music","youtube-studio","innertube","unofficial","downloader","livechat","studio","upload","ytmusic","search","music","api"]};var Tb=U1(xb(),1);function u0(n,e){let t=new Tb.default.default(n);for(let[i,r]of Object.entries(e))t.scope.set(i,r);return t.interpret()}s(u0,"evaluate");var Jt={};Os(Jt,{CLIENTS:()=>Gt,INNERTUBE_HEADERS_BASE:()=>kb,OAUTH:()=>Sb,STREAM_HEADERS:()=>Eb,URLS:()=>Ib,default:()=>W});var Ib=Object.freeze({YT_BASE:"https://www.youtube.com",YT_MUSIC_BASE:"https://music.youtube.com",YT_SUGGESTIONS:"https://suggestqueries.google.com/complete/",YT_UPLOAD:"https://upload.youtube.com/",API:Object.freeze({BASE:"https://youtubei.googleapis.com",PRODUCTION_1:"https://www.youtube.com/youtubei/",PRODUCTION_2:"https://youtubei.googleapis.com/youtubei/",STAGING:"https://green-youtubei.sandbox.googleapis.com/youtubei/",RELEASE:"https://release-youtubei.sandbox.googleapis.com/youtubei/",TEST:"https://test-youtubei.sandbox.googleapis.com/youtubei/",CAMI:"http://cami-youtubei.sandbox.googleapis.com/youtubei/",UYTFE:"https://uytfe.sandbox.google.com/youtubei/"})}),Sb=Object.freeze({SCOPE:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",GRANT_TYPE:"http://oauth.net/grant_type/device/1.0",MODEL_NAME:"ytlr::",HEADERS:Object.freeze({accept:"*/*",origin:"https://www.youtube.com","user-agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version","content-type":"application/json",referer:"https://www.youtube.com/tv","accept-language":"en-US"}),REGEX:Object.freeze({AUTH_SCRIPT:/<script id="base-js" src="(.*?)" nonce=".*?"><\/script>/,CLIENT_IDENTITY:new RegExp('.+?={};var .+?={clientId:"(?<client_id>.+?)",.+?:"(?<client_secret>.+?)"},')})}),Gt=Object.freeze({WEB:{NAME:"WEB",VERSION:"2.20230104.01.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20230111.00.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20211213.00.00"},ANDROID:{NAME:"ANDROID",VERSION:"17.34.35",SDK_VERSION:"29"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"}}),Eb=Object.freeze({accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"}),kb=Object.freeze({accept:"*/*","accept-encoding":"gzip, deflate","content-type":"application/json"}),W={URLS:Ib,OAUTH:Sb,CLIENTS:Gt,STREAM_HEADERS:Eb,INNERTUBE_HEADERS_BASE:kb};var GI=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},js=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Mf,To;Pb();if(!Reflect.has(globalThis,"CustomEvent")){class n extends Event{constructor(t,i){var r;super(t,i),Mf.set(this,void 0),GI(this,Mf,(r=i==null?void 0:i.detail)!==null&&r!==void 0?r:null,"f")}get detail(){return js(this,Mf,"f")}}s(n,"CustomEvent"),Mf=new WeakMap,Reflect.set(globalThis,"CustomEvent",n)}var Vi=class extends EventTarget{constructor(){super(),To.set(this,new Map)}emit(e,...t){let i=new CustomEvent(e,{detail:t});this.dispatchEvent(i)}on(e,t){let i=s(r=>{r instanceof CustomEvent?t(...r.detail):t(r)},"wrapper");js(this,To,"f").set(t,i),this.addEventListener(e,i)}once(e,t){let i=s(r=>{r instanceof CustomEvent?t(...r.detail):t(r),this.off(e,t)},"wrapper");js(this,To,"f").set(t,i),this.addEventListener(e,i)}off(e,t){let i=js(this,To,"f").get(t);i&&(this.removeEventListener(e,i),js(this,To,"f").delete(t))}};s(Vi,"EventEmitterLike");To=new WeakMap;var Ys=class extends c{constructor(e){var t,i,r;super(),this.label=new d(e.label).toString(),this.selected=!!e.isSelected,e.int32Value?this.value=e.int32Value:e.stringValue&&(this.value=e.stringValue),!((t=e.onSelectCommand)===null||t===void 0)&&t.browseEndpoint&&(this.endpoint=new T(e.onSelectCommand)),!((i=e.icon)===null||i===void 0)&&i.iconType&&(this.icon_type=(r=e.icon)===null||r===void 0?void 0:r.iconType),e.descriptionText&&(this.description=new d(e.descriptionText).toString())}};s(Ys,"DropdownItem");Ys.type="DropdownItem";var Vf=Ys;var Us=class extends c{constructor(e){super(),this.label=e.label||"",this.entries=f.parseArray(e.entries,Vf)}};s(Us,"Dropdown");Us.type="Dropdown";var Io=Us;var Ws=class extends c{constructor(e){var t;super(),this.title=new d(e.dialogTitle).toString(),this.title_placeholder=e.titlePlaceholder||"",this.privacy_option=((t=f.parseItem(e.privacyOption,Io))===null||t===void 0?void 0:t.entries)||null,this.create_button=f.parseItem(e.cancelButton),this.cancel_button=f.parseItem(e.cancelButton)}};s(Ws,"CreatePlaylistDialog");Ws.type="CreatePlaylistDialog";var Af=Ws;var Gs=class extends c{constructor(e){var t,i,r,a,l,h,v,_;super(),Reflect.has(e||{},"innertubeCommand")&&(e=e.innertubeCommand);let p=Object.keys(e||{}).find(b=>b.endsWith("Endpoint")||b.endsWith("Command"));this.payload=p?Reflect.get(e,p):{},Reflect.has(this.payload,"dialog")&&(this.dialog=f.parse(this.payload.dialog)),e!=null&&e.serviceEndpoint&&(e=e.serviceEndpoint),this.metadata={},!((i=(t=e==null?void 0:e.commandMetadata)===null||t===void 0?void 0:t.webCommandMetadata)===null||i===void 0)&&i.url&&(this.metadata.url=e.commandMetadata.webCommandMetadata.url),!((a=(r=e==null?void 0:e.commandMetadata)===null||r===void 0?void 0:r.webCommandMetadata)===null||a===void 0)&&a.webPageType&&(this.metadata.page_type=e.commandMetadata.webCommandMetadata.webPageType),!((h=(l=e==null?void 0:e.commandMetadata)===null||l===void 0?void 0:l.webCommandMetadata)===null||h===void 0)&&h.apiUrl?this.metadata.api_url=e.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):p&&(this.metadata.api_url=this.getEndpoint(p)),!((_=(v=e==null?void 0:e.commandMetadata)===null||v===void 0?void 0:v.webCommandMetadata)===null||_===void 0)&&_.sendPost&&(this.metadata.send_post=e.commandMetadata.webCommandMetadata.sendPost),e!=null&&e.createPlaylistEndpoint&&e!=null&&e.createPlaylistEndpoint.createPlaylistDialog&&(this.dialog=f.parseItem(e==null?void 0:e.createPlaylistEndpoint.createPlaylistDialog,Af))}getEndpoint(e){switch(e){case"browseEndpoint":return"/browse";case"watchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"live_chat/get_item_context_menu"}}call(e,t){if(!e)throw new Error("An active caller must be provided");if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found, this is a bug.");return e.execute(this.metadata.api_url,Object.assign(Object.assign({},this.payload),t))}toURL(){if(!!this.metadata.url&&!!this.metadata.page_type)return this.metadata.page_type==="WEB_PAGE_TYPE_UNKNOWN"?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}};s(Gs,"NavigationEndpoint");Gs.type="NavigationEndpoint";var T=Gs;var Rf=class{constructor(e){this.text=e.text,this.bold=Boolean(e.bold),this.italics=Boolean(e.italics),this.strikethrough=Boolean(e.strikethrough),this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):void 0}toString(){return this.text}toHTML(){let e=[];this.bold&&e.push("b"),this.italics&&e.push("i"),this.strikethrough&&e.push("s");let t=Of(this.text),r=`<span style="white-space: pre-wrap;">${e.map(a=>`<${a}>`).join("")+t+e.map(a=>`</${a}>`).join("")}</span>`;if(this.endpoint){let a=this.endpoint.toURL();if(a)return`<a href="${a}">${r}</a>`}return r}};s(Rf,"TextRun");var Ff=Rf;var So=class{constructor(e){this.url=e.url,this.width=e.width,this.height=e.height}static fromResponse(e){return!e||!e.thumbnails?[]:e.thumbnails.map(t=>new So(t)).sort((t,i)=>i.width-t.width)}};s(So,"Thumbnail");var S=So;var Lf=class{constructor(e){var t,i,r,a,l,h;this.text=((t=e.emoji)===null||t===void 0?void 0:t.emojiId)||((r=(i=e.emoji)===null||i===void 0?void 0:i.shortcuts)===null||r===void 0?void 0:r[0])||"",this.emoji={emoji_id:e.emoji.emojiId,shortcuts:((a=e.emoji)===null||a===void 0?void 0:a.shortcuts)||[],search_terms:((l=e.emoji)===null||l===void 0?void 0:l.searchTerms)||[],image:S.fromResponse(e.emoji.image),is_custom:!!(!((h=e.emoji)===null||h===void 0)&&h.isCustomEmoji)}}toString(){return this.text}toHTML(){let e=Of(this.text);return`<img src="${this.emoji.image[0].url}" alt="${e}" title="${e}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}};s(Lf,"EmojiRun");var Df=Lf;function Of(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}s(Of,"escape");var Bf=class{constructor(e){(e==null?void 0:e.hasOwnProperty("runs"))&&Array.isArray(e.runs)?(this.runs=e.runs.map(t=>t.emoji?new Df(t):new Ff(t)),this.text=this.runs.map(t=>t.text).join("")):this.text=(e==null?void 0:e.simpleText)||"N/A"}toHTML(){return this.runs?this.runs.map(e=>e.toHTML()).join(""):this.text}toString(){return this.text}};s(Bf,"Text");var d=Bf;var Js=class extends c{constructor(e){var t;super(),this.title=new d(e.title).text,this.form_item_entity_key=e.formItemEntityKey,this.selected_icon_type=((t=e.selectedIcon)===null||t===void 0?void 0:t.iconType)||null,this.endpoint=e.selectedCommand?new T(e.selectedCommand):null,this.selected=!!this.endpoint}};s(Js,"MusicMultiSelectMenuItem");Js.type="MusicMultiSelectMenuItem";var Ht=Js;var jf=class{constructor(e){var t,i,r,a,l,h;if(this.itag=e.itag,this.mime_type=e.mimeType,this.bitrate=e.bitrate,this.average_bitrate=e.averageBitrate,this.width=e.width||void 0,this.height=e.height||void 0,this.init_range=e.initRange?{start:parseInt(e.initRange.start),end:parseInt(e.initRange.end)}:void 0,this.index_range=e.indexRange?{start:parseInt(e.indexRange.start),end:parseInt(e.indexRange.end)}:void 0,this.last_modified=new Date(Math.floor(parseInt(e.lastModified)/1e3)),this.content_length=parseInt(e.contentLength),this.quality=e.quality,this.quality_label=e.qualityLabel||void 0,this.fps=e.fps||void 0,this.url=e.url||void 0,this.cipher=e.cipher||void 0,this.signature_cipher=e.signatureCipher||void 0,this.audio_quality=e.audioQuality||void 0,this.approx_duration_ms=parseInt(e.approxDurationMs),this.audio_sample_rate=parseInt(e.audioSampleRate),this.audio_channels=e.audioChannels,this.loudness_db=e.loudnessDb,this.has_audio=!!e.audioBitrate||!!e.audioQuality,this.has_video=!!e.qualityLabel,this.has_audio){let v=new URLSearchParams(this.cipher||this.signature_cipher),_=new URLSearchParams(v.get("url")||this.url);this.language=((i=(t=_.get("xtags"))===null||t===void 0?void 0:t.split(":").find(p=>p.startsWith("lang=")))===null||i===void 0?void 0:i.split("=").at(1))||null,this.is_dubbed=((a=(r=_.get("xtags"))===null||r===void 0?void 0:r.split(":").find(p=>p.startsWith("acont=")))===null||a===void 0?void 0:a.split("=").at(1))==="dubbed",this.is_original=((h=(l=_.get("xtags"))===null||l===void 0?void 0:l.split(":").find(p=>p.startsWith("acont=")))===null||h===void 0?void 0:h.split("=").at(1))==="original"||!this.is_dubbed,e.audioTrack&&(this.audio_track={audio_is_default:e.audioTrack.audioIsDefault,display_name:e.audioTrack.displayName,id:e.audioTrack.id})}}decipher(e){if(!e)throw new x("Cannot decipher format, this session appears to have no valid player.");return e.decipher(this.url,this.signature_cipher,this.cipher)}};s(jf,"Format");var Yf=jf;var Uf=class{constructor(e){this.id=e.videoId,this.channel_id=e.channelId,this.title=e.title,this.duration=parseInt(e.lengthSeconds),this.keywords=e.keywords,this.is_owner_viewing=!!e.isOwnerViewing,this.short_description=e.shortDescription,this.thumbnail=S.fromResponse(e.thumbnail),this.allow_ratings=!!e.allowRatings,this.view_count=parseInt(e.viewCount),this.author=e.author,this.is_private=!!e.isPrivate,this.is_live=!!e.isLive,this.is_live_content=!!e.isLiveContent,this.is_upcoming=!!e.isUpcoming,this.is_crawlable=!!e.isCrawlable}};s(Uf,"VideoDetails");var Wf=Uf;var Hs=class extends c{constructor(e){super(),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint)}};s(Hs,"AccountChannel");Hs.type="AccountChannel";var Gf=Hs;var zs=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(zs,"AccountItemSectionHeader");zs.type="AccountItemSectionHeader";var Jf=zs;var Ks=class{constructor(e){this.account_name=new d(e.accountName),this.account_photo=S.fromResponse(e.accountPhoto),this.is_selected=e.isSelected,this.is_disabled=e.isDisabled,this.has_channel=e.hasChannel,this.endpoint=new T(e.serviceEndpoint),this.account_byline=new d(e.accountByline)}};s(Ks,"AccountItem");Ks.type="AccountItem";var qs=class extends c{constructor(e){super(),this.contents=e.contents.map(t=>new Ks(t.accountItem)),this.header=f.parseItem(e.header,Jf)}};s(qs,"AccountItemSection");qs.type="AccountItemSection";var Hf=qs;var $s=class extends c{constructor(e){super(),this.contents=f.parseItem(e.contents[0],Hf),this.footers=f.parseItem(e.footers[0],Gf)}};s($s,"AccountSectionList");$s.type="AccountSectionList";var zf=$s;var Xs=class extends c{constructor(e){super(),this.items=f.parse(e.continuationItems),this.target=e.target}};s(Xs,"AppendContinuationItemsAction");Xs.type="AppendContinuationItemsAction";var Kf=Xs;var Qs=class extends c{constructor(e){super(),this.popup=f.parse(e.popup),this.popup_type=e.popupType}};s(Qs,"OpenPopupAction");Qs.type="OpenPopupAction";var Nb=Qs;var Zs=class extends c{constructor(e){super(),this.text=new d(e.text),this.alert_type=e.type}};s(Zs,"Alert");Zs.type="Alert";var Mb=Zs;var er=class extends c{constructor(e){super(),this.title=e.title,this.subtitle=e.subtitle,this.metric_value=e.metricValue,this.comparison_indicator=e.comparisonIndicator;let t=e.seriesConfiguration.lineSeries;this.series_configuration={line_series:{lines_data:{x:t.linesData[0].x,y:t.linesData[0].y,style:{line_width:t.linesData[0].style.lineWidth,line_color:t.linesData[0].style.lineColor}},domain_axis:{tick_values:t.domainAxis.tickValues,custom_formatter:t.domainAxis.customFormatter},measure_axis:{tick_values:t.measureAxis.tickValues,custom_formatter:t.measureAxis.customFormatter}}}}};s(er,"DataModelSection");er.type="DataModelSection";var qf=er;var tr=class extends c{constructor(e){super(),this.period=e.cardData.periodLabel;let t=e.cardData.sections[0].analyticsKeyMetricsData;this.sections=t.dataModel.sections.map(i=>new qf(i))}};s(tr,"AnalyticsMainAppKeyMetrics");tr.type="AnalyticsMainAppKeyMetrics";var Vb=tr;var ir=class extends c{constructor(e){super();let t=e.analyticsTableCarouselData.data.tableCards;this.title=e.analyticsTableCarouselData.carouselTitle,this.selected_card_index_key=e.analyticsTableCarouselData.selectedCardIndexKey,this.table_cards=t.map(i=>({title:i.cardData.title,rows:i.cardData.rows.map(r=>({label:r.label,display_value:r.displayValue,display_value_a11y:r.displayValueA11y,bar_ratio:r.barRatio,bar_color:r.barColor,bar_opacity:r.barOpacity}))})),this.use_main_app_specs=e.analyticsTableCarouselData.useMainAppSpecs}};s(ir,"AnalyticsRoot");ir.type="AnalyticsRoot";var Ab=ir;var nr=class extends c{constructor(e){super(),this.title=e.title,this.shorts=e.shortsCarouselData.shorts.map(t=>({description:t.shortsDescription,thumbnail_url:t.thumbnailUrl,endpoint:new T(t.videoEndpoint)}))}};s(nr,"AnalyticsShortsCarouselCard");nr.type="AnalyticsShortsCarouselCard";var Rb=nr;var or=class extends c{constructor(e){super(),this.title=e.videoTitle,this.metadata={views:e.videoDescription.split("\xB7")[0].trim(),published:e.videoDescription.split("\xB7")[1].trim(),thumbnails:S.fromResponse(e.thumbnailDetails),duration:e.formattedLength,is_short:e.isShort}}};s(or,"AnalyticsVideo");or.type="AnalyticsVideo";var $f=or;var sr=class extends c{constructor(e){var t;super(),this.title=e.title,e.noDataMessage&&(this.no_data_message=e.noDataMessage),this.videos=((t=e.videoCarouselData)===null||t===void 0?void 0:t.videos.map(i=>new $f(i)))||null}};s(sr,"AnalyticsVodCarouselCard");sr.type="AnalyticsVodCarouselCard";var Fb=sr;var rr=class extends c{constructor(e){super(),this.title=e.buttonLabel,this.use_new_specs=e.useNewSpecs}};s(rr,"CtaGoToCreatorStudio");rr.type="CtaGoToCreatorStudio";var Ob=rr;var ar=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=new d(e.contents)}};s(ar,"StatRow");ar.type="StatRow";var Lb=ar;var ur=class extends c{constructor(e){super(),this.audio_only_availability=e.audioOnlyAvailability}};s(ur,"AudioOnlyPlayability");ur.type="AudioOnlyPlayability";var Db=ur;var lr=class extends c{constructor(e){var t,i;super(),!((i=(t=e==null?void 0:e.content)===null||t===void 0?void 0:t.automixPlaylistVideoRenderer)===null||i===void 0)&&i.navigationEndpoint&&(this.playlist_video={endpoint:new T(e.content.automixPlaylistVideoRenderer.navigationEndpoint)})}};s(lr,"AutomixPreviewVideo");lr.type="AutomixPreviewVideo";var Eo=lr;var cr=class extends c{constructor(e){super(),this.image=S.fromResponse(e.image),this.endpoint=new T(e.command)}};s(cr,"BackstageImage");cr.type="BackstageImage";var Xf=cr;var dr=class extends d{constructor(e){var t,i;super(e),this.endpoint=!((i=(t=e==null?void 0:e.runs)===null||t===void 0?void 0:t[0])===null||i===void 0)&&i.navigationEndpoint?new T(e==null?void 0:e.runs[0].navigationEndpoint):e!=null&&e.navigationEndpoint?new T(e==null?void 0:e.navigationEndpoint):e!=null&&e.titleNavigationEndpoint?new T(e==null?void 0:e.titleNavigationEndpoint):null}toJSON(){return this}};s(dr,"NavigatableText");dr.type="NavigatableText";var ko=dr;var JI=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},si=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},St,Qf=class{constructor(e,t,i){var r,a,l,h,v,_,p,b,I,C,N,L,O,D,K,F,w,ve,Ge,Ee,tt,$,B,se,re,st,rt,xt,Xe,Je,ce,Me;St.set(this,void 0),JI(this,St,new ko(e),"f"),this.id=((h=(l=(a=(r=si(this,St,"f").runs)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.endpoint)===null||l===void 0?void 0:l.payload)===null||h===void 0?void 0:h.browseId)||((p=(_=(v=si(this,St,"f"))===null||v===void 0?void 0:v.endpoint)===null||_===void 0?void 0:_.payload)===null||p===void 0?void 0:p.browseId)||"N/A",this.name=si(this,St,"f").text||"N/A",this.thumbnails=i?S.fromResponse(i):[],this.endpoint=((I=(b=si(this,St,"f").runs)===null||b===void 0?void 0:b[0])===null||I===void 0?void 0:I.endpoint)||si(this,St,"f").endpoint,this.badges=Array.isArray(t)?f.parseArray(t):[],this.is_verified=((C=this.badges)===null||C===void 0?void 0:C.some(He=>He.style=="BADGE_STYLE_TYPE_VERIFIED"))||null,this.is_verified_artist=((N=this.badges)===null||N===void 0?void 0:N.some(He=>He.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"))||null,this.url=((F=(K=(D=(O=(L=si(this,St,"f"))===null||L===void 0?void 0:L.runs)===null||O===void 0?void 0:O[0])===null||D===void 0?void 0:D.endpoint)===null||K===void 0?void 0:K.metadata)===null||F===void 0?void 0:F.api_url)==="/browse"&&`${W.URLS.YT_BASE}${((tt=(Ee=(Ge=(ve=(w=si(this,St,"f"))===null||w===void 0?void 0:w.runs)===null||ve===void 0?void 0:ve[0])===null||Ge===void 0?void 0:Ge.endpoint)===null||Ee===void 0?void 0:Ee.payload)===null||tt===void 0?void 0:tt.canonicalBaseUrl)||`/u/${(st=(re=(se=(B=($=si(this,St,"f"))===null||$===void 0?void 0:$.runs)===null||B===void 0?void 0:B[0])===null||se===void 0?void 0:se.endpoint)===null||re===void 0?void 0:re.payload)===null||st===void 0?void 0:st.browseId}`}`||`${W.URLS.YT_BASE}${((Xe=(xt=(rt=si(this,St,"f"))===null||rt===void 0?void 0:rt.endpoint)===null||xt===void 0?void 0:xt.payload)===null||Xe===void 0?void 0:Xe.canonicalBaseUrl)||`/u/${(Me=(ce=(Je=si(this,St,"f"))===null||Je===void 0?void 0:Je.endpoint)===null||ce===void 0?void 0:ce.payload)===null||Me===void 0?void 0:Me.browseId}`}`||null}get best_thumbnail(){return this.thumbnails[0]}};s(Qf,"Author");St=new WeakMap;var be=Qf;var pr=class extends c{constructor(e){super(),this.id=e.postId,this.author=new be(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),null,e.authorThumbnail),this.content=new d(e.contentText),this.published=new d(e.publishedTimeText),e.pollStatus&&(this.poll_status=e.pollStatus),e.voteStatus&&(this.vote_status=e.voteStatus),e.voteCount&&(this.vote_count=new d(e.voteCount)),e.actionMenu&&(this.menu=f.parseItem(e.actionMenu)),e.actionButtons&&(this.action_buttons=f.parseItem(e.actionButtons)),e.voteButton&&(this.vote_button=f.parseItem(e.voteButton)),e.navigationEndpoint&&(this.endpoint=new T(e.navigationEndpoint)),e.backstageAttachment&&(this.attachment=f.parseItem(e.backstageAttachment)),this.surface=e.surface}};s(pr,"BackstagePost");pr.type="BackstagePost";var Co=pr;var fr=class extends c{constructor(e){super(),this.post=f.parseItem(e.post)}};s(fr,"BackstagePostThread");fr.type="BackstagePostThread";var Bb=fr;var hr=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents)}};s(hr,"BrowseFeedActions");hr.type="BrowseFeedActions";var Zf=hr;var mr=class extends c{constructor(e){super(),this.album=new d(e.album),this.thumbnails=S.fromResponse(e.thumbnailDetails)}};s(mr,"BrowserMediaSession");mr.type="BrowserMediaSession";var jb=mr;var _r=class extends c{constructor(e){var t,i,r,a;super(),e.text&&(this.text=new d(e.text).toString()),!((t=e.accessibility)===null||t===void 0)&&t.label&&(this.label=(i=e.accessibility)===null||i===void 0?void 0:i.label),e.tooltip&&(this.tooltip=e.tooltip),!((r=e.icon)===null||r===void 0)&&r.iconType&&(this.icon_type=(a=e.icon)===null||a===void 0?void 0:a.iconType),Reflect.has(e,"isDisabled")&&(this.is_disabled=e.isDisabled),this.endpoint=new T(e.navigationEndpoint||e.serviceEndpoint||e.command)}};s(_r,"Button");_r.type="Button";var G=_r;var vr=class extends c{constructor(e){super(),this.author=new be({simpleText:e.title,navigationEndpoint:e.navigationEndpoint},e.badges,e.avatar),e.banner&&(this.banner=S.fromResponse(e.banner)),e.tv_banner&&(this.tv_banner=S.fromResponse(e.tvBanner)),e.mobile_banner&&(this.mobile_banner=S.fromResponse(e.mobileBanner)),e.subscriberCountText&&(this.subscribers=new d(e.subscriberCountText)),e.videosCountText&&(this.videos_count=new d(e.videosCountText)),e.sponsorButton&&(this.sponsor_button=f.parseItem(e.sponsorButton)),e.subscribeButton&&(this.subscribe_button=f.parseItem(e.subscribeButton)),e.headerLinks&&(this.header_links=f.parseItem(e.headerLinks)),e.channelHandleText&&(this.channel_handle=new d(e.channelHandleText)),e.channelId&&(this.channel_id=e.channelId)}};s(vr,"C4TabbedHeader");vr.type="C4TabbedHeader";var Po=vr;var yr=class extends c{constructor(e){super(),this.label=new d(e.label),this.icon_type=e.icon.iconType,this.style=e.style}};s(yr,"CallToActionButton");yr.type="CallToActionButton";var Yb=yr;var br=class extends c{constructor(e){super(),this.teaser=f.parseItem(e.teaser),this.content=f.parseItem(e.content),this.card_id=e.cardId||null,this.feature=e.feature||null,this.cue_ranges=e.cueRanges.map(t=>({start_card_active_ms:t.startCardActiveMs,end_card_active_ms:t.endCardActiveMs,teaser_duration_ms:t.teaserDurationMs,icon_after_teaser_ms:t.iconAfterTeaserMs}))}};s(br,"Card");br.type="Card";var Ub=br;var wr=class extends c{constructor(e){super(),this.cards=f.parseArray(e.cards),this.header=new d(e.headerText),this.allow_teaser_dismiss=e.allowTeaserDismiss}};s(wr,"CardCollection");wr.type="CardCollection";var Wb=wr;var gr=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents)}};s(gr,"CarouselHeader");gr.type="CarouselHeader";var eh=gr;var xr=class extends c{constructor(e){super(),this.items=f.parseArray(e.carouselItems),this.background_color=e.backgroundColor,this.layout_style=e.layoutStyle,this.pagination_thumbnails=S.fromResponse(e.paginationThumbnails),this.paginator_alignment=e.paginatorAlignment}};s(xr,"CarouselItem");xr.type="CarouselItem";var Gb=xr;var Tr=class extends c{constructor(e){super(),this.id=e.channelId,this.author=new be(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscribers=new d(e.subscriberCountText),this.videos=new d(e.videoCountText),this.long_byline=new d(e.longBylineText),this.short_byline=new d(e.shortBylineText),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parseItem(e.subscribeButton),this.description_snippet=new d(e.descriptionSnippet)}};s(Tr,"Channel");Tr.type="Channel";var th=Tr;var Ir=class extends c{constructor(e){var t,i;super(),this.id=e.channelId,this.name=new d(e.title),this.avatar=S.fromResponse(e.avatar),this.canonical_channel_url=e.canonicalChannelUrl,this.primary_links=(i=(t=e.primaryLinks)===null||t===void 0?void 0:t.map(r=>({endpoint:new T(r.navigationEndpoint),icon:S.fromResponse(r.icon),title:new d(r.title)})))!==null&&i!==void 0?i:[],this.views=new d(e.viewCountText),this.joined=new d(e.joinedDateText),this.description=new d(e.description),this.email_reveal=new T(e.onBusinessEmailRevealClickCommand),this.can_reveal_email=!e.signInForBusinessEmail,this.country=new d(e.country),this.buttons=f.parseArray(e.actionButtons)}};s(Ir,"ChannelAboutFullMetadata");Ir.type="ChannelAboutFullMetadata";var ih=Ir;var Sr=class extends c{constructor(e){super(),this.channel_title=e.channelTitle,this.avatar=S.fromResponse(e.avatar),this.header=new d(e.header),this.main_text=new d(e.mainText),this.sign_in_button=ie.parseItem(e.signInButton,G),this.secondary_text=new d(e.secondaryText)}};s(Sr,"ChannelAgeGate");Sr.type="ChannelAgeGate";var Jb=Sr;var Er=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parse(e.items)}};s(Er,"ChannelFeaturedContent");Er.type="ChannelFeaturedContent";var Hb=Er;var kr=class{constructor(e){this.endpoint=new T(e.navigationEndpoint),this.icon=S.fromResponse(e.icon),this.title=new d(e.title)}};s(kr,"HeaderLink");var Cr=class extends c{constructor(e){var t,i;super(),this.primary=((t=e.primaryLinks)===null||t===void 0?void 0:t.map(r=>new kr(r)))||[],this.secondary=((i=e.secondaryLinks)===null||i===void 0?void 0:i.map(r=>new kr(r)))||[]}};s(Cr,"ChannelHeaderLinks");Cr.type="ChannelHeaderLinks";var zb=Cr;var Pr=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description,this.url=e.channelUrl,this.rss_urls=e.rssUrl,this.vanity_channel_url=e.vanityChannelUrl,this.external_id=e.externalId,this.is_family_safe=e.isFamilySafe,this.keywords=e.keywords,this.avatar=S.fromResponse(e.avatar),this.available_countries=e.availableCountryCodes,this.android_deep_link=e.androidDeepLink,this.android_appindexing_link=e.androidAppindexingLink,this.ios_appindexing_link=e.iosAppindexingLink}};s(Pr,"ChannelMetadata");Pr.type="ChannelMetadata";var nh=Pr;var Nr=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Nr,"ChannelMobileHeader");Nr.type="ChannelMobileHeader";var Kb=Nr;var Mr=class extends c{constructor(e){super(),this.avatar=S.fromResponse(e.avatar),this.endpoint=new T(e.avatarEndpoint),this.name=e.name,this.links=e.links.map(t=>new d(t))}};s(Mr,"ChannelOptions");Mr.type="ChannelOptions";var oh=Mr;var Vr=class extends c{constructor(e){super(),this.content_type_sub_menu_items=e.contentTypeSubMenuItems.map(t=>({endpoint:new T(t.navigationEndpoint||t.endpoint),selected:t.selected,title:t.title})),this.sort_setting=f.parseItem(e.sortSetting)}};s(Vr,"ChannelSubMenu");Vr.type="ChannelSubMenu";var Ar=Vr;var Rr=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.endpoint=new T(e.navigationEndpoint),this.label=e.accessibility.accessibilityData.label}};s(Rr,"ChannelThumbnailWithLink");Rr.type="ChannelThumbnailWithLink";var qb=Rr;var Fr=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.description=new d(e.description),this.views=new d(e.viewCountText),this.published=new d(e.publishedTimeText)}};s(Fr,"ChannelVideoPlayer");Fr.type="ChannelVideoPlayer";var $b=Fr;var Or=class extends c{constructor(e){super(),this.title=new d(e.title),this.time_range_start_millis=e.timeRangeStartMillis,this.thumbnail=S.fromResponse(e.thumbnail)}};s(Or,"Chapter");Or.type="Chapter";var Xb=Or;var Lr=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.duration={text:e.lengthText.simpleText,seconds:ut(e.lengthText.simpleText)},this.endpoint=new T(e.navigationEndpoint)}};s(Lr,"ChildVideo");Lr.type="ChildVideo";var Qb=Lr;var Dr=class extends c{constructor(e){super(),this.is_selected=e.isSelected,this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):void 0,this.text=new d(e.text).toString()}};s(Dr,"ChipCloudChip");Dr.type="ChipCloudChip";var De=Dr;var Br=class extends c{constructor(e){super(),this.chips=f.parseArray(e.chips,De),this.next_button=f.parseItem(e.nextButton,G),this.previous_button=f.parseItem(e.previousButton,G),this.horizontal_scrollable=e.horizontalScrollable}};s(Br,"ChipCloud");Br.type="ChipCloud";var Ai=Br;var jr=class extends c{constructor(e){super(),this.channel_avatar=S.fromResponse(e.channelAvatar),this.custom_text=new d(e.customText),this.channel_name=new d(e.channelName),this.subscriber_count=new d(e.subscriberCountText),this.endpoint=new T(e.endpoint)}};s(jr,"CollaboratorInfoCardContent");jr.type="CollaboratorInfoCardContent";var Zb=jr;var Yr=class extends c{constructor(e){super(),this.left=S.fromResponse(e.leftThumbnail),this.top_right=S.fromResponse(e.topRightThumbnail),this.bottom_right=S.fromResponse(e.bottomRightThumbnail),this.endpoint=new T(e.navigationEndpoint)}};s(Yr,"CollageHeroImage");Yr.type="CollageHeroImage";var ew=Yr;var HI=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},zI=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},sh,Ur=class extends c{constructor(e){var t;super(),sh.set(this,void 0),this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.iconType)||null,this.tooltip=e.iconTooltip,this.tooltip==="Verified"&&(this.style="BADGE_STYLE_TYPE_VERIFIED")&&(e.style="BADGE_STYLE_TYPE_VERIFIED"),HI(this,sh,e,"f")}get orig_badge(){return zI(this,sh,"f")}};s(Ur,"AuthorCommentBadge");sh=new WeakMap;Ur.type="AuthorCommentBadge";var rh=Ur;var Wr=class extends c{constructor(e){super(),this.reply_button=f.parseItem(e.replyButton),this.cancel_button=f.parseItem(e.cancelButton),this.author_thumbnail=S.fromResponse(e.authorThumbnail),this.placeholder=new d(e.placeholderText),this.error_message=new d(e.errorMessage)}};s(Wr,"CommentReplyDialog");Wr.type="CommentReplyDialog";var ah=Wr;var V;(function(n){n[n.Varint=0]="Varint",n[n.Fixed64=1]="Fixed64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Fixed32=5]="Fixed32"})(V=V||(V={}));var U=class extends Uint32Array{constructor(e=0,t=0){super([e,t])}toString(e=!0){let[t,i]=this;if(t===0&&i===0)return"0";if(e&&i>2147483647)return"-"+lh(l0(this),uh).toString(!1);let r=[],a=new U(t,i);for(;$I(a,KI);){let[l,h]=qI(a);r.push(h),a=l}return r.reverse().join("")}static parse(e){let t=parseInt(e,10),i=t<0;if(Number.isNaN(t))return new U(0);if(e.length<10)return t<0?lh(l0(new U(-t)),uh):new U(t);let r=new U,a=uh;for(let l of e.split("").reverse())parseInt(l)&&(r=lh(r,tw(new U(parseInt(l)),a))),a=tw(a,new U(10));return i?lh(l0(r),uh):r}};s(U,"Long");var KI=new U(0),uh=new U(1);function ch(n){let[e,t]=n;return[e&65535,e>>>16,t&65535,t>>>16]}s(ch,"makeChunk");function lh(n,e){let[t,i,r,a]=ch(n),[l,h,v,_]=ch(e),p=0,b=0,I=0,C=0;return C+=t+l,I+=C>>>16,C&=65535,I+=i+h,b+=I>>>16,I&=65535,b+=r+v,p+=b>>>16,b&=65535,p+=a+_,p&=65535,new U(I<<16|C,p<<16|b)}s(lh,"add");function tw(n,e){let[t,i,r,a]=ch(n),[l,h,v,_]=ch(e),p=0,b=0,I=0,C=0;return C+=t*l,I+=C>>>16,C&=65535,I+=t*h+i*l,b+=I>>>16,I&=65535,b+=t*v+r*l+i*h,p+=b>>>16,b&=65535,p+=t*_+i*v+r*h+a*l,p&=65535,new U(I<<16|C,p<<16|b)}s(tw,"mul");function qI(n){let[e,t]=n;return[new U((t%10*(4294967295+1)+e)/10|0,t/10|0),(t%10*(4294967295+1)+e)%10]}s(qI,"divByTen");function $I(n,e){let[t,i]=n,[r,a]=e;return i!==a?i-a:t-r}s($I,"compare");function l0(n){let[e,t]=n;return new U(~e,~t)}s(l0,"negate");function No(n){let e=[],r=typeof n=="number"?new U(n):n;for(;r[0]||r[1];){let[a,l]=r,h=a&127,v=l>>>7,_=a>>>7|(l&127)<<32-7;r=new U(_,v);let p=r[0]||r[1]?h|128:h;e.push(p)}return e.length<1?new Uint8Array(1):Uint8Array.from(e)}s(No,"encode");function c0(n){let e=new U(0),t=0;for(;;){let i=n.getUint8(t);if(e=XI(e,QI(new U(i&127),t*7)),++t,!(i>>>7))return[t,e]}}s(c0,"decode");function XI(n,e){return new U(n[0]|e[0],n[1]|e[1])}s(XI,"or");function QI(n,e){return e===0?n:e>=32?new U(0,n[0]<<e-32):new U(n[0]<<e,n[1]<<e|n[0]>>>32-e)}s(QI,"leftshift");function A(n){let e=[];return n.forEach(([t,i])=>{switch(e.push(No(t<<3|i.type)),i.type){case V.Varint:e.push(No(i.value));break;case V.Fixed64:{let r=new Uint8Array(8),a=new DataView(r.buffer);a.setUint32(0,i.value[0],!0),a.setUint32(4,i.value[1],!0),e.push(r);break}case V.LengthDelimited:e.push(No(i.value.byteLength)),e.push(i.value);break;case V.Fixed32:{let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,i.value,!0),e.push(r);break}}}),d0(e)}s(A,"serialize");function d0(n){let e=n.reduce((i,r)=>i+r.byteLength,0),t=new Uint8Array(e);return n.reduce((i,r)=>(t.set(r,i),i+r.byteLength),0),t}s(d0,"concat");function p0(n){if(n instanceof U){let e=new U(n[0]<<1,n[1]<<1|n[0]>>>31),t=n[1]>>>31?new U(4294967295,4294967295):new U;return new U(e[0]^t[0],e[1]^t[1])}return(n*2^n>>31)>>>0}s(p0,"encode");function f0(n){if(n instanceof U){let e=new U(n[0]>>>1|n[1]<<31,n[1]>>>1),t=n[0]&1?new U(4294967295,4294967295):new U;return new U(e[0]^t[0],e[1]^t[1])}return n>>>1^-(n&1)}s(f0,"decode");var h0={int32:n=>n[0]|0,int64:n=>n.toString(!0),uint32:n=>n[0]>>>0,uint64:n=>n.toString(!1),sint32:n=>f0(n[0]),sint64:n=>f0(n).toString(!0),bool:n=>n[0]!==0},m0={int32:n=>new U(n),int64:n=>U.parse(n),uint32:n=>new U(n),uint64:n=>U.parse(n),sint32:n=>p0(new U(n)),sint64:n=>p0(U.parse(n)),bool:n=>new U(+n)},ZI=Object.fromEntries(Object.entries(h0).map(([n,e])=>[n,t=>{if(t.type===V.Varint)return e(t.value)}])),eS=Object.fromEntries(Object.entries(m0).map(([n,e])=>[n,t=>({type:V.Varint,value:e(t)})])),Z=Object.assign(Object.assign({},ZI),{double:n=>n.type!==V.Fixed64?void 0:new DataView(n.value.buffer).getFloat64(0,!0),float:n=>n.type!==V.Fixed32?void 0:new DataView(new Uint32Array([n.value]).buffer).getFloat32(0,!0),fixed32:n=>{if(n.type===V.Fixed32)return n.value>>>0},fixed64:n=>{if(n.type===V.Fixed64)return n.value.toString(!1)},sfixed32:n=>{if(n.type===V.Fixed32)return n.value|0},sfixed64:n=>{if(n.type===V.Fixed64)return n.value.toString(!0)},string:n=>n.type!==V.LengthDelimited?void 0:new TextDecoder().decode(n.value),bytes:n=>{if(n.type===V.LengthDelimited)return n.value}}),P=Object.assign(Object.assign({},eS),{double:n=>{let e=new U;return new DataView(e.buffer).setFloat64(0,n,!0),{type:V.Fixed64,value:e}},float:n=>{let e=new Uint32Array(1),t=new DataView(e.buffer);return t.setFloat32(0,n,!0),{type:V.Fixed32,value:t.getUint32(0,!0)}},fixed32:n=>({type:V.Fixed32,value:n>>>0}),fixed64:n=>({type:V.Fixed64,value:U.parse(n)}),sfixed32:n=>({type:V.Fixed32,value:n|0}),sfixed64:n=>({type:V.Fixed64,value:U.parse(n)}),string:n=>{let e=new TextEncoder;return{type:V.LengthDelimited,value:e.encode(n)}},bytes:n=>({type:V.LengthDelimited,value:n})}),tS=Object.fromEntries(Object.keys(h0).map(n=>[n,function*(e){for(let t of e){let i=Z[n](t);if(i!=null)yield i;else for(let r of sS(t))yield h0[n](r)}}])),xM=Object.assign(Object.assign({},tS),{*double(n){for(let e of n){let t=Z.double(e);t!=null?yield t:yield*nS(e)}},*float(n){for(let e of n){let t=Z.float(e);t!=null?yield t:yield*oS(e)}},*fixed32(n){for(let e of n){let t=Z.fixed32(e);if(t!=null)yield t;else for(let i of iw(e))yield i>>>0}},*fixed64(n){for(let e of n){let t=Z.fixed64(e);if(t!=null)yield t;else for(let i of nw(e))yield i.toString(!1)}},*sfixed32(n){for(let e of n){let t=Z.sfixed32(e);if(t!=null)yield t;else for(let i of iw(e))yield i|0}},*sfixed64(n){for(let e of n){let t=Z.sfixed64(e);if(t!=null)yield t;else for(let i of nw(e))yield i.toString(!0)}}}),iS=Object.fromEntries(Object.keys(m0).map(n=>[n,function(e){return{type:V.LengthDelimited,value:d0(e.map(t=>{let i=m0[n](t);return No(i)}))}}]));function Mo(n,e){return s(function(i){let r=new Uint8Array(i.length*n),a=new DataView(r.buffer);for(let l=0;l<i.length;++l)e(a,l*n,i[l]);return{type:V.LengthDelimited,value:r}},"pack")}s(Mo,"getFixedPackFn");var TM=Object.assign(Object.assign({},iS),{double:Mo(8,(n,e,t)=>{n.setFloat64(e,t,!0)}),float:Mo(4,(n,e,t)=>{n.setFloat32(e,t,!0)}),fixed32:Mo(4,(n,e,t)=>{n.setUint32(e,t,!0)}),fixed64:Mo(8,(n,e,t)=>{let i=U.parse(t);n.setUint32(e,i[0],!0),n.setUint32(e+4,i[1],!0)}),sfixed32:Mo(4,(n,e,t)=>{n.setInt32(e,t,!0)}),sfixed64:Mo(8,(n,e,t)=>{let i=U.parse(t);n.setUint32(e,i[0],!0),n.setUint32(e+4,i[1],!0)})});function*nS(n){if(n.type!==V.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getFloat64(t,!0);t+=4,yield r}}s(nS,"unpackDouble");function*oS(n){if(n.type!==V.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getFloat32(t,!0);t+=4,yield r}}s(oS,"unpackFloat");function*sS(n){if(n.type!==V.LengthDelimited)return;let{value:e}=n,t=0,i=e.byteOffset;for(;t<e.length;){let r=c0(new DataView(e.buffer,i+t));t+=r[0],yield r[1]}}s(sS,"unpackVarint");function*iw(n){if(n.type!==V.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getUint32(t,!0);t+=4,yield r}}s(iw,"unpackFixed32");function*nw(n){if(n.type!==V.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getUint32(t,!0);t+=4;let a=i.getUint32(t,!0);t+=4,yield new U(r,a)}}s(nw,"unpackFixed64");function ow(n){let e=[];if(n.id!==void 0){let t=n.id;e.push([1,P.string(t)])}if(n.timestamp!==void 0){let t=n.timestamp;e.push([5,P.int32(t)])}return A(e)}s(ow,"encodeBinary");function sw(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1001,P.string(t)])}return A(e)}s(sw,"encodeBinary");function rw(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([32,{type:V.LengthDelimited,value:sw(t)}])}return A(e)}s(rw,"encodeBinary");function aw(n){let e=[];if(n.uploadDate!==void 0){let t=n.uploadDate;e.push([1,P.int32(t)])}if(n.type!==void 0){let t=n.type;e.push([2,P.int32(t)])}if(n.duration!==void 0){let t=n.duration;e.push([3,P.int32(t)])}if(n.featuresHd!==void 0){let t=n.featuresHd;e.push([4,P.int32(t)])}if(n.featuresSubtitles!==void 0){let t=n.featuresSubtitles;e.push([5,P.int32(t)])}if(n.featuresCreativeCommons!==void 0){let t=n.featuresCreativeCommons;e.push([6,P.int32(t)])}if(n.features3d!==void 0){let t=n.features3d;e.push([7,P.int32(t)])}if(n.featuresLive!==void 0){let t=n.featuresLive;e.push([8,P.int32(t)])}if(n.featuresPurchased!==void 0){let t=n.featuresPurchased;e.push([9,P.int32(t)])}if(n.features4k!==void 0){let t=n.features4k;e.push([14,P.int32(t)])}if(n.features360!==void 0){let t=n.features360;e.push([15,P.int32(t)])}if(n.featuresLocation!==void 0){let t=n.featuresLocation;e.push([23,P.int32(t)])}if(n.featuresHdr!==void 0){let t=n.featuresHdr;e.push([25,P.int32(t)])}if(n.featuresVr180!==void 0){let t=n.featuresVr180;e.push([26,P.int32(t)])}return A(e)}s(aw,"encodeBinary");function uw(n){let e=[];if(n.sortBy!==void 0){let t=n.sortBy;e.push([1,P.int32(t)])}if(n.filters!==void 0){let t=n.filters;e.push([2,{type:V.LengthDelimited,value:aw(t)}])}if(n.noFilter!==void 0){let t=n.noFilter;e.push([19,P.int32(t)])}return A(e)}s(uw,"encodeBinary");function lw(n){let e=[];if(n.song!==void 0){let t=n.song;e.push([1,P.int32(t)])}if(n.video!==void 0){let t=n.video;e.push([2,P.int32(t)])}if(n.album!==void 0){let t=n.album;e.push([3,P.int32(t)])}if(n.artist!==void 0){let t=n.artist;e.push([4,P.int32(t)])}if(n.playlist!==void 0){let t=n.playlist;e.push([5,P.int32(t)])}return A(e)}s(lw,"encodeBinary");function cw(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([17,{type:V.LengthDelimited,value:lw(t)}])}return A(e)}s(cw,"encodeBinary");function dw(n){let e=[];if(n.filters!==void 0){let t=n.filters;e.push([2,{type:V.LengthDelimited,value:cw(t)}])}return A(e)}s(dw,"encodeBinary");function pw(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1,P.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([2,P.string(t)])}return A(e)}s(pw,"encodeBinary");function fw(n){let e=[];if(n.ids!==void 0){let t=n.ids;e.push([5,{type:V.LengthDelimited,value:pw(t)}])}return A(e)}s(fw,"encodeBinary");function hw(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([1,{type:V.LengthDelimited,value:fw(t)}])}if(n.number0!==void 0){let t=n.number0;e.push([2,P.int32(t)])}if(n.number1!==void 0){let t=n.number1;e.push([3,P.int32(t)])}return A(e)}s(hw,"encodeBinary");function mw(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([2,P.string(t)])}return A(e)}s(mw,"encodeBinary");function _w(n){let e=[];if(n.unkParam!==void 0){let t=n.unkParam;e.push([1,P.int32(t)])}return A(e)}s(_w,"encodeBinary");function vw(n){let e=[];if(n.commentId!==void 0){let t=n.commentId;e.push([2,P.string(t)])}if(n.unkopts!==void 0){let t=n.unkopts;e.push([4,{type:V.LengthDelimited,value:_w(t)}])}if(n.channelId!==void 0){let t=n.channelId;e.push([5,P.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([6,P.string(t)])}if(n.unkParam1!==void 0){let t=n.unkParam1;e.push([8,P.int32(t)])}if(n.unkParam2!==void 0){let t=n.unkParam2;e.push([9,P.int32(t)])}return A(e)}s(vw,"encodeBinary");function yw(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([4,P.string(t)])}if(n.sortBy!==void 0){let t=n.sortBy;e.push([6,P.int32(t)])}if(n.type!==void 0){let t=n.type;e.push([15,P.int32(t)])}return A(e)}s(yw,"encodeBinary");function bw(n){let e=[];if(n.unkToken!==void 0){let t=n.unkToken;e.push([1,P.string(t)])}if(n.repliesOpts!==void 0){let t=n.repliesOpts;e.push([3,{type:V.LengthDelimited,value:vw(t)}])}if(n.opts!==void 0){let t=n.opts;e.push([4,{type:V.LengthDelimited,value:yw(t)}])}if(n.page!==void 0){let t=n.page;e.push([5,P.int32(t)])}if(n.target!==void 0){let t=n.target;e.push([8,P.string(t)])}return A(e)}s(bw,"encodeBinary");function ww(n){let e=[];if(n.ctx!==void 0){let t=n.ctx;e.push([2,{type:V.LengthDelimited,value:mw(t)}])}if(n.unkParam!==void 0){let t=n.unkParam;e.push([3,P.int32(t)])}if(n.params!==void 0){let t=n.params;e.push([6,{type:V.LengthDelimited,value:bw(t)}])}return A(e)}s(ww,"encodeBinary");function gw(n){let e=[];if(n.index!==void 0){let t=n.index;e.push([1,P.int32(t)])}return A(e)}s(gw,"encodeBinary");function xw(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([2,P.string(t)])}if(n.params!==void 0){let t=n.params;e.push([5,{type:V.LengthDelimited,value:gw(t)}])}if(n.number!==void 0){let t=n.number;e.push([10,P.int32(t)])}return A(e)}s(xw,"encodeBinary");function Tw(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,P.string(t)])}return A(e)}s(Tw,"encodeBinary");function Iw(n){let e=[];if(n.comment!==void 0){let t=n.comment;e.push([1,{type:V.LengthDelimited,value:Tw(t)}])}return A(e)}s(Iw,"encodeBinary");function Sw(n){let e=[];if(n.commentId!==void 0){let t=n.commentId;e.push([2,P.string(t)])}if(n.params!==void 0){let t=n.params;e.push([3,{type:V.LengthDelimited,value:Iw(t)}])}if(n.targetLanguage!==void 0){let t=n.targetLanguage;e.push([4,P.string(t)])}return A(e)}s(Sw,"encodeBinary");function Ew(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,P.int32(t)])}if(n.unkNum!==void 0){let t=n.unkNum;e.push([2,P.int32(t)])}if(n.commentId!==void 0){let t=n.commentId;e.push([3,P.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([5,P.string(t)])}if(n.channelId!==void 0){let t=n.channelId;e.push([23,P.string(t)])}if(n.translateCommentParams!==void 0){let t=n.translateCommentParams;e.push([31,{type:V.LengthDelimited,value:Sw(t)}])}return A(e)}s(Ew,"encodeBinary");function kw(n){let e=[];if(n.index!==void 0){let t=n.index;e.push([1,P.int32(t)])}return A(e)}s(kw,"encodeBinary");function Cw(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1,P.string(t)])}if(n.prefId!==void 0){let t=n.prefId;e.push([2,{type:V.LengthDelimited,value:kw(t)}])}if(n.number0!==void 0){let t=n.number0;e.push([3,P.int32(t)])}if(n.number1!==void 0){let t=n.number1;e.push([4,P.int32(t)])}return A(e)}s(Cw,"encodeBinary");function Pw(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([16,P.int32(t)])}if(n.clientVersion!==void 0){let t=n.clientVersion;e.push([17,P.string(t)])}if(n.clientName!==void 0){let t=n.clientName;e.push([18,P.string(t)])}return A(e)}s(Pw,"encodeBinary");function Nw(n){let e=[];if(n.client!==void 0){let t=n.client;e.push([1,{type:V.LengthDelimited,value:Pw(t)}])}return A(e)}s(Nw,"encodeBinary");function Mw(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,P.string(t)])}return A(e)}s(Mw,"encodeBinary");function Vw(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,P.string(t)])}return A(e)}s(Vw,"encodeBinary");function Aw(n){let e=[];for(let t of n.list)e.push([1,P.string(t)]);return A(e)}s(Aw,"encodeBinary");function Rw(n){let e=[];if(n.id!==void 0){let t=n.id;e.push([1,P.int32(t)])}return A(e)}s(Rw,"encodeBinary");function Fw(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,P.string(t)])}return A(e)}s(Fw,"encodeBinary");function Ow(n){let e=[];if(n.imageData!==void 0){let t=n.imageData;e.push([1,P.bytes(t)])}return A(e)}s(Ow,"encodeBinary");function Lw(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,P.int32(t)])}if(n.thumbnail!==void 0){let t=n.thumbnail;e.push([3,{type:V.LengthDelimited,value:Ow(t)}])}return A(e)}s(Lw,"encodeBinary");function Dw(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,P.int32(t)])}return A(e)}s(Dw,"encodeBinary");function Bw(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([1,P.int32(t)])}if(n.choice!==void 0){let t=n.choice;e.push([2,P.int32(t)])}return A(e)}s(Bw,"encodeBinary");function jw(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([1,P.int32(t)])}if(n.choice!==void 0){let t=n.choice;e.push([2,P.int32(t)])}return A(e)}s(jw,"encodeBinary");function _0(n){let e=[];if(n.context!==void 0){let t=n.context;e.push([1,{type:V.LengthDelimited,value:Nw(t)}])}if(n.target!==void 0){let t=n.target;e.push([2,P.string(t)])}if(n.title!==void 0){let t=n.title;e.push([3,{type:V.LengthDelimited,value:Mw(t)}])}if(n.description!==void 0){let t=n.description;e.push([4,{type:V.LengthDelimited,value:Vw(t)}])}if(n.tags!==void 0){let t=n.tags;e.push([6,{type:V.LengthDelimited,value:Aw(t)}])}if(n.category!==void 0){let t=n.category;e.push([7,{type:V.LengthDelimited,value:Rw(t)}])}if(n.license!==void 0){let t=n.license;e.push([8,{type:V.LengthDelimited,value:Fw(t)}])}if(n.videoThumbnail!==void 0){let t=n.videoThumbnail;e.push([20,{type:V.LengthDelimited,value:Lw(t)}])}if(n.privacy!==void 0){let t=n.privacy;e.push([38,{type:V.LengthDelimited,value:Dw(t)}])}if(n.madeForKids!==void 0){let t=n.madeForKids;e.push([68,{type:V.LengthDelimited,value:Bw(t)}])}if(n.ageRestricted!==void 0){let t=n.ageRestricted;e.push([69,{type:V.LengthDelimited,value:jw(t)}])}return A(e)}s(_0,"encodeBinary");function Yw(n){let e=[];if(n.hashtag!==void 0){let t=n.hashtag;e.push([1,P.string(t)])}if(n.type!==void 0){let t=n.type;e.push([3,P.int32(t)])}return A(e)}s(Yw,"encodeBinary");function Uw(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([93,{type:V.LengthDelimited,value:Yw(t)}])}return A(e)}s(Uw,"encodeBinary");var dh=class{static encodeVisitorData(e,t){let i=ow({id:e,timestamp:t});return encodeURIComponent(Ot(i).replace(/\+/g,"-").replace(/\//g,"_"))}static encodeChannelAnalyticsParams(e){let t=rw({params:{channelId:e}});return encodeURIComponent(Ot(t))}static encodeSearchFilters(e){let t={all:void 0,hour:1,today:2,week:3,month:4,year:5},i={all:void 0,video:1,channel:2,playlist:3,movie:4},r={all:void 0,short:1,long:2,medium:3},a={relevance:void 0,rating:1,upload_date:2,view_count:3},l={hd:"featuresHd",subtitles:"featuresSubtitles",creative_commons:"featuresCreativeCommons","3d":"features3D",live:"featuresLive",purchased:"featuresPurchased","4k":"features4K",360:"features360",location:"featuresLocation",hdr:"featuresHdr",vr180:"featuresVr180"},h={};if(e?h.filters={}:h.noFilter=0,h.filters&&(e.upload_date&&(h.filters.uploadDate=t[e.upload_date]),e.type&&(h.filters.type=i[e.type]),e.duration&&(h.filters.duration=r[e.duration]),e.sort_by&&e.sort_by!=="relevance"&&(h.sortBy=a[e.sort_by]),e.features))for(let _ of e.features)h.filters[l[_]]=1;let v=uw(h);return encodeURIComponent(Ot(v))}static encodeMusicSearchFilters(e){var t;let i={filters:{type:{}}};e.type&&e.type!=="all"&&((t=i.filters)===null||t===void 0?void 0:t.type)&&(i.filters.type[e.type]=1);let r=dw(i);return encodeURIComponent(Ot(r))}static encodeMessageParams(e,t){let i=hw({params:{ids:{channelId:e,videoId:t}},number0:1,number1:4});return btoa(encodeURIComponent(Ot(i)))}static encodeCommentsSectionParams(e,t={}){let r=ww({ctx:{videoId:e},unkParam:6,params:{opts:{videoId:e,sortBy:{TOP_COMMENTS:0,NEWEST_FIRST:1}[t.sort_by||"TOP_COMMENTS"],type:t.type||2},target:"comments-section"}});return encodeURIComponent(Ot(r))}static encodeCommentParams(e){let t=xw({videoId:e,params:{index:0},number:7});return encodeURIComponent(Ot(t))}static encodeCommentActionParams(e,t={}){let i={type:e,commentId:t.comment_id||" ",videoId:t.video_id||" ",channelId:" ",unkNum:2};if(t.hasOwnProperty("text")){if(typeof t.target_language!="string")throw new Error("target_language must be a string");t.comment_id&&delete i.unkNum,i.translateCommentParams={params:{comment:{text:t.text}},commentId:t.comment_id||" ",targetLanguage:t.target_language}}let r=Ew(i);return encodeURIComponent(Ot(r))}static encodeNotificationPref(e,t){let i=Cw({channelId:e,prefId:{index:t},number0:0,number1:4});return encodeURIComponent(Ot(i))}static encodeVideoMetadataPayload(e,t){let i={context:{client:{unkparam:14,clientName:Gt.ANDROID.NAME,clientVersion:Gt.YTSTUDIO_ANDROID.VERSION}},target:e};if(Reflect.has(t,"title")&&(i.title={text:t.title||""}),Reflect.has(t,"description")&&(i.description={text:t.description||""}),Reflect.has(t,"license")&&(i.license={type:t.license||""}),Reflect.has(t,"tags")&&(i.tags={list:t.tags||[]}),Reflect.has(t,"category")&&(i.category={id:t.category||0}),Reflect.has(t,"privacy"))switch(t.privacy){case"PUBLIC":i.privacy={type:1};break;case"UNLISTED":i.privacy={type:2};break;case"PRIVATE":i.privacy={type:3};break;default:throw new Error("Invalid visibility option")}return Reflect.has(t,"made_for_kids")&&(i.madeForKids={unkparam:1,choice:t.made_for_kids?1:2}),Reflect.has(t,"age_restricted")&&(i.ageRestricted={unkparam:1,choice:t.age_restricted?1:2}),_0(i)}static encodeCustomThumbnailPayload(e,t){let i={context:{client:{unkparam:14,clientName:Gt.ANDROID.NAME,clientVersion:Gt.YTSTUDIO_ANDROID.VERSION}},target:e,videoThumbnail:{type:3,thumbnail:{imageData:t}}};return _0(i)}static encodeHashtag(e){let t=Uw({params:{hashtag:e,type:1}});return encodeURIComponent(Ot(t))}};s(dh,"Proto");var Oe=dh;var ph=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},$i=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},vS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},zt,Gr=class extends c{constructor(e){var t,i,r,a,l,h,v;super(),zt.set(this,void 0),this.content=new d(e.contentText),this.published=new d(e.publishedTimeText),this.author_is_channel_owner=e.authorIsChannelOwner,this.current_user_reply_thumbnail=S.fromResponse(e.currentUserReplyThumbnail),this.sponsor_comment_badge=f.parseItem(e.sponsorCommentBadge),this.paid_comment_chip=f.parseItem(e.paidCommentChipRenderer),this.author_badge=f.parseItem(e.authorCommentBadge,rh),this.author=new be(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),this.author_badge?[{metadataBadgeRenderer:(t=this.author_badge)===null||t===void 0?void 0:t.orig_badge}]:null,e.authorThumbnail),this.action_menu=f.parseItem(e.actionMenu),this.action_buttons=f.parseItem(e.actionButtons),this.comment_id=e.commentId,this.vote_status=e.voteStatus,this.vote_count=e.voteCount?new d(e.voteCount).toString():"0",this.reply_count=e.replyCount||0,this.is_liked=!!(!((r=(i=this.action_buttons)===null||i===void 0?void 0:i.like_button)===null||r===void 0)&&r.is_toggled),this.is_disliked=!!(!((l=(a=this.action_buttons)===null||a===void 0?void 0:a.dislike_button)===null||l===void 0)&&l.is_toggled),this.is_hearted=!!(!((v=(h=this.action_buttons)===null||h===void 0?void 0:h.creator_heart)===null||v===void 0)&&v.is_hearted),this.is_pinned=!!e.pinnedCommentBadge,this.is_member=!!e.sponsorCommentBadge}like(){var e;return ph(this,void 0,void 0,function*(){if(!$i(this,zt,"f"))throw new x("An active caller must be provide to perform this operation.");let t=(e=this.action_buttons)===null||e===void 0?void 0:e.like_button;if(!t)throw new x("Like button was not found.",{comment_id:this.comment_id});if(t.is_toggled)throw new x("This comment is already liked",{comment_id:this.comment_id});return yield t.endpoint.call($i(this,zt,"f"),{parse:!1})})}dislike(){var e;return ph(this,void 0,void 0,function*(){if(!$i(this,zt,"f"))throw new x("An active caller must be provide to perform this operation.");let t=(e=this.action_buttons)===null||e===void 0?void 0:e.dislike_button;if(!t)throw new x("Dislike button was not found.",{comment_id:this.comment_id});if(t.is_toggled)throw new x("This comment is already disliked",{comment_id:this.comment_id});return yield t.endpoint.call($i(this,zt,"f"),{parse:!1})})}reply(e){var t,i,r;return ph(this,void 0,void 0,function*(){if(!$i(this,zt,"f"))throw new x("An active caller must be provide to perform this operation.");if(!(!((t=this.action_buttons)===null||t===void 0)&&t.reply_button))throw new x("Cannot reply to another reply. Try mentioning the user instead.",{comment_id:this.comment_id});let a=(i=this.action_buttons)===null||i===void 0?void 0:i.reply_button;if(!(!((r=a.endpoint)===null||r===void 0)&&r.dialog))throw new x("Reply button endpoint did not have a dialog.");let h=a.endpoint.dialog.item().as(ah).reply_button;if(!h)throw new x("Reply button was not found in the dialog.",{comment_id:this.comment_id});if(!h.endpoint)throw new x("Reply button endpoint was not found.",{comment_id:this.comment_id});return yield h.endpoint.call($i(this,zt,"f"),{commentText:e})})}translate(e){var t,i,r,a,l,h;return ph(this,void 0,void 0,function*(){if(!$i(this,zt,"f"))throw new x("An active caller must be provide to perform this operation.");let _={text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:e,comment_id:this.comment_id},p=Oe.encodeCommentActionParams(22,_),b=yield $i(this,zt,"f").execute("comment/perform_comment_action",{action:p,client:"ANDROID"}),I=(i=(t=b.data.frameworkUpdates)===null||t===void 0?void 0:t.entityBatchUpdate)===null||i===void 0?void 0:i.mutations,C=(h=(l=(a=(r=I==null?void 0:I[0])===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.commentEntityPayload)===null||l===void 0?void 0:l.translatedContent)===null||h===void 0?void 0:h.content;return Object.assign(Object.assign({},b),{content:C})})}setActions(e){vS(this,zt,e,"f")}};s(Gr,"Comment");zt=new WeakMap;Gr.type="Comment";var Vo=Gr;var Jr=class extends c{constructor(e){super(),this.like_button=f.parseItem(e.likeButton),this.dislike_button=f.parseItem(e.dislikeButton),this.reply_button=f.parseItem(e.replyButton),this.creator_heart=f.parseItem(e.creatorHeart)}};s(Jr,"CommentActionButtons");Jr.type="CommentActionButtons";var Ww=Jr;var Hr=class extends c{constructor(e){super(),this.editable_text=new d(e.editableText),this.author_thumbnail=S.fromResponse(e.authorThumbnail),this.submit_button=f.parseItem(e.submitButton),this.cancel_button=f.parseItem(e.cancelButton),this.placeholder=new d(e.placeholderText),this.emoji_button=f.parseItem(e.emojiButton),this.emoji_picker=f.parseItem(e.emojiPicker)}};s(Hr,"CommentDialog");Hr.type="CommentDialog";var Gw=Hr;var zr=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents),this.view_replies=f.parseItem(e.viewReplies),this.hide_replies=f.parseItem(e.hideReplies),this.view_replies_creator_thumbnail=S.fromResponse(e.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!e.viewRepliesCreatorThumbnail}};s(zr,"CommentReplies");zr.type="CommentReplies";var Jw=zr;var Kr=class extends c{constructor(e){super(),e.header&&(this.header=new d(e.headerText)),e.commentCount&&(this.comment_count=new d(e.commentCount)),(e.teaserAvatar||e.simpleboxAvatar)&&(this.teaser_avatar=S.fromResponse(e.teaserAvatar||e.simpleboxAvatar)),e.teaserContent&&(this.teaser_content=new d(e.teaserContent)),e.simpleboxPlaceholder&&(this.simplebox_placeholder=new d(e.simpleboxPlaceholder))}};s(Kr,"CommentsEntryPointHeader");Kr.type="CommentsEntryPointHeader";var fh=Kr;var qr=class extends c{constructor(e){var t;super(),this.title=new d(e.titleText),this.count=new d(e.countText),this.comments_count=new d(e.commentsCount),this.create_renderer=f.parseItem(e.createRenderer),this.sort_menu=f.parseItem(e.sortMenu),this.custom_emojis=((t=e.customEmojis)===null||t===void 0?void 0:t.map(i=>({emoji_id:i.emojiId,shortcuts:i.shortcuts,search_terms:i.searchTerms,image:S.fromResponse(i.image),is_custom_emoji:i.isCustomEmoji})))||null}};s(qr,"CommentsHeader");qr.type="CommentsHeader";var hh=qr;var $r=class extends c{constructor(e){super(),this.submit_button=f.parseItem(e.submitButton),this.cancel_button=f.parseItem(e.cancelButton),this.author_thumbnails=S.fromResponse(e.authorThumbnail),this.placeholder=new d(e.placeholderText),this.avatar_size=e.avatarSize}};s($r,"CommentSimplebox");$r.type="CommentSimplebox";var mh=$r;var Xr=class extends c{constructor(e){super(),this.trigger=e.trigger,e.button&&(this.button=f.parseItem(e.button)),this.endpoint=new T(e.continuationEndpoint)}};s(Xr,"ContinuationItem");Xr.type="ContinuationItem";var it=Xr;var Hw=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ri=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},v0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Fi,Cn,Qr=class extends c{constructor(e){super(),Fi.set(this,void 0),Cn.set(this,void 0),this.comment=f.parseItem(e.comment,Vo),this.comment_replies_data=f.parseItem(e.replies),this.is_moderated_elq_comment=e.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}getReplies(){var e,t;return Hw(this,void 0,void 0,function*(){if(!Ri(this,Fi,"f"))throw new x("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new x("This comment has no replies.",{comment_id:(e=this.comment)===null||e===void 0?void 0:e.comment_id});let i=(t=this.comment_replies_data.contents)===null||t===void 0?void 0:t.firstOfType(it);if(!i)throw new x("Replies continuation not found.");let r=yield i.endpoint.call(Ri(this,Fi,"f"),{parse:!0});if(!r.on_response_received_endpoints_memo)throw new x("Unexpected response.",r);return this.replies=de(r.on_response_received_endpoints_memo.getType(Vo).map(a=>(a.setActions(Ri(this,Fi,"f")),a))),v0(this,Cn,r==null?void 0:r.on_response_received_endpoints_memo.getType(it).first(),"f"),this})}getContinuation(){var e,t;return Hw(this,void 0,void 0,function*(){if(!this.replies)throw new x("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!Ri(this,Cn,"f"))throw new x("Continuation not found.");if(!Ri(this,Fi,"f"))throw new x("Actions instance not set for this thread.");let i=(e=Ri(this,Cn,"f").button)===null||e===void 0?void 0:e.as(G);if(!i)throw new x('"Load more" button not found.');let r=yield i.endpoint.call(Ri(this,Fi,"f"),{parse:!0});if(!r.on_response_received_endpoints_memo)throw new x("Unexpected response.",r);return this.replies=de(r.on_response_received_endpoints_memo.getType(Vo).map(a=>(a.setActions(Ri(this,Fi,"f")),a))),v0(this,Cn,(t=r.on_response_received_endpoints_memo.getType(it))===null||t===void 0?void 0:t[0],"f"),this})}get has_continuation(){if(!this.replies)throw new x("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!Ri(this,Cn,"f")}setActions(e){v0(this,Fi,e,"f")}};s(Qr,"CommentThread");Fi=new WeakMap,Cn=new WeakMap;Qr.type="CommentThread";var _h=Qr;var Zr=class extends c{constructor(e){var t,i,r;super(),this.creator_thumbnail=S.fromResponse(e.creatorThumbnail),this.heart_icon_type=(t=e.heartIcon)===null||t===void 0?void 0:t.iconType,this.heart_color={basic_color_palette_data:{foreground_title_color:(r=(i=e.heartColor)===null||i===void 0?void 0:i.basicColorPaletteData)===null||r===void 0?void 0:r.foregroundTitleColor}},this.hearted_tooltip=e.heartedTooltip,this.is_hearted=e.isHearted,this.is_enabled=e.isEnabled,this.kennedy_heart_color_string=e.kennedyHeartColorString}};s(Zr,"CreatorHeart");Zr.type="CreatorHeart";var zw=Zr;var ea=class extends c{constructor(e){super(),this.id=e.id,this.categories=f.parseArray(e.categories),this.category_buttons=f.parseArray(e.categoryButtons),this.search_placeholder=new d(e.searchPlaceholderText),this.search_no_results=new d(e.searchNoResultsText),this.pick_skin_tone=new d(e.pickSkinToneText),this.clear_search_label=e.clearSearchLabel,this.skin_tone_generic_label=e.skinToneGenericLabel,this.skin_tone_light_label=e.skinToneLightLabel,this.skin_tone_medium_light_label=e.skinToneMediumLightLabel,this.skin_tone_medium_label=e.skinToneMediumLabel,this.skin_tone_medium_dark_label=e.skinToneMediumDarkLabel,this.skin_tone_dark_label=e.skinToneDarkLabel}};s(ea,"EmojiPicker");ea.type="EmojiPicker";var Kw=ea;var ta=class extends c{constructor(e){var t,i,r;super(),this.text=new d(e.chipText),this.color_pallette={background_color:(t=e.chipColorPalette)===null||t===void 0?void 0:t.backgroundColor,foreground_title_color:(i=e.chipColorPalette)===null||i===void 0?void 0:i.foregroundTitleColor},this.icon_type=(r=e.chipIcon)===null||r===void 0?void 0:r.iconType}};s(ta,"PdgCommentChip");ta.type="PdgCommentChip";var qw=ta;var ia=class extends c{constructor(e){super(),this.custom_badge=S.fromResponse(e.customBadge),this.tooltip=e.tooltip}};s(ia,"SponsorCommentBadge");ia.type="SponsorCommentBadge";var $w=ia;var na=class extends c{constructor(e){super(),this.title=new d(e.title),this.channel_id=e.channelId,this.thumbnail=S.fromResponse(e.thumbnail),this.display_name=new d(e.displayName),this.video_count=new d(e.videoCountText),this.subscriber_count=new d(e.subscriberCountText),this.endpoint=new T(e.navigationEndpoint),this.tv_banner=S.fromResponse(e.tvBanner),this.menu=f.parseItem(e.menu)}};s(na,"CompactChannel");na.type="CompactChannel";var Xw=na;var oa=class extends c{constructor(e){super(),this.title=new d(e.title).toString(),this.endpoint=new T(e.navigationEndpoint),this.style=e.style}};s(oa,"CompactLink");oa.type="CompactLink";var Ao=oa;var vh=class extends be{constructor(e,t,i){super(e,t,i),delete this.badges,delete this.is_verified,delete this.is_verified_artist}};s(vh,"PlaylistAuthor");var ri=vh;var sa=class extends c{constructor(e){var t;super(),this.id=e.playlistId,this.title=new d(e.title),this.author=!((t=e.shortBylineText)===null||t===void 0)&&t.simpleText?new d(e.shortBylineText):new ri(e.longBylineText,e.ownerBadges,null),this.thumbnails=S.fromResponse(e.thumbnail||{thumbnails:e.thumbnails.map(i=>i.thumbnails).flat(1)}),this.video_count=new d(e.thumbnailText),this.video_count_short=new d(e.videoCountShortText),this.first_videos=f.parseArray(e.videos),this.share_url=e.shareUrl||null,this.menu=f.parseItem(e.menu),this.badges=f.parseArray(e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays)}};s(sa,"Playlist");sa.type="Playlist";var ai=sa;var ra=class extends ai{constructor(e){super(e)}};s(ra,"CompactMix");ra.type="CompactMix";var Qw=ra;var aa=class extends ai{constructor(e){super(e)}};s(aa,"CompactPlaylist");aa.type="CompactPlaylist";var Zw=aa;var ua=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.video_count=new d(e.videoCountText),this.endpoint=new T(e.navigationEndpoint),this.thumbnail=S.fromResponse(e.thumbnail)}};s(ua,"CompactStation");ua.type="CompactStation";var eg=ua;var la=class extends c{constructor(e){super(),e!=null&&e.icon&&(this.icon_type=e.icon.iconType),e!=null&&e.style&&(this.style=e.style),e!=null&&e.label&&(this.label=e.label),((e==null?void 0:e.tooltip)||(e==null?void 0:e.iconTooltip))&&(this.tooltip=e.tooltip||e.iconTooltip)}};s(la,"MetadataBadge");la.type="MetadataBadge";var we=la;var ca=class extends c{constructor(e){super(),this.id=e.videoId,this.thumbnails=S.fromResponse(e.thumbnail)||null,this.rich_thumbnail=e.richThumbnail&&f.parse(e.richThumbnail),this.title=new d(e.title),this.author=new be(e.longBylineText,e.ownerBadges,e.channelThumbnail),this.view_count=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText),this.published=new d(e.publishedTimeText),this.badges=f.parseArray(e.badges,we),this.duration={text:new d(e.lengthText).toString(),seconds:ut(new d(e.lengthText).toString())},this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.endpoint=new T(e.navigationEndpoint),this.menu=f.parseItem(e.menu)}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some(e=>e.label==="Fundraiser")}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})}get is_new(){return this.badges.some(e=>e.label==="New")}get is_premiere(){return this.badges.some(e=>e.style==="PREMIERE")}};s(ca,"CompactVideo");ca.type="CompactVideo";var yh=ca;var da=class extends c{constructor(e){super(),this.title=new d(e.title),this.confirm_button=f.parseItem(e.confirmButton,G),this.cancel_button=f.parseItem(e.cancelButton,G),this.dialog_messages=e.dialogMessages.map(t=>new d(t))}};s(da,"ConfirmDialog");da.type="ConfirmDialog";var tg=da;var pa=class extends c{constructor(e){super(),this.copy_button=f.parseItem(e.copyButton,G),this.short_url=e.shortUrl,this.style=e.style}};s(pa,"CopyLink");pa.type="CopyLink";var bh=pa;var fa=class extends c{constructor(e){super(),this.player_bar=f.parseItem(e.playerBar),this.player_bar_action_button=f.parseItem(e.playerBarActionButton)}};s(fa,"DecoratedPlayerBar");fa.type="DecoratedPlayerBar";var ig=fa;var ha=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.endpoint=new T(e.navigationEndpoint),this.large_form_factor_background_thumbnail=f.parseItem(e.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=f.parseItem(e.smallFormFactorBackgroundThumbnail),this.scrim_color_values=e.scrimColorValues,this.min_panel_display_duration_ms=e.minPanelDisplayDurationMs,this.min_video_play_duration_ms=e.minVideoPlayDurationMs,this.scrim_duration=e.scrimDuration,this.metadata_order=e.metadataOrder,this.panel_layout=e.panelLayout}};s(ha,"DefaultPromoPanel");ha.type="DefaultPromoPanel";var ng=ha;var ma=class extends c{constructor(e){super(),this.text=new d(e.didYouMean).toString(),this.corrected_query=new d(e.correctedQuery),this.endpoint=new T(e.navigationEndpoint||e.correctedQueryEndpoint)}};s(ma,"DidYouMean");ma.type="DidYouMean";var wh=ma;var _a=class extends c{constructor(e){super(),this.style=e.style,this.size=e.size,this.endpoint=new T(e.command),this.target_id=e.targetId}};s(_a,"DownloadButton");_a.type="DownloadButton";var og=_a;var Pn=class{constructor(e){var t,i;this.text=((i=(t=e.type.textType)===null||t===void 0?void 0:t.text)===null||i===void 0?void 0:i.content)||null,this.properties=e.properties,e.childElements&&(this.child_elements=e.childElements.map(r=>new Pn(r)))}};s(Pn,"ChildElement");Pn.type="ChildElement";var gh=Pn;var Nn=class extends c{constructor(e){var t,i,r;if(super(),Reflect.has(e,"elementRenderer"))return f.parseItem(e,Nn);let a=e.newElement.type.componentType;this.model=f.parse(a==null?void 0:a.model),!((t=e.newElement)===null||t===void 0)&&t.childElements&&(this.child_elements=((r=(i=e.newElement)===null||i===void 0?void 0:i.childElements)===null||r===void 0?void 0:r.map(l=>new gh(l)))||null)}};s(Nn,"Element");Nn.type="Element";var Ro=Nn;var va=class extends c{constructor(e){super(),this.title=new d(e.title),this.first_option=f.parse(e.firstOption),this.menu=f.parse(e.menu)}};s(va,"EmergencyOnebox");va.type="EmergencyOnebox";var sg=va;var ya=class extends c{constructor(e){super(),this.category_id=e.categoryId,this.title=new d(e.title),this.emoji_ids=e.emojiIds,this.image_loading_lazy=!!e.imageLoadingLazy,this.category_type=e.categoryType}};s(ya,"EmojiPickerCategory");ya.type="EmojiPickerCategory";var rg=ya;var ba=class extends c{constructor(e){var t;super(),this.category_id=e.categoryId,this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,this.tooltip=e.tooltip}};s(ba,"EmojiPickerCategoryButton");ba.type="EmojiPickerCategoryButton";var ag=ba;var wa=class extends c{constructor(e){super(),this.category_id=e.categoryId,this.title=new d(e.title),this.upsell=new d(e.upsell),this.emoji_tooltip=e.emojiTooltip,this.endpoint=new T(e.command),this.emoji_ids=e.emojiIds}};s(wa,"EmojiPickerUpsellCategory");wa.type="EmojiPickerUpsellCategory";var ug=wa;var ga=class extends c{constructor(e){super(),this.elements=f.parseArray(e.elements),this.start_ms=e.startMs}};s(ga,"Endscreen");ga.type="Endscreen";var lg=ga;var xa=class extends c{constructor(e){super(),this.style=`${e.style}`,this.title=new d(e.title),this.endpoint=new T(e.endpoint),e.image&&(this.image=S.fromResponse(e.image)),e.icon&&(this.icon=S.fromResponse(e.icon)),e.metadata&&(this.metadata=new d(e.metadata)),e.callToAction&&(this.call_to_action=new d(e.callToAction)),e.hovercardButton&&(this.hovercard_button=f.parseItem(e.hovercardButton)),e.isSubscribe&&(this.is_subscribe=!!e.isSubscribe),e.playlistLength&&(this.playlist_length=new d(e.playlistLength)),this.thumbnail_overlays=e.thumbnailOverlays?f.parseArray(e.thumbnailOverlays):void 0,this.left=parseFloat(e.left),this.width=parseFloat(e.width),this.top=parseFloat(e.top),this.aspect_ratio=parseFloat(e.aspectRatio),this.start_ms=parseFloat(e.startMs),this.end_ms=parseFloat(e.endMs),this.id=e.id}};s(xa,"EndscreenElement");xa.type="EndscreenElement";var cg=xa;var Ta=class extends c{constructor(e){super(),this.id=e.playlistId,this.title=new d(e.title),this.author=new d(e.longBylineText),this.endpoint=new T(e.navigationEndpoint),this.thumbnails=S.fromResponse(e.thumbnail),this.video_count=new d(e.videoCountText)}};s(Ta,"EndScreenPlaylist");Ta.type="EndScreenPlaylist";var xh=Ta;var Ia=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parse(e.thumbnailOverlays),this.author=new be(e.shortBylineText,e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.short_view_count=new d(e.shortViewCountText),this.badges=f.parse(e.badges),this.duration={text:new d(e.lengthText).toString(),seconds:e.lengthInSeconds}}};s(Ia,"EndScreenVideo");Ia.type="EndScreenVideo";var Th=Ia;var Sa=class extends c{constructor(e){super(),this.header={collapsed_title:new d(e.header.collapsedTitle),collapsed_thumbnail:S.fromResponse(e.header.collapsedThumbnail),collapsed_label:new d(e.header.collapsedLabel),expanded_title:new d(e.header.expandedTitle)},this.expanded_content=f.parseItem(e.expandedContent),this.expand_button=f.parseItem(e.expandButton),this.collapse_button=f.parseItem(e.collapseButton)}};s(Sa,"ExpandableMetadata");Sa.type="ExpandableMetadata";var dg=Sa;var Ea=class extends c{constructor(e){super(),this.title=e.title,this.endpoint=new T(e.endpoint),this.selected=e.selected,this.content=e.content?f.parseItem(e.content):null}};s(Ea,"ExpandableTab");Ea.type="ExpandableTab";var Fo=Ea;var ka=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(ka,"ExpandedShelfContents");ka.type="ExpandedShelfContents";var pg=ka;var Ca=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents,De)}};s(Ca,"FeedFilterChipBar");Ca.type="FeedFilterChipBar";var Oi=Ca;var Pa=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Pa,"FeedTabbedHeader");Pa.type="FeedTabbedHeader";var Ih=Pa;var Na=class extends c{constructor(e){super(),this.game=f.parseItem(e.game)}};s(Na,"GameCard");Na.type="GameCard";var fg=Na;var Ma=class extends c{constructor(e){super(),this.title=new d(e.title),this.box_art=S.fromResponse(e.boxArt),this.box_art_overlay_text=new d(e.boxArtOverlayText),this.endpoint=new T(e.endpoint),this.is_official_box_art=e.isOfficialBoxArt}};s(Ma,"GameDetails");Ma.type="GameDetails";var hg=Ma;var Va=class extends c{constructor(e){var t,i,r;super(),this.items=f.parseArray(e.items),e.header&&(this.header=f.parse(e.header)),e.isCollapsible&&(this.is_collapsible=e.isCollapsible),e.visibleRowCount&&(this.visible_row_count=e.visibleRowCount),e.targetId&&(this.target_id=e.targetId),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||null}get contents(){return this.items}};s(Va,"Grid");Va.type="Grid";var Mn=Va;var Aa=class extends c{constructor(e){super(),this.id=e.channelId,this.author=new be(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscribers=new d(e.subscriberCountText),this.video_count=new d(e.videoCountText),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parse(e.subscribeButton)}};s(Aa,"GridChannel");Aa.type="GridChannel";var Sh=Aa;var Ra=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Ra,"GridHeader");Ra.type="GridHeader";var mg=Ra;var Fa=class extends c{constructor(e){var t;super(),this.id=e.playlistId,this.title=new d(e.title),e.shortBylineText&&(this.author=new ri(e.shortBylineText,e.ownerBadges)),this.badges=f.parse(e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.view_playlist=new ko(e.viewPlaylistText),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_renderer=f.parse(e.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...((t=e.sidebarThumbnails)===null||t===void 0?void 0:t.map(i=>S.fromResponse(i)))||[])||null,this.video_count=new d(e.thumbnailText),this.video_count_short=new d(e.videoCountShortText)}};s(Fa,"GridPlaylist");Fa.type="GridPlaylist";var Eh=Fa;var Oa=class extends c{constructor(e){var t;super();let i=(t=e.thumbnailOverlays.find(r=>r.hasOwnProperty("thumbnailOverlayTimeStatusRenderer")))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.rich_thumbnail=e.richThumbnail&&f.parse(e.richThumbnail),this.published=new d(e.publishedTimeText),this.duration=e.lengthText?new d(e.lengthText):i!=null&&i.text?new d(i.text):null,this.author=e.shortBylineText&&new be(e.shortBylineText,e.ownerBadges),this.views=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText),this.endpoint=new T(e.navigationEndpoint),this.menu=f.parseItem(e.menu)}};s(Oa,"GridVideo");Oa.type="GridVideo";var kh=Oa;var La=class extends c{constructor(e){super(),this.hashtag=new d(e.hashtag),this.hashtag_info=new d(e.hashtagInfoText)}};s(La,"HashtagHeader");La.type="HashtagHeader";var Ch=La;var Da=class extends c{constructor(e){super(),this.max_height_dp=e.maxHeightDp,this.min_height_dp=e.minHeightDp,this.show_hide_animation_duration_millis=e.showHideAnimationDurationMillis,this.heat_markers=f.parseArray(e.heatMarkers),this.heat_markers_decorations=f.parseArray(e.heatMarkersDecorations)}};s(Da,"Heatmap");Da.type="Heatmap";var _g=Da;var Ba=class extends c{constructor(e){super(),this.time_range_start_millis=e.timeRangeStartMillis,this.marker_duration_millis=e.markerDurationMillis,this.heat_marker_intensity_score_normalized=e.heatMarkerIntensityScoreNormalized}};s(Ba,"HeatMarker");Ba.type="HeatMarker";var vg=Ba;var ja=class{constructor(e){e.thumbnail&&(this.thumbnail={image:e.thumbnail.image.sources,endpoint:new T(e.thumbnail.onTap),on_long_press_endpoint:new T(e.thumbnail.onLongPress),content_mode:e.thumbnail.contentMode,crop_options:e.thumbnail.cropOptions}),this.background_image={image:e.backgroundImage.image.sources,gradient_image:e.backgroundImage.gradientImage.sources},this.strapline=e.strapline,this.title=e.title,this.description=e.description,this.cta={icon_name:e.cta.iconName,title:e.cta.title,endpoint:new T(e.cta.onTap),accessibility_text:e.cta.accessibilityText,state:e.cta.state},this.text_on_tap_endpoint=new T(e.textOnTap)}};s(ja,"Panel");ja.type="Panel";var Ya=class extends c{constructor(e){super(),this.panels=e.highlightsCarousel.panels.map(t=>new ja(t))}};s(Ya,"HighlightsCarousel");Ya.type="HighlightsCarousel";var Ua=Ya;var Wa=class extends c{constructor(e){super(),this.suggestion=new d(e.suggestion),this.endpoint=new T(e.navigationEndpoint),this.icon_type=e.icon.iconType,e.serviceEndpoint&&(this.service_endpoint=new T(e.serviceEndpoint))}};s(Wa,"SearchSuggestion");Wa.type="SearchSuggestion";var Ph=Wa;var Ga=class extends Ph{constructor(e){super(e)}};s(Ga,"HistorySuggestion");Ga.type="HistorySuggestion";var yg=Ga;var Ja=class extends c{constructor(e){super(),this.cards=f.parseArray(e.cards),this.header=f.parseItem(e.header),this.previous_button=f.parseItem(e.previousButton,G),this.next_button=f.parseItem(e.nextButton,G)}};s(Ja,"HorizontalCardList");Ja.type="HorizontalCardList";var Nh=Ja;var Ha=class extends c{constructor(e){super(),this.visible_item_count=e.visibleItemCount,this.items=f.parseArray(e.items)}get contents(){return this.items}};s(Ha,"HorizontalList");Ha.type="HorizontalList";var bg=Ha;var za=class extends c{constructor(e){var t;super(),this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,e.tooltip&&(this.tooltip=new d(e.tooltip).toString()),this.endpoint=new T(e.navigationEndpoint)}};s(za,"IconLink");za.type="IconLink";var Mh=za;var Ka=class extends c{constructor(e){super(),this.states=e.states.map(t=>({id:t.stateId,next_id:t.nextStateId,state:f.parse(t.state)})),this.current_state_id=e.currentStateId,this.target_id=e.targetId}};s(Ka,"SubscriptionNotificationToggleButton");Ka.type="SubscriptionNotificationToggleButton";var Vh=Ka;var qa=class extends c{constructor(e){var t,i;super(),this.title=new d(e.buttonText),this.subscribed=e.subscribed,this.enabled=e.enabled,this.item_type=e.type,this.channel_id=e.channelId,this.show_preferences=e.showPreferences,this.subscribed_text=new d(e.subscribedButtonText),this.unsubscribed_text=new d(e.unsubscribedButtonText),this.notification_preference_button=f.parseItem(e.notificationPreferenceButton,Vh),this.endpoint=new T(((t=e.serviceEndpoints)===null||t===void 0?void 0:t[0])||((i=e.onSubscribeEndpoints)===null||i===void 0?void 0:i[0]))}};s(qa,"SubscribeButton");qa.type="SubscribeButton";var Lt=qa;var $a=class extends c{constructor(e){super(),this.header_type=e.type,this.title=new d(e.title),this.description=new d(e.description),this.metadata=new d(e.metadata),this.badges=f.parseArray(e.badges,we),this.box_art=S.fromResponse(e.boxArt),this.banner=S.fromResponse(e.banner),this.buttons=f.parseArray(e.buttons,[Lt,G]),this.auto_generated=new d(e.autoGenerated)}};s($a,"InteractiveTabbedHeader");$a.type="InteractiveTabbedHeader";var Ah=$a;var Xa=class extends c{constructor(e){var t,i,r;super(),this.header=f.parseItem(e.header),this.contents=f.parse(e.contents,!0),(e.targetId||e.sectionIdentifier)&&(this.target_id=(e==null?void 0:e.target_id)||(e==null?void 0:e.sectionIdentifier)),e.continuations&&(this.continuation=(r=(i=(t=e.continuations)===null||t===void 0?void 0:t.at(0))===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)}};s(Xa,"ItemSection");Xa.type="ItemSection";var Ve=Xa;var Qa=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Qa,"ItemSectionHeader");Qa.type="ItemSectionHeader";var wg=Qa;var Za=class extends c{constructor(e){super(),this.title=new d(e.title),this.selected=e.selected||!1,this.endpoint=new T(e.endpoint)}};s(Za,"ItemSectionTab");Za.type="Tab";var Rh=Za;var eu=class extends c{constructor(e){super(),this.title=new d(e.title),this.tabs=f.parseArray(e.tabs,Rh),e.endItems&&(this.end_items=f.parseArray(e.endItems))}};s(eu,"ItemSectionTabbedHeader");eu.type="ItemSectionTabbedHeader";var gg=eu;var tu=class extends c{constructor(e){var t;super(),this.target={video_id:e.target.videoId},this.like_status=e.likeStatus,this.likes_allowed=e.likesAllowed,e.serviceEndpoints&&(this.endpoints=(t=e.serviceEndpoints)===null||t===void 0?void 0:t.map(i=>new T(i)))}};s(tu,"LikeButton");tu.type="LikeButton";var xg=tu;var iu=class extends c{constructor(e){var t,i;super(),this.header=f.parse(e.header),this.initial_display_state=e.initialDisplayState,this.continuation=(i=(t=e.continuations[0])===null||t===void 0?void 0:t.reloadContinuationData)===null||i===void 0?void 0:i.continuation,this.client_messages={reconnect_message:new d(e.clientMessages.reconnectMessage),unable_to_reconnect_message:new d(e.clientMessages.unableToReconnectMessage),fatal_error:new d(e.clientMessages.fatalError),reconnected_message:new d(e.clientMessages.reconnectedMessage),generic_error:new d(e.clientMessages.genericError)},this.is_replay=e.isReplay||!1}};s(iu,"LiveChat");iu.type="LiveChat";var Fh=iu;var nu=class extends c{constructor(e){super(),this.banner=f.parseItem(e.bannerRenderer)}};s(nu,"AddBannerToLiveChatCommand");nu.type="AddBannerToLiveChatCommand";var Tg=nu;var ou=class extends c{constructor(e){super(),this.item=f.parseItem(e.item),this.client_id=e.clientId||null}};s(ou,"AddChatItemAction");ou.type="AddChatItemAction";var Oh=ou;var su=class extends c{constructor(e){super(),this.item=f.parseItem(e.item),this.duration_sec=e.durationSec}};s(su,"AddLiveChatTickerItemAction");su.type="AddLiveChatTickerItemAction";var Ig=su;var ru=class extends c{constructor(e){super(),this.client_assigned_id=e.clientAssignedId}};s(ru,"DimChatItemAction");ru.type="DimChatItemAction";var Sg=ru;var au=class extends c{constructor(e){super(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.moderation_buttons=f.parseArray(e.moderationButtons,[G]),this.auto_moderated_item=f.parseItem(e.autoModeratedItem),this.header_text=new d(e.headerText),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};s(au,"LiveChatAutoModMessage");au.type="LiveChatAutoModMessage";var Eg=au;var uu=class extends c{constructor(e){super(),this.header=f.parseItem(e.header),this.contents=f.parseItem(e.contents),this.action_id=e.actionId,this.viewer_is_creator=e.viewerIsCreator,this.target_id=e.targetId,this.is_stackable=e.isStackable,this.background_type=e.backgroundType}};s(uu,"LiveChatBanner");uu.type="LiveChatBanner";var kg=uu;var lu=class extends c{constructor(e){var t;super(),this.text=new d(e.text).toString(),this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,this.context_menu_button=f.parseItem(e.contextMenuButton)}};s(lu,"LiveChatBannerHeader");lu.type="LiveChatBannerHeader";var Cg=lu;var cu=class extends c{constructor(e){super(),this.poll_question=new d(e.pollQuestion),this.author_photo=S.fromResponse(e.authorPhoto),this.choices=e.pollChoices.map(t=>({option_id:t.pollOptionId,text:new d(t.text).toString()})),this.collapsed_state_entity_key=e.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=e.liveChatPollStateEntityKey,this.context_menu_button=f.parseItem(e.contextMenuButton)}};s(cu,"LiveChatBannerPoll");cu.type="LiveChatBannerPoll";var Pg=cu;var du=class extends we{constructor(e){super(e),this.custom_thumbnail=e.customThumbnail?S.fromResponse(e.customThumbnail):null}};s(du,"LiveChatAuthorBadge");du.type="LiveChatAuthorBadge";var Le=du;var pu=class extends c{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.header_subtext=new d(e.headerSubtext),this.author={id:e.authorExternalChannelId,name:new d(e==null?void 0:e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let t=f.parseArray(e.authorBadges);this.author.badges=t,this.author.is_moderator=t?t.some(i=>i.icon_type=="MODERATOR"):null,this.author.is_verified=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.menu_endpoint=new T(e.contextMenuEndpoint)}};s(pu,"LiveChatMembershipItem");pu.type="LiveChatMembershipItem";var Ng=pu;var fu=class extends c{constructor(e){super(),this.message=new d(e.message),this.author={id:e.authorExternalChannelId,name:new d(e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let t=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=t,this.author.is_moderator=t?t.some(i=>i.icon_type=="MODERATOR"):null,this.author.is_verified=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.header_background_color=e.headerBackgroundColor,this.header_text_color=e.headerTextColor,this.body_background_color=e.bodyBackgroundColor,this.body_text_color=e.bodyTextColor,this.purchase_amount=new d(e.purchaseAmountText).toString(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_text=new d(e.timestampText).toString(),this.id=e.id}};s(fu,"LiveChatPaidMessage");fu.type="LiveChatPaidMessage";var Mg=fu;var hu=class extends c{constructor(e){super(),this.id=e.id,this.author={id:e.authorExternalChannelId,name:new d(e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let t=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=t,this.author.is_moderator=t?t.some(i=>i.icon_type=="MODERATOR"):null,this.author.is_verified=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.money_chip_background_color=e.moneyChipBackgroundColor,this.money_chip_text_color=e.moneyChipTextColor,this.background_color=e.backgroundColor,this.author_name_text_color=e.authorNameTextColor,this.sticker=S.fromResponse(e.sticker),this.purchase_amount=new d(e.purchaseAmountText).toString(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};s(hu,"LiveChatPaidSticker");hu.type="LiveChatPaidSticker";var Vg=hu;var mu=class extends c{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};s(mu,"LiveChatPlaceholderItem");mu.type="LiveChatPlaceholderItem";var Ag=mu;var _u=class extends c{constructor(e){super(),this.title=e.title,this.accessibility_title=e.accessibilityTitle,this.thumbnail=S.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.from_vendor_text=e.fromVendorText,this.information_button=f.parseItem(e.informationButton),this.endpoint=new T(e.onClickCommand),this.creator_message=e.creatorMessage,this.creator_name=e.creatorName,this.author_photo=S.fromResponse(e.authorPhoto),this.information_dialog=f.parseItem(e.informationDialog),this.is_verified=e.isVerified,this.creator_custom_message=new d(e.creatorCustomMessage)}};s(_u,"LiveChatProductItem");_u.type="LiveChatProductItem";var Rg=_u;var Lh=class extends c{constructor(e){var t;super(),this.message=new d(e.message),this.icon_type=(t=e==null?void 0:e.icon)===null||t===void 0?void 0:t.iconType}};s(Lh,"LiveChatRestrictedParticipation");var Fg=Lh;var vu=class extends c{constructor(e){super(),this.message=new d(e.message),this.author={id:e.authorExternalChannelId,name:new d(e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let t=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=t,this.author.is_moderator=t?t.some(i=>i.icon_type=="MODERATOR"):null,this.author.is_verified=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.menu_endpoint=new T(e.contextMenuEndpoint),this.inline_action_buttons=f.parseArray(e.inlineActionButtons,[G]),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};s(vu,"LiveChatTextMessage");vu.type="LiveChatTextMessage";var Dh=vu;var yu=class extends c{constructor(e){var t,i;super(),this.author={id:e.authorExternalChannelId,name:new d(e==null?void 0:e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let r=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=r,this.author.is_moderator=r?r.some(a=>a.icon_type=="MODERATOR"):null,this.author.is_verified=r?r.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=r?r.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.amount=new d(e.amount),this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=f.parse((i=(t=e.showItemEndpoint)===null||t===void 0?void 0:t.showLiveChatItemEndpoint)===null||i===void 0?void 0:i.renderer),this.show_item_endpoint=new T(e.showItemEndpoint),this.id=e.id}};s(yu,"LiveChatTickerPaidMessageItem");yu.type="LiveChatTickerPaidMessageItem";var Og=yu;var bu=class extends c{constructor(e){var t,i;super(),this.author={id:e.authorExternalChannelId,name:new d(e==null?void 0:e.authorName),thumbnails:S.fromResponse(e.authorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let r=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=r,this.author.is_moderator=r?r.some(a=>a.icon_type=="MODERATOR"):null,this.author.is_verified=r?r.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=r?r.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.amount=new d(e.amount),this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=f.parseItem((i=(t=e.showItemEndpoint)===null||t===void 0?void 0:t.showLiveChatItemEndpoint)===null||i===void 0?void 0:i.renderer),this.show_item_endpoint=new T(e.showItemEndpoint),this.id=e.id}};s(bu,"LiveChatTickerPaidStickerItem");bu.type="LiveChatTickerPaidStickerItem";var Lg=bu;var wu=class extends c{constructor(e){super(),this.id=e.id,this.detail=new d(e.detailText),this.author={id:e.authorExternalChannelId,name:new d(e==null?void 0:e.authorName),thumbnails:S.fromResponse(e.sponsorPhoto),badges:de([]).as(Le,we),is_moderator:null,is_verified:null,is_verified_artist:null};let t=f.parseArray(e.authorBadges,[we,Le]);this.author.badges=t,this.author.is_moderator=t?t.some(i=>i.icon_type=="MODERATOR"):null,this.author.is_verified=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED"):null,this.author.is_verified_artist=t?t.some(i=>i.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"):null,this.duration_sec=e.durationSec}};s(wu,"LiveChatTickerSponsorItem");wu.type="LiveChatTickerSponsorItem";var Dg=wu;var gu=class extends Dh{constructor(e){super(e),delete this.author,delete this.menu_endpoint,this.icon_type=e.icon.iconType,this.action_button=f.parseItem(e.actionButton)}};s(gu,"LiveChatViewerEngagementMessage");gu.type="LiveChatViewerEngagementMessage";var Bg=gu;var xu=class extends c{constructor(e){super(),this.poll_question=new d(e.pollQuestion),this.thumbnails=S.fromResponse(e.thumbnail),this.metadata=new d(e.metadataText),this.live_chat_poll_type=e.liveChatPollType,this.context_menu_button=f.parseItem(e.contextMenuButton)}};s(xu,"PollHeader");xu.type="PollHeader";var jg=xu;var Tu=class extends c{constructor(e){super(),this.id=e.id,this.contents=f.parse(e.contents),this.target_id=e.targetId}};s(Tu,"LiveChatActionPanel");Tu.type="LiveChatActionPanel";var Bh=Tu;var Iu=class extends c{constructor(e){super(),this.deleted_state_message=new d(e.deletedStateMessage),this.target_item_id=e.targetItemId}};s(Iu,"MarkChatItemAsDeletedAction");Iu.type="MarkChatItemAsDeletedAction";var Yg=Iu;var Su=class extends c{constructor(e){super(),this.deleted_state_message=new d(e.deletedStateMessage),this.channel_id=e.externalChannelId}};s(Su,"MarkChatItemsByAuthorAsDeletedAction");Su.type="MarkChatItemsByAuthorAsDeletedAction";var Ug=Su;var Eu=class extends c{constructor(e){super(),this.target_action_id=e.targetActionId}};s(Eu,"RemoveBannerForLiveChatCommand");Eu.type="RemoveBannerForLiveChatCommand";var Wg=Eu;var ku=class extends c{constructor(e){super(),this.target_item_id=e.targetItemId}};s(ku,"RemoveChatItemAction");ku.type="RemoveChatItemAction";var Gg=ku;var Cu=class extends c{constructor(e){super(),this.external_channel_id=e.externalChannelId}};s(Cu,"RemoveChatItemByAuthorAction");Cu.type="RemoveChatItemByAuthorAction";var Jg=Cu;var Pu=class extends c{constructor(e){super(),this.target_item_id=e.targetItemId,this.replacement_item=f.parseItem(e.replacementItem)}};s(Pu,"ReplaceChatItemAction");Pu.type="ReplaceChatItemAction";var Hg=Pu;var Nu=class extends c{constructor(e){var t;super(),this.actions=f.parseArray((t=e.actions)===null||t===void 0?void 0:t.map(i=>(delete i.clickTrackingParams,i))),this.video_offset_time_msec=e.videoOffsetTimeMsec}};s(Nu,"ReplayChatItemAction");Nu.type="ReplayChatItemAction";var zg=Nu;var Mu=class extends c{constructor(e){super(),this.panel_to_show=f.parseItem(e.panelToShow,Bh)}};s(Mu,"ShowLiveChatActionPanelAction");Mu.type="ShowLiveChatActionPanelAction";var Kg=Mu;var Vu=class extends c{constructor(e){super(),this.dialog=f.parseItem(e.dialog)}};s(Vu,"ShowLiveChatDialogAction");Vu.type="ShowLiveChatDialogAction";var qg=Vu;var Au=class extends c{constructor(e){super(),this.tooltip=f.parseItem(e.tooltip)}};s(Au,"ShowLiveChatTooltipCommand");Au.type="ShowLiveChatTooltipCommand";var $g=Au;var Ru=class extends c{constructor(e){super(),this.date_text=new d(e.dateText).toString()}};s(Ru,"UpdateDateTextAction");Ru.type="UpdateDateTextAction";var jh=Ru;var Fu=class extends c{constructor(e){super(),this.description=new d(e.description)}};s(Fu,"UpdateDescriptionAction");Fu.type="UpdateDescriptionAction";var Yh=Fu;var Ou=class extends c{constructor(e){super(),this.poll_to_update=f.parseItem(e.pollToUpdate)}};s(Ou,"UpdateLiveChatPollAction");Ou.type="UpdateLiveChatPollAction";var Xg=Ou;var Lu=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Lu,"UpdateTitleAction");Lu.type="UpdateTitleAction";var Uh=Lu;var Du=class extends c{constructor(e){super(),this.default_text=new d(e.defaultText).toString(),this.toggled_text=new d(e.toggledText).toString(),this.button_id=e.buttonId}};s(Du,"UpdateToggleButtonTextAction");Du.type="UpdateToggleButtonTextAction";var Wh=Du;var Bu=class extends c{constructor(e){super();let t=e.viewCount.videoViewCountRenderer;this.view_count=new d(t.viewCount),this.extra_short_view_count=new d(t.extraShortViewCount),this.is_live=t.isLive}};s(Bu,"UpdateViewershipAction");Bu.type="UpdateViewershipAction";var Gh=Bu;var ju=class extends c{constructor(e){super(),this.confirm_button=f.parseItem(e.confirmButton,G),this.dialog_messages=e.dialogMessages.map(t=>new d(t))}};s(ju,"LiveChatDialog");ju.type="LiveChatDialog";var Qg=ju;var Yu=class extends c{constructor(e){super(),this.overflow_menu=f.parseItem(e.overflowMenu),this.collapse_button=f.parseItem(e.collapseButton),this.view_selector=f.parseItem(e.viewSelector)}};s(Yu,"LiveChatHeader");Yu.type="LiveChatHeader";var Zg=Yu;var Uu=class extends c{constructor(e){super(),this.max_items_to_display=e.maxItemsToDisplay,this.more_comments_below_button=f.parseItem(e.moreCommentsBelowButton)}};s(Uu,"LiveChatItemList");Uu.type="LiveChatItemList";var ex=Uu;var Wu=class extends c{constructor(e){super(),this.author_name=new d(e.authorName),this.author_photo=S.fromResponse(e.authorPhoto),this.send_button=f.parseItem(e.sendButton),this.target_id=e.targetId}};s(Wu,"LiveChatMessageInput");Wu.type="LiveChatMessageInput";var tx=Wu;var Gu=class extends c{constructor(e){super(),this.name=new d(e.authorName),this.photo=S.fromResponse(e.authorPhoto),this.badges=f.parse(e.authorBadges)}};s(Gu,"LiveChatParticipant");Gu.type="LiveChatParticipant";var ix=Gu;var Ju=class extends c{constructor(e){super(),this.title=new d(e.title),this.participants=f.parseArray(e.participants)}};s(Ju,"LiveChatParticipantsList");Ju.type="LiveChatParticipantsList";var nx=Ju;var Hu=class extends c{constructor(e){super(),this.title=new d(e.title),this.time_description=new d(e.timeDescription),this.thumbnail=S.fromResponse(e.thumbnail),this.on_tap_endpoint=new T(e.onTap),this.layout=e.layout,this.is_highlighted=e.isHighlighted}};s(Hu,"MacroMarkersListItem");Hu.type="MacroMarkersListItem";var ox=Hu;var zu=class extends c{constructor(e){var t,i;super(),this.items=f.parseArray(e.items),this.top_level_buttons=f.parseArray(e.topLevelButtons),this.label=((i=(t=e.accessibility)===null||t===void 0?void 0:t.accessibilityData)===null||i===void 0?void 0:i.label)||null}get contents(){return this.items}};s(zu,"Menu");zu.type="Menu";var Ye=zu;var Ku=class extends G{constructor(e){super(e)}};s(Ku,"MenuNavigationItem");Ku.type="MenuNavigationItem";var sx=Ku;var qu=class extends G{constructor(e){super(e)}};s(qu,"MenuServiceItem");qu.type="MenuServiceItem";var Oo=qu;var $u=class extends c{constructor(e){super(),this.has_separator=e.hasSeparator,this.endpoint=new T(e.navigationEndpoint||e.serviceEndpoint)}};s($u,"MenuServiceItemDownload");$u.type="MenuServiceItemDownload";var rx=$u;var Xu=class extends c{constructor(e){super(),this.header=f.parse(e.header),this.sections=f.parse(e.sections),this.style=e.style}};s(Xu,"MultiPageMenu");Xu.type="MultiPageMenu";var ax=Xu;var Qu=class extends c{constructor(e){super(),this.items=f.parse(e.items)}get contents(){return this.items}};s(Qu,"MultiPageMenuNotificationSection");Qu.type="MultiPageMenuNotificationSection";var ux=Qu;var Zu=class extends c{constructor(e){super()}};s(Zu,"MusicMenuItemDivider");Zu.type="MusicMenuItemDivider";var Jh=Zu;var el=class extends c{constructor(e){var t;super(),this.title=new d((t=e.title.musicMenuTitleRenderer)===null||t===void 0?void 0:t.primaryText).text,this.options=f.parseArray(e.options,[Ht,Jh])}};s(el,"MusicMultiSelectMenu");el.type="MusicMultiSelectMenu";var Hh=el;var tl=class extends c{constructor(e){super(),this.title=new d(e.title),this.buttons=f.parse(e.buttons)}};s(tl,"SimpleMenuHeader");tl.type="SimpleMenuHeader";var zh=tl;var il=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description,this.thumbnails=S.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.button_text=e.buttonText,this.button_accessibility_text=e.buttonAccessibilityText,this.from_vendor_text=e.fromVendorText,this.additional_fees_text=e.additionalFeesText,this.region_format=e.regionFormat,this.endpoint=new T(e.buttonCommand)}};s(il,"MerchandiseItem");il.type="MerchandiseItem";var lx=il;var nl=class extends c{constructor(e){super(),this.title=e.title,this.menu=f.parse(e.actionButton),this.items=f.parse(e.items)}get contents(){return this.items}};s(nl,"MerchandiseShelf");nl.type="MerchandiseShelf";var Kh=nl;var ol=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(ol,"Message");ol.type="Message";var Dt=ol;var sl=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=e.contents.map(t=>new d(t))}};s(sl,"MetadataRow");sl.type="MetadataRow";var cx=sl;var rl=class extends c{constructor(e){super(),this.rows=f.parseArray(e.rows),this.collapsed_item_count=e.collapsedItemCount}};s(rl,"MetadataRowContainer");rl.type="MetadataRowContainer";var qh=rl;var al=class extends c{constructor(e){super(),this.content=new d(e.content),this.has_divider_line=e.hasDividerLine}};s(al,"MetadataRowHeader");al.type="MetadataRowHeader";var dx=al;var ul=class extends c{constructor(e){super(),this.section_list=f.parseItem(e)}};s(ul,"MetadataScreen");ul.type="MetadataScreen";var px=ul;var ll=class extends c{constructor(e){super(),this.url_canonical=e.urlCanonical,this.title=e.title,this.description=e.description,this.thumbnail=e.thumbnail?S.fromResponse(e.thumbnail):null,this.site_name=e.siteName,this.app_name=e.appName,this.android_package=e.androidPackage,this.ios_app_store_id=e.iosAppStoreId,this.ios_app_arguments=e.iosAppArguments,this.og_type=e.ogType,this.url_applinks_web=e.urlApplinksWeb,this.url_applinks_ios=e.urlApplinksIos,this.url_applinks_android=e.urlApplinksAndroid,this.url_twitter_ios=e.urlTwitterIos,this.url_twitter_android=e.urlTwitterAndroid,this.twitter_card_type=e.twitterCardType,this.twitter_site_handle=e.twitterSiteHandle,this.schema_dot_org_type=e.schemaDotOrgType,this.noindex=e.noindex,this.is_unlisted=e.unlisted,this.is_family_safe=e.familySafe,this.tags=e.tags,this.available_countries=e.availableCountries}};s(ll,"MicroformatData");ll.type="MicroformatData";var ui=ll;var cl=class extends ai{constructor(e){super(e)}};s(cl,"Mix");cl.type="Mix";var fx=cl;var dl=class extends c{constructor(e){var t,i,r;super();let a=((t=e.thumbnailOverlays.find(l=>l.thumbnailOverlayTimeStatusRenderer))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new d(e.title),this.description_snippet=e.descriptionSnippet?new d(e.descriptionSnippet):null,this.top_metadata_items=new d(e.topMetadataItems),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parse(e.thumbnailOverlays),this.author=new be(e.longBylineText,e.ownerBadges,(r=(i=e.channelThumbnailSupportedRenderers)===null||i===void 0?void 0:i.channelThumbnailWithLinkRenderer)===null||r===void 0?void 0:r.thumbnail),this.duration={text:e.lengthText?new d(e.lengthText).text:new d(a).text,seconds:ut(e.lengthText?new d(e.lengthText).text:new d(a).text)},this.endpoint=new T(e.navigationEndpoint),this.badges=f.parse(e.badges),this.use_vertical_poster=e.useVerticalPoster,this.show_action_menu=e.showActionMenu,this.menu=f.parse(e.menu)}};s(dl,"Movie");dl.type="Movie";var hx=dl;var pl=class extends c{constructor(e){var t;return super(),(t=e.movingThumbnailDetails)===null||t===void 0?void 0:t.thumbnails.map(i=>new S(i)).sort((i,r)=>r.width-i.width)}};s(pl,"MovingThumbnail");pl.type="MovingThumbnail";var mx=pl;var fl=class extends c{constructor(e){super(),this.marker_key=e.key,this.value={},e.value.heatmap&&(this.value.heatmap=f.parseItem(e.value.heatmap)),e.value.chapters&&(this.value.chapters=f.parseArray(e.value.chapters))}};s(fl,"Marker");fl.type="Marker";var hl=class extends c{constructor(e){var t;super(),this.markers_map=de((t=e.markersMap)===null||t===void 0?void 0:t.map(i=>new fl(i)))}};s(hl,"MultiMarkersPlayerBar");hl.type="MultiMarkersPlayerBar";var _x=hl;var ml=class extends c{constructor(e){var t;super(),this.endpoint=new T(e.playNavigationEndpoint),this.play_icon_type=e.playIcon.iconType,this.pause_icon_type=e.pauseIcon.iconType,e.accessibilityPlayData&&(this.play_label=e.accessibilityPlayData.accessibilityData.label),e.accessibilityPlayData&&(this.pause_label=(t=e.accessibilityPauseData)===null||t===void 0?void 0:t.accessibilityData.label),this.icon_color=e.iconColor}};s(ml,"MusicPlayButton");ml.type="MusicPlayButton";var $h=ml;var _l=class extends c{constructor(e){super(),this.content=f.parseItem(e.content,$h),this.content_position=e.contentPosition,this.display_style=e.displayStyle}};s(_l,"MusicItemThumbnailOverlay");_l.type="MusicItemThumbnailOverlay";var Lo=_l;var vl=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p,b,I,C,N,L,O,D,K,F,w,ve,Ge,Ee;switch(super(),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint),this.id=((i=(t=this.endpoint)===null||t===void 0?void 0:t.payload)===null||i===void 0?void 0:i.browseId)||((a=(r=this.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.videoId),this.subtitle=new d(e.subtitle),this.badges=f.parse(e.subtitleBadges),(_=(v=(h=(l=this.endpoint)===null||l===void 0?void 0:l.payload)===null||h===void 0?void 0:h.browseEndpointContextSupportedConfigs)===null||v===void 0?void 0:v.browseEndpointContextMusicConfig)===null||_===void 0?void 0:_.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:((b=(p=this.endpoint)===null||p===void 0?void 0:p.metadata)===null||b===void 0?void 0:b.api_url)==="/next"?this.item_type="endpoint":!((I=this.subtitle.runs)===null||I===void 0)&&I[0]?this.subtitle.runs[0].text!=="Song"?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown";break}if(this.item_type=="artist")this.subscribers=((N=(C=this.subtitle.runs)===null||C===void 0?void 0:C.find($=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test($.text)))===null||N===void 0?void 0:N.text)||"";else if(this.item_type=="playlist"){let $=(L=this.subtitle.runs)===null||L===void 0?void 0:L.find(B=>B.text.match(/\d+ songs|song/));this.item_count=$?$.text:null}else if(this.item_type=="album"){let $=(O=this.subtitle.runs)===null||O===void 0?void 0:O.filter(B=>{var se,re;return(re=(se=B.endpoint)===null||se===void 0?void 0:se.payload)===null||re===void 0?void 0:re.browseId.startsWith("UC")});$&&(this.artists=$.map(B=>{var se,re;return{name:B.text,channel_id:(re=(se=B.endpoint)===null||se===void 0?void 0:se.payload)===null||re===void 0?void 0:re.browseId,endpoint:B.endpoint}})),this.year=(D=this.subtitle.runs)===null||D===void 0?void 0:D.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if(this.item_type=="video"){this.views=((F=(K=this===null||this===void 0?void 0:this.subtitle.runs)===null||K===void 0?void 0:K.find(B=>B==null?void 0:B.text.match(/(.*?) views/)))===null||F===void 0?void 0:F.text)||"N/A";let $=(w=this.subtitle.runs)===null||w===void 0?void 0:w.find(B=>{var se,re,st;return(st=(re=(se=B.endpoint)===null||se===void 0?void 0:se.payload)===null||re===void 0?void 0:re.browseId)===null||st===void 0?void 0:st.startsWith("UC")});$&&(this.author={name:$==null?void 0:$.text,channel_id:(Ge=(ve=$==null?void 0:$.endpoint)===null||ve===void 0?void 0:ve.payload)===null||Ge===void 0?void 0:Ge.browseId,endpoint:$==null?void 0:$.endpoint})}else if(this.item_type=="song"){let $=(Ee=this.subtitle.runs)===null||Ee===void 0?void 0:Ee.filter(B=>{var se,re;return(re=(se=B.endpoint)===null||se===void 0?void 0:se.payload)===null||re===void 0?void 0:re.browseId.startsWith("UC")});$&&(this.artists=$.map(B=>{var se,re;return{name:B==null?void 0:B.text,channel_id:(re=(se=B==null?void 0:B.endpoint)===null||se===void 0?void 0:se.payload)===null||re===void 0?void 0:re.browseId,endpoint:B==null?void 0:B.endpoint}}))}this.thumbnail=S.fromResponse(e.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=f.parseItem(e.thumbnailOverlay,Lo),this.menu=f.parseItem(e.menu,Ye)}};s(vl,"MusicTwoRowItem");vl.type="MusicTwoRowItem";var Do=vl;var yl=class extends c{constructor(e){super(),this.title=new d(e.text),this.display_priority=e.displayPriority}};s(yl,"MusicResponsiveListItemFlexColumn");yl.type="musicResponsiveListItemFlexColumnRenderer";var Xh=yl;var bl=class extends c{constructor(e){super(),this.title=new d(e.text),this.display_priority=e.displayPriority}};s(bl,"MusicResponsiveListItemFixedColumn");bl.type="musicResponsiveListItemFlexColumnRenderer";var Qh=bl;var y0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ne=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},li,Te,wl,gl,bx,wx,vx,yx,gx,xx,Tx,Ix,xl=class extends c{constructor(e){var t,i,r,a,l,h,v;switch(super(),li.add(this),Te.set(this,void 0),wl.set(this,void 0),gl.set(this,void 0),y0(this,Te,f.parseArray(e.flexColumns,Xh),"f"),y0(this,wl,f.parseArray(e.fixedColumns,Qh),"f"),y0(this,gl,{video_id:((t=e==null?void 0:e.playlistItemData)===null||t===void 0?void 0:t.videoId)||null,playlist_set_video_id:((i=e==null?void 0:e.playlistItemData)===null||i===void 0?void 0:i.playlistSetVideoId)||null},"f"),this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):null,(h=(l=(a=(r=this.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseEndpointContextSupportedConfigs)===null||l===void 0?void 0:l.browseEndpointContextMusicConfig)===null||h===void 0?void 0:h.pageType){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",ne(this,li,"m",Tx).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",ne(this,li,"m",Ix).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",ne(this,li,"m",gx).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",ne(this,li,"m",xx).call(this);break;default:ne(this,Te,"f")[1]?ne(this,li,"m",wx).call(this):ne(this,li,"m",bx).call(this);break}e.index&&(this.index=new d(e.index)),this.thumbnails=e.thumbnail?S.fromResponse((v=e.thumbnail.musicThumbnailRenderer)===null||v===void 0?void 0:v.thumbnail):[],this.badges=f.parseArray(e.badges),this.menu=f.parseItem(e.menu,Ye),this.overlay=f.parseItem(e.overlay,Lo)}};s(xl,"MusicResponsiveListItem");Te=new WeakMap,wl=new WeakMap,gl=new WeakMap,li=new WeakSet,bx=s(function(){this.title=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},"_MusicResponsiveListItem_parseOther"),wx=s(function(){var e;((e=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||e===void 0?void 0:e.some(i=>i.text.match(/(.*?) views/)))?(this.item_type="video",ne(this,li,"m",yx).call(this)):(this.item_type="song",ne(this,li,"m",vx).call(this))},"_MusicResponsiveListItem_parseVideoOrSong"),vx=s(function(){var e,t,i,r,a,l,h,v,_,p,b,I,C;this.id=ne(this,gl,"f").video_id||((t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.videoId),this.title=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d);let N=((r=(i=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(D=>/^\d+$/.test(D.text.replace(/:/g,""))))===null||r===void 0?void 0:r.text)||((h=(l=(a=ne(this,wl,"f"))===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.key("title").instanceof(d))===null||h===void 0?void 0:h.toString());N&&(this.duration={text:N,seconds:ut(N)});let L=((v=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||v===void 0?void 0:v.find(D=>{var K,F;return(F=(K=Reflect.get(D,"endpoint"))===null||K===void 0?void 0:K.payload)===null||F===void 0?void 0:F.browseId.startsWith("MPR")}))||((p=(_=ne(this,Te,"f")[2])===null||_===void 0?void 0:_.key("title").instanceof(d).runs)===null||p===void 0?void 0:p.find(D=>{var K,F;return(F=(K=Reflect.get(D,"endpoint"))===null||K===void 0?void 0:K.payload)===null||F===void 0?void 0:F.browseId.startsWith("MPR")}));L&&(this.album={id:(I=(b=L.endpoint)===null||b===void 0?void 0:b.payload)===null||I===void 0?void 0:I.browseId,name:L.text,endpoint:L.endpoint});let O=(C=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||C===void 0?void 0:C.filter(D=>{var K,F;return(F=(K=Reflect.get(D,"endpoint"))===null||K===void 0?void 0:K.payload)===null||F===void 0?void 0:F.browseId.startsWith("UC")});O&&(this.artists=O.map(D=>{var K,F;return{name:D.text,channel_id:(F=(K=D.endpoint)===null||K===void 0?void 0:K.payload)===null||F===void 0?void 0:F.browseId,endpoint:D.endpoint}}))},"_MusicResponsiveListItem_parseSong"),yx=s(function(){var e,t,i,r,a,l,h,v;this.id=ne(this,gl,"f").video_id,this.title=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d),this.views=(t=(e=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||e===void 0?void 0:e.find(b=>b.text.match(/(.*?) views/)))===null||t===void 0?void 0:t.text;let _=(i=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.filter(b=>{var I,C;return(C=(I=Reflect.get(b,"endpoint"))===null||I===void 0?void 0:I.payload)===null||C===void 0?void 0:C.browseId.startsWith("UC")});_&&(this.authors=_.map(b=>{var I,C;return{name:b.text,channel_id:(C=(I=b.endpoint)===null||I===void 0?void 0:I.payload)===null||C===void 0?void 0:C.browseId,endpoint:b.endpoint}}));let p=((a=(r=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||r===void 0?void 0:r.find(b=>/^\d+$/.test(b.text.replace(/:/g,""))))===null||a===void 0?void 0:a.text)||((v=(h=(l=ne(this,wl,"f")[0])===null||l===void 0?void 0:l.key("title").instanceof(d).runs)===null||h===void 0?void 0:h.find(b=>/^\d+$/.test(b.text.replace(/:/g,""))))===null||v===void 0?void 0:v.text);p&&(this.duration={text:p,seconds:ut(p)})},"_MusicResponsiveListItem_parseVideo"),gx=s(function(){var e,t,i,r;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.name=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d),this.subscribers=((r=(i=this.subtitle.runs)===null||i===void 0?void 0:i.find(a=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(a.text)))===null||r===void 0?void 0:r.text)||""},"_MusicResponsiveListItem_parseArtist"),xx=s(function(){var e,t,i;this.name=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d),this.song_count=((i=(t=(e=this.subtitle)===null||e===void 0?void 0:e.runs)===null||t===void 0?void 0:t.find(r=>/^\d+(,\d+)? songs?$/i.test(r.text)))===null||i===void 0?void 0:i.text)||""},"_MusicResponsiveListItem_parseLibraryArtist"),Tx=s(function(){var e,t,i,r,a,l,h;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.title=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d);let v=(i=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(_=>{var p,b;return(b=(p=Reflect.get(_,"endpoint"))===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId.startsWith("UC")});v&&(this.author={name:v.text,channel_id:(a=(r=v.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseId,endpoint:v.endpoint}),this.year=(h=(l=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||l===void 0?void 0:l.find(_=>/^[12][0-9]{3}$/.test(_.text)))===null||h===void 0?void 0:h.text},"_MusicResponsiveListItem_parseAlbum"),Ix=s(function(){var e,t,i,r,a,l;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.title=ne(this,Te,"f")[0].key("title").instanceof(d).toString(),this.subtitle=ne(this,Te,"f")[1].key("title").instanceof(d);let h=(i=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(_=>_.text.match(/\d+ (song|songs)/));this.item_count=h?h.text:void 0;let v=(r=ne(this,Te,"f")[1].key("title").instanceof(d).runs)===null||r===void 0?void 0:r.find(_=>{var p,b;return(b=(p=Reflect.get(_,"endpoint"))===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId.startsWith("UC")});v&&(this.author={name:v.text,channel_id:(l=(a=v.endpoint)===null||a===void 0?void 0:a.payload)===null||l===void 0?void 0:l.browseId,endpoint:v.endpoint})},"_MusicResponsiveListItem_parsePlaylist");xl.type="MusicResponsiveListItem";var Xi=xl;var Tl=class extends c{constructor(e){super(),this.contents=S.fromResponse(e.thumbnail)}};s(Tl,"MusicThumbnail");Tl.type="MusicThumbnail";var Bo=Tl;var Il=class extends c{constructor(e){super(),e.strapline&&(this.strapline=new d(e.strapline)),this.title=new d(e.title),e.thumbnail&&(this.thumbnail=f.parseItem(e.thumbnail,Bo)),e.moreContentButton&&(this.more_content=f.parseItem(e.moreContentButton,G)),e.endIcons&&(this.end_icons=f.parseArray(e.endIcons,Mh))}};s(Il,"MusicCarouselShelfBasicHeader");Il.type="MusicCarouselShelfBasicHeader";var Zh=Il;var Sl=class extends c{constructor(e){super(),this.button_text=new d(e.buttonText).toString(),this.endpoint=new T(e.clickCommand)}};s(Sl,"MusicNavigationButton");Sl.type="MusicNavigationButton";var jo=Sl;var El=class extends c{constructor(e){super(),this.header=f.parseItem(e.header,Zh),this.contents=f.parseArray(e.contents,[Do,Xi,jo]),this.num_items_per_column=Reflect.has(e,"numItemsPerColumn")?parseInt(e.numItemsPerColumn):null}};s(El,"MusicCarouselShelf");El.type="MusicCarouselShelf";var Ue=El;var kl=class extends c{constructor(e){super(),this.description=new d(e.description),this.max_collapsed_lines&&(this.max_collapsed_lines=e.maxCollapsedLines),this.max_expanded_lines&&(this.max_expanded_lines=e.maxExpandedLines),this.footer=new d(e.footer)}};s(kl,"MusicDescriptionShelf");kl.type="MusicDescriptionShelf";var Vn=kl;var Cl=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p;super(),this.title=new d(e.title),this.description=new d(e.description),this.subtitle=new d(e.subtitle),this.second_subtitle=new d(e.secondSubtitle),this.year=((i=(t=this.subtitle.runs)===null||t===void 0?void 0:t.find(I=>/^[12][0-9]{3}$/.test(I.text)))===null||i===void 0?void 0:i.text)||"",this.song_count=((a=(r=this.second_subtitle.runs)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.text)||"",this.total_duration=((h=(l=this.second_subtitle.runs)===null||l===void 0?void 0:l[2])===null||h===void 0?void 0:h.text)||"",this.thumbnails=S.fromResponse(e.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=f.parse(e.subtitleBadges);let b=(v=this.subtitle.runs)===null||v===void 0?void 0:v.find(I=>{var C,N;return(N=(C=I==null?void 0:I.endpoint)===null||C===void 0?void 0:C.payload)===null||N===void 0?void 0:N.browseId.startsWith("UC")});b&&(this.author={name:b.text,channel_id:(p=(_=b.endpoint)===null||_===void 0?void 0:_.payload)===null||p===void 0?void 0:p.browseId,endpoint:b.endpoint}),this.menu=f.parse(e.menu)}};s(Cl,"MusicDetailHeader");Cl.type="MusicDetailHeader";var An=Cl;var Pl=class extends c{constructor(e){super(),this.playlist_id=e.playlistId,this.supported_download_states=e.supportedDownloadStates}};s(Pl,"MusicDownloadStateBadge");Pl.type="MusicDownloadStateBadge";var Sx=Pl;var Nl=class extends c{constructor(e){super(),this.header=f.parse(e.header)}};s(Nl,"MusicEditablePlaylistDetailHeader");Nl.type="MusicEditablePlaylistDetailHeader";var em=Nl;var Ml=class extends c{constructor(e){super(),this.element=Reflect.has(e,"elementRenderer")?f.parseItem(e,Ro):null}};s(Ml,"MusicElementHeader");Ml.type="MusicElementHeader";var Vl=Ml;var Al=class extends c{constructor(e){super(),e.header&&(this.header=f.parse(e.header)),e.title&&(this.title=new d(e.title))}};s(Al,"MusicHeader");Al.type="MusicHeader";var Qi=Al;var Rl=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.thumbnail=f.parseItem(e.thumbnail,Bo),this.play_button=f.parseItem(e.playButton,G),this.start_radio_button=f.parseItem(e.startRadioButton,G)}};s(Rl,"MusicImmersiveHeader");Rl.type="MusicImmersiveHeader";var tm=Rl;var Fl=class extends c{constructor(e){super(),this.icon_type=e.icon.iconType,this.label=e.accessibilityData.accessibilityData.label}};s(Fl,"MusicInlineBadge");Fl.type="MusicInlineBadge";var Ex=Fl;var Ol=class{constructor(e){this.icon_name=e.iconName,this.endpoint=new T(e.onTap),this.a11y_text=e.a11yText,this.style=e.style}};s(Ol,"ActionButton");Ol.type="ActionButton";var Ll=class{constructor(e){this.image=e.image.image.sources,this.content_mode=e.image.contentMode,this.crop_options=e.image.cropOptions,this.image_aspect_ratio=e.imageAspectRatio,this.caption=e.caption,this.action_buttons=e.actionButtons.map(t=>new Ol(t))}};s(Ll,"Panel");Ll.type="Panel";var Dl=class extends c{constructor(e){super(),this.header=e.shelf.header,this.panels=e.shelf.panels.map(t=>new Ll(t))}};s(Dl,"MusicLargeCardItemCarousel");Dl.type="MusicLargeCardItemCarousel";var kx=Dl;var Bl=class extends c{constructor(e){var t,i,r;super(),this.playlist_id=e.playlistId,this.contents=f.parseArray(e.contents,Xi),this.collapsed_item_count=e.collapsedItemCount,this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||null}};s(Bl,"MusicPlaylistShelf");Bl.type="MusicPlaylistShelf";var Rn=Bl;var jl=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.title=e.title,this.title_text=new d(e.titleText),this.contents=f.parseArray(e.contents),this.playlist_id=e.playlistId,this.is_infinite=e.isInfinite,this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextRadioContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.nextContinuationData)===null||h===void 0?void 0:h.continuation),this.is_editable=e.isEditable,this.preview_description=e.previewDescription,this.num_items_to_show=e.numItemsToShow}};s(jl,"PlaylistPanel");jl.type="PlaylistPanel";var ci=jl;var Yl=class extends c{constructor(e){super(),this.content=f.parseItem(e.content,ci)}};s(Yl,"MusicQueue");Yl.type="MusicQueue";var Yo=Yl;var Ul=class extends c{constructor(e){var t,i,r,a;super(),this.title=new d(e.title),this.contents=f.parseArray(e.contents,Xi),e.bottomEndpoint&&(this.endpoint=new T(e.bottomEndpoint)),e.continuations&&(this.continuation=((i=(t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData)===null||i===void 0?void 0:i.continuation)||((a=(r=e.continuations)===null||r===void 0?void 0:r[0].reloadContinuationData)===null||a===void 0?void 0:a.continuation)),e.bottomText&&(this.bottom_text=new d(e.bottomText)),e.bottomButton&&(this.bottom_button=f.parseItem(e.bottomButton)),e.subheaders&&(this.subheaders=f.parseArray(e.subheaders))}};s(Ul,"MusicShelf");Ul.type="MusicShelf";var Ae=Ul;var Wl=class extends c{constructor(e){super(),e.startItems&&(this.start_items=f.parseArray(e.startItems)),e.endItems&&(this.end_items=f.parseArray(e.endItems))}};s(Wl,"MusicSideAlignedItem");Wl.type="MusicSideAlignedItem";var im=Wl;var Gl=class extends c{constructor(e){var t;super(),this.title=new d(e.title).text,this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.icon_type)||null,this.menu=f.parseItem(e.menu,Hh)}};s(Gl,"MusicSortFilterButton");Gl.type="MusicSortFilterButton";var Jl=Gl;var Hl=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.thumbnails=e.thumbnail?S.fromResponse((t=e.thumbnail.musicThumbnailRenderer)===null||t===void 0?void 0:t.thumbnail):[],this.menu=f.parseItem(e.menu,Ye),this.foreground_thumbnails=e.foregroundThumbnail?S.fromResponse((i=e.foregroundThumbnail.musicThumbnailRenderer)===null||i===void 0?void 0:i.thumbnail):[]}};s(Hl,"MusicVisualHeader");Hl.type="MusicVisualHeader";var nm=Hl;var zl=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.video_thumbnails=S.fromResponse(e.videoThumbnail),this.short_message=new d(e.shortMessage),this.sent_time=new d(e.sentTimeText),this.notification_id=e.notificationId,this.endpoint=new T(e.navigationEndpoint),this.record_click_endpoint=new T(e.recordClickEndpoint),this.menu=f.parse(e.contextualMenu),this.read=e.read}};s(zl,"Notification");zl.type="Notification";var om=zl;var Kl=class extends c{constructor(e){super(),this.header_text=new d(e.headerText).toString(),this.body_text=new d(e.bodyText).toString(),this.page_title=new d(e.pageTitle).toString(),this.header_icon_type=e.headerIcon.iconType}};s(Kl,"PageIntroduction");Kl.type="PageIntroduction";var sm=Kl;var ql=class extends c{constructor(e){super(),this.featured_channel={start_time_ms:e.featuredChannel.startTimeMs,end_time_ms:e.featuredChannel.endTimeMs,watermark:S.fromResponse(e.featuredChannel.watermark),channel_name:e.featuredChannel.channelName,endpoint:new T(e.featuredChannel.navigationEndpoint),subscribe_button:f.parse(e.featuredChannel.subscribeButton)},this.allow_swipe_dismiss=e.allowSwipeDismiss,this.annotation_id=e.annotationId}};s(ql,"PlayerAnnotationsExpanded");ql.type="PlayerAnnotationsExpanded";var Cx=ql;var $l=class extends c{constructor(e){super(),this.caption_tracks=e.captionTracks.map(t=>({base_url:t.baseUrl,name:new d(t.name),vss_id:t.vssId,language_code:t.languageCode,kind:t.kind,is_translatable:t.isTranslatable})),this.audio_tracks=e.audioTracks.map(t=>({audio_track_id:t.audioTrackId,captions_initial_state:t.captionsInitialState,default_caption_track_index:t.defaultCaptionTrackIndex,has_default_track:t.hasDefaultTrack,visibility:t.visibility,caption_track_indices:t.captionTrackIndices})),this.default_audio_track_index=e.defaultAudioTrackIndex,this.translation_languages=e.translationLanguages.map(t=>({language_code:t.languageCode,language_name:new d(t.languageName)}))}};s($l,"PlayerCaptionsTracklist");$l.type="PlayerCaptionsTracklist";var Px=$l;var Xl=class extends c{constructor(e){var t;super(),this.subreason=new d(e.subreason),this.reason=new d(e.reason),this.proceed_button=f.parseItem(e.proceedButton,G),this.thumbnails=S.fromResponse(e.thumbnail),this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.iconType)||null}};s(Xl,"PlayerErrorMessage");Xl.type="PlayerErrorMessage";var Nx=Xl;var Ql=class extends c{constructor(){super()}};s(Ql,"PlayerLiveStoryboardSpec");Ql.type="PlayerLiveStoryboardSpec";var Mx=Ql;var Zl=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.description=new d(e.description),this.thumbnails=S.fromResponse(e.thumbnail),this.embed={iframe_url:e.embed.iframeUrl,flash_url:e.embed.flashUrl,flash_secure_url:e.embed.flashSecureUrl,width:e.embed.width,height:e.embed.height},this.length_seconds=parseInt(e.lengthSeconds),this.channel={id:e.externalChannelId,name:e.ownerChannelName,url:e.ownerProfileUrl},this.is_family_safe=!!e.isFamilySafe,this.is_unlisted=!!e.isUnlisted,this.has_ypc_metadata=!!e.hasYpcMetadata,this.view_count=parseInt(e.viewCount),this.category=e.category,this.publish_date=e.publishDate,this.upload_date=e.uploadDate,this.available_countries=e.availableCountries,this.start_timestamp=!((t=e.liveBroadcastDetails)===null||t===void 0)&&t.startTimestamp?new Date(e.liveBroadcastDetails.startTimestamp):null}};s(Zl,"PlayerMicroformat");Zl.type="PlayerMicroformat";var Zi=Zl;var ec=class extends c{constructor(e){super(),this.results=f.parseArray(e.results,[Th,xh]),this.title=new d(e.title).toString()}};s(ec,"WatchNextEndScreen");ec.type="WatchNextEndScreen";var rm=ec;var tc=class extends c{constructor(e){super(),this.title=new d(e.title),this.video_id=e.videoId,this.video_title=new d(e.videoTitle),this.short_view_count=new d(e.shortViewCountText),this.prefer_immediate_redirect=e.preferImmediateRedirect,this.count_down_secs_for_fullscreen=e.countDownSecsForFullscreen,this.published=new d(e.publishedTimeText),this.background=S.fromResponse(e.background),this.thumbnail_overlays=f.parse(e.thumbnailOverlays),this.author=new be(e.byline),this.cancel_button=f.parseItem(e.cancelButton,G),this.next_button=f.parseItem(e.nextButton,G),this.close_button=f.parseItem(e.closeButton,G)}};s(tc,"PlayerOverlayAutoplay");tc.type="PlayerOverlayAutoplay";var am=tc;var ic=class extends c{constructor(e){super(),this.end_screen=f.parseItem(e.endScreen,rm),this.autoplay=f.parseItem(e.autoplay,am),this.share_button=f.parseItem(e.shareButton,G),this.add_to_menu=f.parseItem(e.addToMenu,Ye),this.fullscreen_engagement=f.parse(e.fullscreenEngagement),this.actions=f.parseArray(e.actions),this.browser_media_session=f.parseItem(e.browserMediaSession),this.decorated_player_bar=f.parseItem(e.decoratedPlayerBarRenderer)}};s(ic,"PlayerOverlay");ic.type="PlayerOverlay";var en=ic;var nc=class extends c{constructor(e){super();let t=e.spec.split("|"),i=new URL(t.shift());this.boards=t.map((r,a)=>{let[l,h,v,_,p,b,I,C]=r.split("#");i.searchParams.set("sigh",C);let N=Math.ceil(parseInt(v,10)/(parseInt(_,10)*parseInt(p,10)));return{template_url:i.toString().replace("$L",a).replace("$N",I),thumbnail_width:parseInt(l,10),thumbnail_height:parseInt(h,10),thumbnail_count:parseInt(v,10),interval:parseInt(b,10),columns:parseInt(_,10),rows:parseInt(p,10),storyboard_count:N}})}};s(nc,"PlayerStoryboardSpec");nc.type="PlayerStoryboardSpec";var Vx=nc;var oc=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail)}};s(oc,"PlaylistCustomThumbnail");oc.type="PlaylistCustomThumbnail";var um=oc;var sc=class extends c{constructor(e){super(),this.id=e.playlistId,this.title=new d(e.title),this.stats=e.stats.map(t=>new d(t)),this.brief_stats=e.briefStats.map(t=>new d(t)),this.author=new ri(Object.assign(Object.assign({},e.ownerText),{navigationEndpoint:e.ownerEndpoint}),e.ownerBadges,null),this.description=new d(e.descriptionText),this.num_videos=new d(e.numVideosText),this.view_count=new d(e.viewCountText),this.can_share=e.shareData.canShare,this.can_delete=e.editableDetails.canDelete,this.is_editable=e.isEditable,this.privacy=e.privacy,this.save_button=f.parse(e.saveButton),this.shuffle_play_button=f.parse(e.shufflePlayButton),this.menu=f.parse(e.moreActionsMenu)}};s(sc,"PlaylistHeader");sc.type="PlaylistHeader";var lm=sc;var rc=class extends c{constructor(e){super(),this.title=new d(e.playlistTitle),this.thumbnails=S.fromResponse(e.thumbnail),this.video_count=new d(e.playlistVideoCount),this.channel_name=new d(e.channelName),this.endpoint=new T(e.action)}};s(rc,"PlaylistInfoCardContent");rc.type="PlaylistInfoCardContent";var Ax=rc;var ac=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description||null}};s(ac,"PlaylistMetadata");ac.type="PlaylistMetadata";var cm=ac;var uc=class extends c{constructor(e){var t,i,r,a,l;super(),this.title=new d(e.title),this.thumbnail=S.fromResponse(e.thumbnail),this.endpoint=new T(e.navigationEndpoint),this.selected=e.selected,this.video_id=e.videoId,this.duration={text:new d(e.lengthText).toString(),seconds:ut(new d(e.lengthText).toString())};let h=(t=new d(e.longBylineText).runs)===null||t===void 0?void 0:t.find(_=>{var p,b,I;return(I=(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId)===null||I===void 0?void 0:I.startsWith("MPR")}),v=(i=new d(e.longBylineText).runs)===null||i===void 0?void 0:i.filter(_=>{var p,b,I;return(I=(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId)===null||I===void 0?void 0:I.startsWith("UC")});this.author=new d(e.shortBylineText).toString(),h&&(this.album={id:(a=(r=h.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseId,name:h.text,year:(l=new d(e.longBylineText).runs)===null||l===void 0?void 0:l.slice(-1)[0].text,endpoint:h.endpoint}),v&&(this.artists=v.map(_=>{var p,b;return{name:_.text,channel_id:(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId,endpoint:_.endpoint}})),this.badges=f.parseArray(e.badges),this.menu=f.parseItem(e.menu),this.set_video_id=e.playlistSetVideoId}};s(uc,"PlaylistPanelVideo");uc.type="PlaylistPanelVideo";var dm=uc;var lc=class extends c{constructor(e){var t;super(),this.primary=f.parseItem(e.primaryRenderer),this.counterpart=((t=e.counterpart)===null||t===void 0?void 0:t.map(i=>f.parseItem(i.counterpartRenderer)))||[]}};s(lc,"PlaylistPanelVideoWrapper");lc.type="PlaylistPanelVideoWrapper";var Rx=lc;var cc=class extends c{constructor(e){super(),this.items=f.parse(e.items)}get contents(){return this.items}};s(cc,"PlaylistSidebar");cc.type="PlaylistSidebar";var Fx=cc;var dc=class extends c{constructor(e){super(),this.stats=e.stats.map(t=>new d(t)),this.thumbnail_renderer=f.parse(e.thumbnailRenderer),this.title=new d(e.title),this.menu=f.parseItem(e.menu),this.endpoint=new T(e.navigationEndpoint),this.description=new d(e.description)}};s(dc,"PlaylistSidebarPrimaryInfo");dc.type="PlaylistSidebarPrimaryInfo";var pm=dc;var pc=class extends c{constructor(e){super(),this.owner=f.parse(e.videoOwner)||null,this.button=f.parse(e.button)||null}};s(pc,"PlaylistSidebarSecondaryInfo");pc.type="PlaylistSidebarSecondaryInfo";var fm=pc;var fc=class extends c{constructor(e){super(),this.text=new d(e.text).toString(),this.style=e.style}};s(fc,"ThumbnailOverlayTimeStatus");fc.type="ThumbnailOverlayTimeStatus";var hc=fc;var mc=class extends c{constructor(e){super(),this.id=e.videoId,this.index=new d(e.index),this.title=new d(e.title),this.author=new ri(e.shortBylineText),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.set_video_id=e==null?void 0:e.setVideoId,this.endpoint=new T(e.navigationEndpoint),this.is_playable=e.isPlayable,this.menu=f.parseItem(e.menu);let t=e.upcomingEventData&&Number(`${e.upcomingEventData.startTime}000`);t&&(this.upcoming=new Date(t)),this.duration={text:new d(e.lengthText).text,seconds:parseInt(e.lengthSeconds)}}get is_live(){var e;return((e=this.thumbnail_overlays.firstOfType(hc))===null||e===void 0?void 0:e.style)==="LIVE"}get is_upcoming(){var e;return((e=this.thumbnail_overlays.firstOfType(hc))===null||e===void 0?void 0:e.style)==="UPCOMING"}};s(mc,"PlaylistVideo");mc.type="PlaylistVideo";var hm=mc;var _c=class extends c{constructor(e){super(),this.id=e.playlistId,this.is_editable=e.isEditable,this.can_reorder=e.canReorder,this.videos=f.parse(e.contents)}};s(_c,"PlaylistVideoList");_c.type="PlaylistVideoList";var Ox=_c;var vc=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail)}};s(vc,"PlaylistVideoThumbnail");vc.type="PlaylistVideoThumbnail";var mm=vc;var yc=class extends c{constructor(e){super(),this.choices=e.choices.map(t=>({text:new d(t.text),select_endpoint:t.selectServiceEndpoint?new T(t.selectServiceEndpoint):null,deselect_endpoint:t.deselectServiceEndpoint?new T(t.deselectServiceEndpoint):null,vote_ratio_if_selected:(t==null?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_selected:new d(t.votePercentageIfSelected),vote_ratio_if_not_selected:(t==null?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_not_selected:new d(t.votePercentageIfSelected),image:t.image?S.fromResponse(t.image):null})),e.type&&(this.poll_type=e.type),e.totalVotes&&(this.total_votes=new d(e.totalVotes)),e.liveChatPollId&&(this.live_chat_poll_id=e.liveChatPollId)}};s(yc,"Poll");yc.type="Poll";var Lx=yc;var bc=class extends Co{constructor(e){super(e)}};s(bc,"Post");bc.type="Post";var _m=bc;var wc=class extends c{constructor(e){super(),this.images=f.parseArray(e.images,Xf)}};s(wc,"PostMultiImage");wc.type="PostMultiImage";var Dx=wc;var gc=class extends c{constructor(e){super(),this.items=f.parse(e.items)}get contents(){return this.items}};s(gc,"ProfileColumn");gc.type="ProfileColumn";var Bx=gc;var xc=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(xc,"ProfileColumnStats");xc.type="ProfileColumnStats";var vm=xc;var Tc=class extends c{constructor(e){super(),this.label=new d(e.label),this.value=new d(e.value)}};s(Tc,"ProfileColumnStatsEntry");Tc.type="ProfileColumnStatsEntry";var jx=Tc;var Ic=class extends c{constructor(e){super(),this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail)}};s(Ic,"ProfileColumnUserInfo");Ic.type="ProfileColumnUserInfo";var ym=Ic;var Sc=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.avatars=e.avatars.map(t=>new S(t)),this.button=f.parseItem(e.button,G),this.surface=e.surface}};s(Sc,"RecognitionShelf");Sc.type="RecognitionShelf";var Yx=Sc;var Ec=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.headline),this.thumbnails=S.fromResponse(e.thumbnail),this.views=new d(e.viewCountText),this.endpoint=new T(e.navigationEndpoint)}};s(Ec,"ReelItem");Ec.type="ReelItem";var bm=Ec;var kc=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parse(e.items),this.endpoint=e.endpoint?new T(e.endpoint):null}get contents(){return this.items}};s(kc,"ReelShelf");kc.type="ReelShelf";var wm=kc;var Cc=class extends c{constructor(e){super(),this.content=f.parse(e.content)}};s(Cc,"RelatedChipCloud");Cc.type="RelatedChipCloud";var gm=Cc;var Pc=class extends c{constructor(e){super(),this.header=f.parseItem(e.header),this.contents=f.parseArray(e.contents)}};s(Pc,"RichGrid");Pc.type="RichGrid";var tn=Pc;var Nc=class extends c{constructor(e){super(),this.content=f.parseItem(e.content)}};s(Nc,"RichItem");Nc.type="RichItem";var Ux=Nc;var Mc=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.title_style=(t=e==null?void 0:e.titleStyle)===null||t===void 0?void 0:t.style,this.icon_type=(i=e==null?void 0:e.icon)===null||i===void 0?void 0:i.iconType}};s(Mc,"RichListHeader");Mc.type="RichListHeader";var Wx=Mc;var Vc=class extends c{constructor(e){super(),this.content=f.parseItem(e.content)}};s(Vc,"RichSection");Vc.type="RichSection";var Gx=Vc;var Ac=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=f.parseArray(e.contents),this.endpoint=e.endpoint?new T(e.endpoint):null}};s(Ac,"RichShelf");Ac.type="RichShelf";var xm=Ac;var Rc=class extends c{constructor(e){super(),this.endpoint=new T(e.endpoint),this.search_button=f.parse(e.searchButton),this.clear_button=f.parse(e.clearButton),this.placeholder_text=new d(e.placeholderText)}};s(Rc,"SearchBox");Rc.type="SearchBox";var Jx=Rc;var Fc=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.endpoint=new T(e.searchEndpoint),this.query=new d(e.query).toString()}};s(Fc,"SearchRefinementCard");Fc.type="SearchRefinementCard";var Oc=Fc;var Lc=class extends c{constructor(e){super(),this.contents=f.parse(e.contents)}};s(Lc,"SearchSuggestionsSection");Lc.type="SearchSuggestionsSection";var Tm=Lc;var Dc=class extends c{constructor(e){super(),this.contents=f.parse(e.contents)}};s(Dc,"SecondarySearchContainer");Dc.type="SecondarySearchContainer";var Hx=Dc;var Bc=class extends c{constructor(e){super(),e.targetId&&(this.target_id=e.targetId),this.contents=f.parseArray(e.contents),e.continuations&&(e.continuations[0].nextContinuationData?this.continuation=e.continuations[0].nextContinuationData.continuation:e.continuations[0].reloadContinuationData&&(this.continuation=e.continuations[0].reloadContinuationData.continuation)),e.header&&(this.header=f.parse(e.header)),e.subMenu&&(this.sub_menu=f.parseItem(e.subMenu))}};s(Bc,"SectionList");Bc.type="SectionList";var _e=Bc;var jc=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p,b;super(),this.text=new d(e.defaultText),this.toggled_text=new d(e.toggledText),this.tooltip=e.defaultTooltip,this.toggled_tooltip=e.toggledTooltip,this.is_toggled=e.isToggled,this.is_disabled=e.isDisabled,this.icon_type=e.defaultIcon.iconType;let I=((r=(i=(t=e==null?void 0:e.defaultText)===null||t===void 0?void 0:t.accessibility)===null||i===void 0?void 0:i.accessibilityData)===null||r===void 0?void 0:r.label)||((l=(a=e==null?void 0:e.accessibilityData)===null||a===void 0?void 0:a.accessibilityData)===null||l===void 0?void 0:l.label)||((h=e==null?void 0:e.accessibility)===null||h===void 0?void 0:h.label);this.icon_type=="LIKE"&&(this.like_count=parseInt(I.replace(/\D/g,"")),this.short_like_count=new d(e.defaultText).toString()),this.endpoint=!((_=(v=e.defaultServiceEndpoint)===null||v===void 0?void 0:v.commandExecutorCommand)===null||_===void 0)&&_.commands?new T(e.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new T(e.defaultServiceEndpoint),this.toggled_endpoint=new T(e.toggledServiceEndpoint),this.button_id=((b=(p=e.toggleButtonSupportedData)===null||p===void 0?void 0:p.toggleButtonIdData)===null||b===void 0?void 0:b.id)||null,this.target_id=e.targetId||null}};s(jc,"ToggleButton");jc.type="ToggleButton";var Et=jc;var Yc=class extends c{constructor(e){super(),this.like_button=f.parseItem(e.likeButton,Et),this.dislike_button=f.parseItem(e.dislikeButton,Et)}};s(Yc,"SegmentedLikeDislikeButton");Yc.type="SegmentedLikeDislikeButton";var Fn=Yc;var Uc=class extends c{constructor(e){super(),e.title&&(this.title=new d(e.title)),e.summary&&(this.summary=new d(e.summary)),e.enableServiceEndpoint&&(this.enable_endpoint=new T(e.enableServiceEndpoint)),e.disableServiceEndpoint&&(this.disable_endpoint=new T(e.disableServiceEndpoint)),this.item_id=e.itemId}};s(Uc,"SettingBoolean");Uc.type="SettingBoolean";var zx=Uc;var Wc=class extends c{constructor(e){super(),this.title=new d(e.title),this.help_text=new d(e.helpText),this.enabled=e.enabled,this.disabled=e.disabled,this.id=e.id}};s(Wc,"SettingsCheckbox");Wc.type="SettingsCheckbox";var Im=Wc;var Gc=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.enabled=e.enabled,this.enable_endpoint=new T(e.enableServiceEndpoint),this.disable_endpoint=new T(e.disableServiceEndpoint)}};s(Gc,"SettingsSwitch");Gc.type="SettingsSwitch";var Uo=Gc;var Jc=class extends c{constructor(e){super(),this.title=new d(e.title),Reflect.has(e,"text")&&(this.text=new d(e.text).toString()),Reflect.has(e,"options")&&(this.options=f.parseArray(e.options,[Uo,Io,bh,Im,oh]))}};s(Jc,"SettingsOptions");Jc.type="SettingsOptions";var Wo=Jc;var Hc=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parseArray(e.items,Ao)}get contents(){return this.items}};s(Hc,"SettingsSidebar");Hc.type="SettingsSidebar";var Sm=Hc;var zc=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),e.endpoint&&(this.endpoint=new T(e.endpoint)),this.content=f.parseItem(e.content)||null,!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType),e.menu&&(this.menu=f.parseItem(e.menu))}};s(zc,"Shelf");zc.type="Shelf";var Go=zc;var Kc=class extends c{constructor(e){super(),this.corrected_query=new d(e.correctedQuery),this.endpoint=new T(e.correctedQueryEndpoint),this.original_query_endpoint=new T(e.originalQueryEndpoint),this.original_query=new d(e.originalQuery),this.showing_results_for=new d(e.showingResultsFor),this.search_instead_for=new d(e.searchInsteadFor)}};s(Kc,"ShowingResultsFor");Kc.type="ShowingResultsFor";var Em=Kc;var qc=class extends c{constructor(e){super(),this.image=S.fromResponse(e.image),this.title=new d(e.title),this.display_domain=new d(e.displayDomain),this.show_link_icon=e.showLinkIcon,this.call_to_action=e.callToAction,this.endpoint=new T(e.command)}};s(qc,"SimpleCardContent");qc.type="SimpleCardContent";var Kx=qc;var $c=class extends c{constructor(e){super(),this.message=new d(e.message),this.prominent=e.prominent}};s($c,"SimpleCardTeaser");$c.type="SimpleCardTeaser";var qx=$c;var Xc=class extends c{constructor(e){super(),this.lines=e.lines.map(t=>new d(t)),this.style=e.layoutStyle}};s(Xc,"SimpleTextSection");Xc.type="SimpleTextSection";var $x=Xc;var Qc=class extends c{constructor(e){super(),this.action_text=new d(e.actionText),this.nav_text=new d(e.navigationText),this.details=new d(e.detailsText),this.icon_type=e.icon.iconType,this.endpoint=new T(e.navigationEndpoint)}};s(Qc,"SingleActionEmergencySupport");Qc.type="SingleActionEmergencySupport";var Xx=Qc;var Zc=class extends c{constructor(e){super(),this.title=e.title||"N/A",this.selected=e.selected||!1,this.endpoint=new T(e.endpoint),this.content=f.parseItem(e.content,[_e,Yo,tn])}};s(Zc,"Tab");Zc.type="Tab";var Ce=Zc;var ed=class extends c{constructor(e){super(),this.tabs=f.parseArray(e.tabs,Ce)}};s(ed,"SingleColumnBrowseResults");ed.type="SingleColumnBrowseResults";var di=ed;var td=class extends c{constructor(e){super(),this.contents=f.parse(e)}};s(td,"SingleColumnMusicWatchNextResults");td.type="SingleColumnMusicWatchNextResults";var Qx=td;var id=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.style=e.style}};s(id,"SingleHeroImage");id.type="SingleHeroImage";var Zx=id;var nd=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parseItem(e.subscribeButton,Lt)}};s(nd,"SlimOwner");nd.type="SlimOwner";var eT=nd;var od=class extends c{constructor(e){super(),this.title=new d(e.title),this.collapsed_subtitle=new d(e.collapsedSubtitle),this.expanded_subtitle=new d(e.expandedSubtitle),this.owner=f.parseItem(e.owner),this.description=new d(e.description),this.video_id=e.videoId,this.date=new d(e.dateText)}};s(od,"SlimVideoMetadata");od.type="SlimVideoMetadata";var km=od;var sd=class extends c{constructor(e){var t,i,r;super(),e.title&&(this.title=e.title),!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=e.icon.iconType),!((r=(i=e.accessibility)===null||i===void 0?void 0:i.accessibilityData)===null||r===void 0)&&r.label&&(this.label=e.accessibility.accessibilityData.label),e.tooltip&&(this.tooltip=e.tooltip),e.subMenuItems&&(this.sub_menu_items=e.subMenuItems.map(a=>{var l,h;return{title:a.title,selected:a.selected,continuation:(h=(l=a.continuation)===null||l===void 0?void 0:l.reloadContinuationData)===null||h===void 0?void 0:h.continuation,endpoint:new T(a.serviceEndpoint||a.navigationEndpoint),subtitle:a.subtitle||null}}))}};s(sd,"SortFilterSubMenu");sd.type="SortFilterSubMenu";var rd=sd;var ad=class extends c{constructor(e){super(),this.name=new d(e.name),this.is_selected=e.isSelected,this.endpoint=new T(e.navigationEndpoint)}};s(ad,"SubFeedOption");ad.type="SubFeedOption";var tT=ad;var ud=class extends c{constructor(e){super(),this.title=new d(e.title),this.options=f.parse(e.options)}};s(ud,"SubFeedSelector");ud.type="SubFeedSelector";var iT=ud;var ld=class extends c{constructor(e){super(),this.contents=f.parse(e)}};s(ld,"Tabbed");ld.type="Tabbed";var nT=ld;var cd=class extends c{constructor(e){super(),this.tabs=f.parseArray(e.tabs,Ce)}};s(cd,"TabbedSearchResults");cd.type="TabbedSearchResults";var Cm=cd;var dd=class extends c{constructor(e){super(),this.title=new d(e.title),this.style=e.style}};s(dd,"TextHeader");dd.type="TextHeader";var oT=dd;var pd=class extends c{constructor(e){super(),this.landscape=S.fromResponse(e.landscape),this.portrait=S.fromResponse(e.portrait)}};s(pd,"ThumbnailLandscapePortrait");pd.type="ThumbnailLandscapePortrait";var sT=pd;var fd=class extends c{constructor(e){super(),this.icon_type=e.icon.iconType}};s(fd,"ThumbnailOverlayBottomPanel");fd.type="ThumbnailOverlayBottomPanel";var rT=fd;var hd=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(hd,"ThumbnailOverlayEndorsement");hd.type="ThumbnailOverlayEndorsement";var aT=hd;var md=class extends c{constructor(e){super(),this.text=new d(e.text),this.icon_type=e.icon.iconType}};s(md,"ThumbnailOverlayHoverText");md.type="ThumbnailOverlayHoverText";var uT=md;var _d=class extends c{constructor(e){super(),this.text=new d(e.text).toString(),this.icon_type=e.icon.iconType}};s(_d,"ThumbnailOverlayInlineUnplayable");_d.type="ThumbnailOverlayInlineUnplayable";var lT=_d;var vd=class extends c{constructor(e){super(),this.text=new d(e.text)}};s(vd,"ThumbnailOverlayLoadingPreview");vd.type="ThumbnailOverlayLoadingPreview";var cT=vd;var yd=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(yd,"ThumbnailOverlayNowPlaying");yd.type="ThumbnailOverlayNowPlaying";var dT=yd;var bd=class extends c{constructor(e){super(),this.hack=e.hack}};s(bd,"ThumbnailOverlayPinking");bd.type="ThumbnailOverlayPinking";var pT=bd;var wd=class extends c{constructor(e){super(),this.text=e.texts.map(t=>new d(t))[0].toString()}};s(wd,"ThumbnailOverlayPlaybackStatus");wd.type="ThumbnailOverlayPlaybackStatus";var fT=wd;var gd=class extends c{constructor(e){super(),this.percent_duration_watched=e.percentDurationWatched}};s(gd,"ThumbnailOverlayResumePlayback");gd.type="ThumbnailOverlayResumePlayback";var hT=gd;var xd=class extends c{constructor(e){super(),this.text=new d(e.text),this.icon_type=e.icon.iconType}};s(xd,"ThumbnailOverlaySidePanel");xd.type="ThumbnailOverlaySidePanel";var mT=xd;var Td=class extends c{constructor(e){super(),this.is_toggled=e.isToggled||null,this.icon_type={toggled:e.toggledIcon.iconType,untoggled:e.untoggledIcon.iconType},this.tooltip={toggled:e.toggledTooltip,untoggled:e.untoggledTooltip},this.toggled_endpoint=new T(e.toggledServiceEndpoint),this.untoggled_endpoint=new T(e.untoggledServiceEndpoint)}};s(Td,"ThumbnailOverlayToggleButton");Td.type="ThumbnailOverlayToggleButton";var _T=Td;var Id=class extends c{constructor(e){super(),this.visible_time_range_start_millis=e.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=e.visibleTimeRangeEndMillis,this.decoration_time_millis=e.decorationTimeMillis,this.label=new d(e.label),this.icon=e.icon}};s(Id,"TimedMarkerDecoration");Id.type="TimedMarkerDecoration";var vT=Id;var Sd=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Sd,"TitleAndButtonListHeader");Sd.type="TitleAndButtonListHeader";var yT=Sd;var Ed=class extends c{constructor(e){super(),this.text=new d(e.defaultText),this.toggled_text=new d(e.toggledText),this.icon_type=e.defaultIcon.iconType,this.toggled_icon_type=e.toggledIcon.iconType,this.endpoint=new T(e.toggledServiceEndpoint)}};s(Ed,"ToggleMenuServiceItem");Ed.type="ToggleMenuServiceItem";var bT=Ed;var kd=class extends c{constructor(e){super(),this.promo_config={promo_id:e.promoConfig.promoId,impression_endpoints:e.promoConfig.impressionEndpoints.map(t=>new T(t)),accept:new T(e.promoConfig.acceptCommand),dismiss:new T(e.promoConfig.dismissCommand)},this.target_id=e.targetId,this.details=new d(e.detailsText),this.suggested_position=e.suggestedPosition.type,this.dismiss_stratedy=e.dismissStrategy.type,this.dwell_time_ms=parseInt(e.dwellTimeMs)}};s(kd,"Tooltip");kd.type="Tooltip";var wT=kd;var Cd=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.avatar=S.fromResponse((t=e.thumbnail)!==null&&t!==void 0?t:e.avatar),this.subtitle=new d(e.subtitle),this.subscribe_button=f.parseItem(e.subscribeButton,Lt),this.endpoint=new T(e.navigationEndpoint)}};s(Cd,"TopicChannelDetails");Cd.type="TopicChannelDetails";var gT=Cd;var Pd=class extends c{constructor(e){super(),this.tabs=f.parse(e.tabs),this.secondary_contents=f.parse(e.secondaryContents)}};s(Pd,"TwoColumnBrowseResults");Pd.type="TwoColumnBrowseResults";var nn=Pd;var Nd=class extends c{constructor(e){super(),this.primary_contents=f.parse(e.primaryContents),this.secondary_contents=f.parse(e.secondaryContents)}};s(Nd,"TwoColumnSearchResults");Nd.type="TwoColumnSearchResults";var Pm=Nd;var Md=class extends c{constructor(e){var t,i;super(),this.results=f.parseArray((t=e.results)===null||t===void 0?void 0:t.results.contents),this.secondary_results=f.parseArray((i=e.secondaryResults)===null||i===void 0?void 0:i.secondaryResults.results),this.conversation_bar=f.parseItem(e==null?void 0:e.conversationBar)}};s(Md,"TwoColumnWatchNextResults");Md.type="TwoColumnWatchNextResults";var Jo=Md;var Vd=class extends c{constructor(e){super(),this.header=f.parseItem(e.header),this.call_to_action=f.parseItem(e.callToAction),this.sections=f.parseArray(e.sections),e.collapsedLabel&&(this.collapsed_label=new d(e.collapsedLabel))}};s(Vd,"UniversalWatchCard");Vd.type="UniversalWatchCard";var Nm=Vd;var Ad=class extends c{constructor(e){super(),this.message_title=new d(e.dialogMessageTitle),this.message_text=new d(e.dialogMessageText),this.action_button=f.parseItem(e.actionButton),this.dismiss_button=f.parseItem(e.dismissButton),this.is_visible=e.isVisible}};s(Ad,"UpsellDialog");Ad.type="UpsellDialog";var xT=Ad;var Rd=class extends c{constructor(e){super(),this.items=f.parse(e.items),this.collapsed_item_count=e.collapsedItemCount,this.collapsed_state_button_text=new d(e.collapsedStateButtonText)}get contents(){return this.items}};s(Rd,"VerticalList");Rd.type="VerticalList";var TT=Rd;var Fd=class extends c{constructor(e){super(),this.items=f.parseArray(e.items),this.contents=this.items,this.view_all_text=new d(e.viewAllText),this.view_all_endpoint=new T(e.viewAllEndpoint)}};s(Fd,"VerticalWatchCardList");Fd.type="VerticalWatchCardList";var IT=Fd;var Od=class extends c{constructor(e){var t,i,r,a;super();let l=((t=e.thumbnailOverlays.find(v=>v.thumbnailOverlayTimeStatusRenderer))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new d(e.title),this.description_snippet=e.descriptionSnippet?new d(e.descriptionSnippet):null,this.snippets=((i=e.detailedMetadataSnippets)===null||i===void 0?void 0:i.map(v=>({text:new d(v.snippetText),hover_text:new d(v.snippetHoverText)})))||[],this.expandable_metadata=f.parseItem(e.expandableMetadata),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.rich_thumbnail=e.richThumbnail?f.parseItem(e.richThumbnail):null,this.author=new be(e.ownerText,e.ownerBadges,(a=(r=e.channelThumbnailSupportedRenderers)===null||r===void 0?void 0:r.channelThumbnailWithLinkRenderer)===null||a===void 0?void 0:a.thumbnail),this.badges=f.parseArray(e.badges,we),this.endpoint=new T(e.navigationEndpoint),this.published=new d(e.publishedTimeText),this.view_count=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText);let h=e.upcomingEventData&&Number(`${e.upcomingEventData.startTime}000`);h&&(this.upcoming=new Date(h)),this.duration={text:e.lengthText?new d(e.lengthText).text:new d(l).text,seconds:ut(e.lengthText?new d(e.lengthText).text:new d(l).text)},this.show_action_menu=e.showActionMenu,this.is_watched=e.isWatched||!1,this.menu=f.parseItem(e.menu,Ye),this.search_video_result_entity_key=e.searchVideoResultEntityKey}get description(){var e;return this.snippets.length>0?this.snippets.map(t=>t.text.toString()).join(""):((e=this.description_snippet)===null||e===void 0?void 0:e.toString())||""}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some(e=>e.label==="PREMIERE")}get is_4k(){return this.badges.some(e=>e.label==="4K")}get has_captions(){return this.badges.some(e=>e.label==="CC")}get best_thumbnail(){return this.thumbnails[0]}};s(Od,"Video");Od.type="Video";var Ho=Od;var Ld=class extends Ho{constructor(e){super(e)}};s(Ld,"VideoCard");Ld.type="VideoCard";var ST=Ld;var Dd=class extends c{constructor(e){super(),this.title=new d(e.videoTitle),this.channel_name=new d(e.channelName),this.view_count=new d(e.viewCountText),this.video_thumbnails=S.fromResponse(e.videoThumbnail),this.duration=new d(e.lengthString),this.endpoint=new T(e.action)}};s(Dd,"VideoInfoCardContent");Dd.type="VideoInfoCardContent";var ET=Dd;var Bd=class extends c{constructor(e){super(),this.subscription_button=e.subscriptionButton||null,this.subscriber_count=new d(e.subscriberCountText),this.author=new be(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.badges,e.thumbnail)}};s(Bd,"VideoOwner");Bd.type="VideoOwner";var Mm=Bd;var jd=class extends c{constructor(e){super(),this.title=new d(e.title),this.super_title_link=new d(e.superTitleLink),this.view_count=new d(e.viewCount.videoViewCountRenderer.viewCount),this.short_view_count=new d(e.viewCount.videoViewCountRenderer.shortViewCount),this.published=new d(e.dateText),this.menu=f.parseItem(e.videoActions,Ye)}};s(jd,"VideoPrimaryInfo");jd.type="VideoPrimaryInfo";var Vm=jd;var Yd=class extends c{constructor(e){super(),this.owner=f.parseItem(e.owner),this.description=new d(e.description),this.subscribe_button=f.parseItem(e.subscribeButton,[Lt,G]),this.metadata=f.parseItem(e.metadataRowContainer,qh),this.show_more_text=e.showMoreText,this.show_less_text=e.showLessText,this.default_expanded=e.defaultExpanded,this.description_collapsed_lines=e.descriptionCollapsedLines}};s(Yd,"VideoSecondaryInfo");Yd.type="VideoSecondaryInfo";var Am=Yd;var Ud=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.duration={text:new d(e.lengthText).toString(),seconds:ut(e.lengthText.simpleText)},this.style=e.style}};s(Ud,"WatchCardCompactVideo");Ud.type="WatchCardCompactVideo";var Rm=Ud;var Wd=class extends c{constructor(e){var t;super(),this.endpoint=new T(e.navigationEndpoint),this.call_to_action_button=f.parseItem(e.callToActionButton),this.hero_image=f.parseItem(e.heroImage),this.label=((t=e.lengthText)===null||t===void 0?void 0:t.accessibility.accessibilityData.label)||""}};s(Wd,"WatchCardHeroVideo");Wd.type="WatchCardHeroVideo";var kT=Wd;var Gd=class extends c{constructor(e){super(),this.title=new d(e.title),this.title_endpoint=new T(e.titleNavigationEndpoint),this.subtitle=new d(e.subtitle),this.author=new be(e,e.titleBadge?[e.titleBadge]:null,e.avatar),this.author.name=this.title.toString(),this.style=e.style}};s(Gd,"WatchCardRichHeader");Gd.type="WatchCardRichHeader";var CT=Gd;var Jd=class extends c{constructor(e){super(),this.lists=f.parseArray(e.lists)}};s(Jd,"WatchCardSectionSequence");Jd.type="WatchCardSectionSequence";var PT=Jd;var Hd=class extends nn{constructor(e){super(e)}};s(Hd,"WatchNextTabbedResults");Hd.type="WatchNextTabbedResults";var Fm=Hd;var zd=class extends c{constructor(e){var t,i;super(),this.title=e.title,this.content=f.parseItem(e.content),this.endpoint=new T(e.navigationEndpoint),this.category_assets={asset_key:(t=e.categoryAssets)===null||t===void 0?void 0:t.assetKey,background_color:(i=e.categoryAssets)===null||i===void 0?void 0:i.backgroundColor},this.category_type=e.categoryType}};s(zd,"AnchoredSection");zd.type="AnchoredSection";var NT=zd;var Kd=class extends c{constructor(e){super(),this.category_tabs=f.parseArray(e.categoryTabs),this.privacy_button=f.parseItem(e.privacyButtonRenderer)}};s(Kd,"KidsCategoriesHeader");Kd.type="kidsCategoriesHeader";var Om=Kd;var qd=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.category_assets={asset_key:(t=e.categoryAssets)===null||t===void 0?void 0:t.assetKey,background_color:(i=e.categoryAssets)===null||i===void 0?void 0:i.backgroundColor},this.category_type=e.categoryType,this.endpoint=new T(e.endpoint)}};s(qd,"KidsCategoryTab");qd.type="KidsCategoryTab";var Lm=qd;var $d=class extends c{constructor(e){super(),this.anchors=f.parseArray(e.anchors)}};s($d,"KidsHomeScreen");$d.type="kidsHomeScreen";var Dm=$d;var MT={AccountChannel:Gf,AccountItemSection:Hf,AccountItemSectionHeader:Jf,AccountSectionList:zf,AppendContinuationItemsAction:Kf,OpenPopupAction:Nb,Alert:Mb,AnalyticsMainAppKeyMetrics:Vb,AnalyticsRoot:Ab,AnalyticsShortsCarouselCard:Rb,AnalyticsVideo:$f,AnalyticsVodCarouselCard:Fb,CtaGoToCreatorStudio:Ob,DataModelSection:qf,StatRow:Lb,AudioOnlyPlayability:Db,AutomixPreviewVideo:Eo,BackstageImage:Xf,BackstagePost:Co,BackstagePostThread:Bb,BrowseFeedActions:Zf,BrowserMediaSession:jb,Button:G,C4TabbedHeader:Po,CallToActionButton:Yb,Card:Ub,CardCollection:Wb,CarouselHeader:eh,CarouselItem:Gb,Channel:th,ChannelAboutFullMetadata:ih,ChannelAgeGate:Jb,ChannelFeaturedContent:Hb,ChannelHeaderLinks:zb,ChannelMetadata:nh,ChannelMobileHeader:Kb,ChannelOptions:oh,ChannelSubMenu:Ar,ChannelThumbnailWithLink:qb,ChannelVideoPlayer:$b,Chapter:Xb,ChildVideo:Qb,ChipCloud:Ai,ChipCloudChip:De,CollaboratorInfoCardContent:Zb,CollageHeroImage:ew,AuthorCommentBadge:rh,Comment:Vo,CommentActionButtons:Ww,CommentDialog:Gw,CommentReplies:Jw,CommentReplyDialog:ah,CommentsEntryPointHeader:fh,CommentsHeader:hh,CommentSimplebox:mh,CommentThread:_h,CreatorHeart:zw,EmojiPicker:Kw,PdgCommentChip:qw,SponsorCommentBadge:$w,CompactChannel:Xw,CompactLink:Ao,CompactMix:Qw,CompactPlaylist:Zw,CompactStation:eg,CompactVideo:yh,ConfirmDialog:tg,ContinuationItem:it,CopyLink:bh,CreatePlaylistDialog:Af,DecoratedPlayerBar:ig,DefaultPromoPanel:ng,DidYouMean:wh,DownloadButton:og,Dropdown:Io,DropdownItem:Vf,Element:Ro,EmergencyOnebox:sg,EmojiPickerCategory:rg,EmojiPickerCategoryButton:ag,EmojiPickerUpsellCategory:ug,Endscreen:lg,EndscreenElement:cg,EndScreenPlaylist:xh,EndScreenVideo:Th,ExpandableMetadata:dg,ExpandableTab:Fo,ExpandedShelfContents:pg,FeedFilterChipBar:Oi,FeedTabbedHeader:Ih,GameCard:fg,GameDetails:hg,Grid:Mn,GridChannel:Sh,GridHeader:mg,GridPlaylist:Eh,GridVideo:kh,HashtagHeader:Ch,Heatmap:_g,HeatMarker:vg,HighlightsCarousel:Ua,HistorySuggestion:yg,HorizontalCardList:Nh,HorizontalList:bg,IconLink:Mh,InteractiveTabbedHeader:Ah,ItemSection:Ve,ItemSectionHeader:wg,ItemSectionTab:Rh,ItemSectionTabbedHeader:gg,LikeButton:xg,LiveChat:Fh,AddBannerToLiveChatCommand:Tg,AddChatItemAction:Oh,AddLiveChatTickerItemAction:Ig,DimChatItemAction:Sg,LiveChatAutoModMessage:Eg,LiveChatBanner:kg,LiveChatBannerHeader:Cg,LiveChatBannerPoll:Pg,LiveChatMembershipItem:Ng,LiveChatPaidMessage:Mg,LiveChatPaidSticker:Vg,LiveChatPlaceholderItem:Ag,LiveChatProductItem:Rg,LiveChatRestrictedParticipation:Fg,LiveChatTextMessage:Dh,LiveChatTickerPaidMessageItem:Og,LiveChatTickerPaidStickerItem:Lg,LiveChatTickerSponsorItem:Dg,LiveChatViewerEngagementMessage:Bg,PollHeader:jg,LiveChatActionPanel:Bh,MarkChatItemAsDeletedAction:Yg,MarkChatItemsByAuthorAsDeletedAction:Ug,RemoveBannerForLiveChatCommand:Wg,RemoveChatItemAction:Gg,RemoveChatItemByAuthorAction:Jg,ReplaceChatItemAction:Hg,ReplayChatItemAction:zg,ShowLiveChatActionPanelAction:Kg,ShowLiveChatDialogAction:qg,ShowLiveChatTooltipCommand:$g,UpdateDateTextAction:jh,UpdateDescriptionAction:Yh,UpdateLiveChatPollAction:Xg,UpdateTitleAction:Uh,UpdateToggleButtonTextAction:Wh,UpdateViewershipAction:Gh,LiveChatAuthorBadge:Le,LiveChatDialog:Qg,LiveChatHeader:Zg,LiveChatItemList:ex,LiveChatMessageInput:tx,LiveChatParticipant:ix,LiveChatParticipantsList:nx,MacroMarkersListItem:ox,Menu:Ye,MenuNavigationItem:sx,MenuServiceItem:Oo,MenuServiceItemDownload:rx,MultiPageMenu:ax,MultiPageMenuNotificationSection:ux,MusicMenuItemDivider:Jh,MusicMultiSelectMenu:Hh,MusicMultiSelectMenuItem:Ht,SimpleMenuHeader:zh,MerchandiseItem:lx,MerchandiseShelf:Kh,Message:Dt,MetadataBadge:we,MetadataRow:cx,MetadataRowContainer:qh,MetadataRowHeader:dx,MetadataScreen:px,MicroformatData:ui,Mix:fx,Movie:hx,MovingThumbnail:mx,MultiMarkersPlayerBar:_x,MusicCarouselShelf:Ue,MusicCarouselShelfBasicHeader:Zh,MusicDescriptionShelf:Vn,MusicDetailHeader:An,MusicDownloadStateBadge:Sx,MusicEditablePlaylistDetailHeader:em,MusicElementHeader:Vl,MusicHeader:Qi,MusicImmersiveHeader:tm,MusicInlineBadge:Ex,MusicItemThumbnailOverlay:Lo,MusicLargeCardItemCarousel:kx,MusicNavigationButton:jo,MusicPlayButton:$h,MusicPlaylistShelf:Rn,MusicQueue:Yo,MusicResponsiveListItem:Xi,MusicResponsiveListItemFixedColumn:Qh,MusicResponsiveListItemFlexColumn:Xh,MusicShelf:Ae,MusicSideAlignedItem:im,MusicSortFilterButton:Jl,MusicThumbnail:Bo,MusicTwoRowItem:Do,MusicVisualHeader:nm,NavigationEndpoint:T,Notification:om,PageIntroduction:sm,PlayerAnnotationsExpanded:Cx,PlayerCaptionsTracklist:Px,PlayerErrorMessage:Nx,PlayerLiveStoryboardSpec:Mx,PlayerMicroformat:Zi,PlayerOverlay:en,PlayerOverlayAutoplay:am,PlayerStoryboardSpec:Vx,Playlist:ai,PlaylistCustomThumbnail:um,PlaylistHeader:lm,PlaylistInfoCardContent:Ax,PlaylistMetadata:cm,PlaylistPanel:ci,PlaylistPanelVideo:dm,PlaylistPanelVideoWrapper:Rx,PlaylistSidebar:Fx,PlaylistSidebarPrimaryInfo:pm,PlaylistSidebarSecondaryInfo:fm,PlaylistVideo:hm,PlaylistVideoList:Ox,PlaylistVideoThumbnail:mm,Poll:Lx,Post:_m,PostMultiImage:Dx,ProfileColumn:Bx,ProfileColumnStats:vm,ProfileColumnStatsEntry:jx,ProfileColumnUserInfo:ym,RecognitionShelf:Yx,ReelItem:bm,ReelShelf:wm,RelatedChipCloud:gm,RichGrid:tn,RichItem:Ux,RichListHeader:Wx,RichSection:Gx,RichShelf:xm,SearchBox:Jx,SearchRefinementCard:Oc,SearchSuggestion:Ph,SearchSuggestionsSection:Tm,SecondarySearchContainer:Hx,SectionList:_e,SegmentedLikeDislikeButton:Fn,SettingBoolean:zx,SettingsCheckbox:Im,SettingsOptions:Wo,SettingsSidebar:Sm,SettingsSwitch:Uo,Shelf:Go,ShowingResultsFor:Em,SimpleCardContent:Kx,SimpleCardTeaser:qx,SimpleTextSection:$x,SingleActionEmergencySupport:Xx,SingleColumnBrowseResults:di,SingleColumnMusicWatchNextResults:Qx,SingleHeroImage:Zx,SlimOwner:eT,SlimVideoMetadata:km,SortFilterSubMenu:rd,SubFeedOption:tT,SubFeedSelector:iT,SubscribeButton:Lt,SubscriptionNotificationToggleButton:Vh,Tab:Ce,Tabbed:nT,TabbedSearchResults:Cm,TextHeader:oT,ThumbnailLandscapePortrait:sT,ThumbnailOverlayBottomPanel:rT,ThumbnailOverlayEndorsement:aT,ThumbnailOverlayHoverText:uT,ThumbnailOverlayInlineUnplayable:lT,ThumbnailOverlayLoadingPreview:cT,ThumbnailOverlayNowPlaying:dT,ThumbnailOverlayPinking:pT,ThumbnailOverlayPlaybackStatus:fT,ThumbnailOverlayResumePlayback:hT,ThumbnailOverlaySidePanel:mT,ThumbnailOverlayTimeStatus:hc,ThumbnailOverlayToggleButton:_T,TimedMarkerDecoration:vT,TitleAndButtonListHeader:yT,ToggleButton:Et,ToggleMenuServiceItem:bT,Tooltip:wT,TopicChannelDetails:gT,TwoColumnBrowseResults:nn,TwoColumnSearchResults:Pm,TwoColumnWatchNextResults:Jo,UniversalWatchCard:Nm,UpsellDialog:xT,VerticalList:TT,VerticalWatchCardList:IT,Video:Ho,VideoCard:ST,VideoInfoCardContent:ET,VideoOwner:Mm,VideoPrimaryInfo:Vm,VideoSecondaryInfo:Am,WatchCardCompactVideo:Rm,WatchCardHeroVideo:kT,WatchCardRichHeader:CT,WatchCardSectionSequence:PT,WatchNextEndScreen:rm,WatchNextTabbedResults:Fm,AnchoredSection:NT,KidsCategoriesHeader:Om,KidsCategoryTab:Lm,KidsHomeScreen:Dm},yS={Author:be,ChildElement:gh,EmojiRun:Df,Format:Yf,NavigatableText:ko,PlaylistAuthor:ri,Text:d,TextRun:Ff,Thumbnail:S,VideoDetails:Wf},bS=MT;function b0(n){let e=bS[n];if(!e){let t=new Error(`Module not found: ${n}`);throw t.code="MODULE_NOT_FOUND",t}return e}s(b0,"GetParserByName");var w0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ue=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},te,g0,on,pi,fi,VT,hi,AT,ie=class{static setParserErrorHandler(e){w0(this,te,e,"f",g0)}static parseResponse(e){var t,i,r,a;let l={};ue(this,te,"m",fi).call(this);let h=this.parse(e.contents),v=ue(this,te,"m",hi).call(this);h&&(l.contents=h,l.contents_memo=v),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let _=e.onResponseReceivedActions?this.parseRR(e.onResponseReceivedActions):null,p=ue(this,te,"m",hi).call(this);_&&(l.on_response_received_actions=_,l.on_response_received_actions_memo=p),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let b=e.onResponseReceivedEndpoints?this.parseRR(e.onResponseReceivedEndpoints):null,I=ue(this,te,"m",hi).call(this);b&&(l.on_response_received_endpoints=b,l.on_response_received_endpoints_memo=I),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let C=e.onResponseReceivedCommands?this.parseRR(e.onResponseReceivedCommands):null,N=ue(this,te,"m",hi).call(this);C&&(l.on_response_received_commands=C,l.on_response_received_commands_memo=N),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let L=e.continuationContents?this.parseLC(e.continuationContents):null,O=ue(this,te,"m",hi).call(this);L&&(l.continuation_contents=L,l.continuation_contents_memo=O),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let D=e.actions?this.parseActions(e.actions):null,K=ue(this,te,"m",hi).call(this);D&&(l.actions=D,l.actions_memo=K),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let F=e.liveChatItemContextMenuSupportedRenderers?this.parseItem(e.liveChatItemContextMenuSupportedRenderers):null,w=ue(this,te,"m",hi).call(this);F&&(l.live_chat_item_context_menu_supported_renderers=F,l.live_chat_item_context_menu_supported_renderers_memo=w),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let ve=e.header?this.parse(e.header):null,Ge=ue(this,te,"m",hi).call(this);ve&&(l.header=ve,l.header_memo=Ge),ue(this,te,"m",pi).call(this),ue(this,te,"m",fi).call(this);let Ee=e.sidebar?this.parseItem(e.sidebar):null,tt=ue(this,te,"m",hi).call(this);Ee&&(l.sidebar=Ee,l.sidebar_memo=tt),ue(this,te,"m",pi).call(this),this.applyMutations(v,(i=(t=e.frameworkUpdates)===null||t===void 0?void 0:t.entityBatchUpdate)===null||i===void 0?void 0:i.mutations),this.applyMutations(O,(a=(r=e.frameworkUpdates)===null||r===void 0?void 0:r.entityBatchUpdate)===null||a===void 0?void 0:a.mutations);let $=e.continuation?this.parseC(e.continuation):null;$&&(l.continuation=$);let B=this.parse(e.metadata);B&&(l.metadata=B);let se=this.parseItem(e.microformat);se&&(l.microformat=se);let re=this.parseItem(e.overlay);re&&(l.overlay=re);let st=this.parseArray(e.alerts);st.length&&(l.alerts=st);let rt=e.refinements;rt&&(l.refinements=rt);let xt=e.estimatedResults?parseInt(e.estimatedResults):null;xt&&(l.estimated_results=xt);let Xe=this.parse(e.playerOverlays);Xe&&(l.player_overlays=Xe);let Je=e.playbackTracking?{videostats_watchtime_url:e.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:e.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;Je&&(l.playback_tracking=Je);let ce=e.playabilityStatus?{status:e.playabilityStatus.status,reason:e.playabilityStatus.reason||"",embeddable:!!e.playabilityStatus.playableInEmbed||!1,audio_only_playablility:this.parseItem(e.playabilityStatus.audioOnlyPlayability),error_screen:this.parseItem(e.playabilityStatus.errorScreen)}:null;ce&&(l.playability_status=ce);let Me=e.streamingData?{expires:new Date(Date.now()+parseInt(e.streamingData.expiresInSeconds)*1e3),formats:ie.parseFormats(e.streamingData.formats),adaptive_formats:ie.parseFormats(e.streamingData.adaptiveFormats),dash_manifest_url:e.streamingData.dashManifestUrl||null,hls_manifest_url:e.streamingData.hlsManifestUrl||null}:void 0;Me&&(l.streaming_data=Me);let He=e.currentVideoEndpoint?new T(e.currentVideoEndpoint):null;He&&(l.current_video_endpoint=He);let Vt=e.endpoint?new T(e.endpoint):null;Vt&&(l.endpoint=Vt);let At=this.parseItem(e.captions);At&&(l.captions=At);let ct=e.videoDetails?new Wf(e.videoDetails):null;ct&&(l.video_details=ct);let Hi=this.parseArray(e.annotations);Hi.length&&(l.annotations=Hi);let Rp=this.parseItem(e.storyboards);Rp&&(l.storyboards=Rp);let zi=this.parseItem(e.endscreen);zi&&(l.endscreen=zi);let Ei=this.parseItem(e.cards);return Ei&&(l.cards=Ei),l}static parseItem(e,t){if(!e)return null;let i=Object.keys(e);if(!i.length)return null;let r=this.sanitizeClassName(i[0]);if(!this.shouldIgnore(r))try{let a=b0(r);if(t){if(Array.isArray(t)){if(!t.some(h=>h.type===a.type))throw new Tt(`Type mismatch, got ${r} but expected one of ${t.map(h=>h.type).join(", ")}`)}else if(a.type!==t.type)throw new Tt(`Type mismatch, got ${r} but expected ${t.type}`)}let l=new a(e[i[0]]);return ue(this,te,"m",VT).call(this,r,l),l}catch(a){return ue(this,te,"f",g0).call(this,{classname:r,classdata:e[i[0]],err:a}),null}return null}static parseArray(e,t){if(Array.isArray(e)){let i=[];for(let r of e){let a=this.parseItem(r,t);a&&i.push(a)}return de(i)}else if(!e)return de([]);throw new Tt("Expected array but got a single item")}static parse(e,t,i){if(!e)return null;if(Array.isArray(e)){let r=[];for(let l of e){let h=this.parseItem(l,i);h&&r.push(h)}let a=de(r);return t?a:new Ni(de(r))}else if(t)throw new Tt("Expected array but got a single item");return new Ni(this.parseItem(e,i))}static parseC(e){return e.timedContinuationData?new zo({continuation:e.timedContinuationData,type:"timed"}):null}static parseLC(e){return e.itemSectionContinuation?new On(e.itemSectionContinuation):e.sectionListContinuation?new kt(e.sectionListContinuation):e.liveChatContinuation?new Yn(e.liveChatContinuation):e.musicPlaylistShelfContinuation?new Bn(e.musicPlaylistShelfContinuation):e.musicShelfContinuation?new Li(e.musicShelfContinuation):e.gridContinuation?new jn(e.gridContinuation):e.playlistPanelContinuation?new Qd(e.playlistPanelContinuation):null}static parseRR(e){return de(e.map(t=>{if(t.navigateAction)return new Ln(t.navigateAction);if(t.reloadContinuationItemsCommand)return new Dn(t.reloadContinuationItemsCommand);if(t.appendContinuationItemsAction)return new Xd(t.appendContinuationItemsAction)}).filter(t=>t))}static parseActions(e){return Array.isArray(e)?ie.parse(e.map(t=>(delete t.clickTrackingParams,t))):new Ni(this.parseItem(e))}static parseFormats(e){return(e==null?void 0:e.map(t=>new Yf(t)))||[]}static applyMutations(e,t){var i,r;let a=e.getType(Ht);if(a.length>0&&!t)console.warn(new x(`Mutation data required for processing MusicMultiSelectMenuItems, but none found.
This is a bug, please report it at ${Y.shim.info.bugs_url}`));else{let l=[];for(let h of a){let v=t.find(p=>{var b,I;return((I=(b=p.payload)===null||b===void 0?void 0:b.musicFormBooleanChoice)===null||I===void 0?void 0:I.id)===h.form_item_entity_key}),_=v==null?void 0:v.payload.musicFormBooleanChoice;if((_==null?void 0:_.selected)!==void 0?h.selected=_.selected:l.push(`'${h.title}'`),_!=null&&_.opaqueToken){let p=(r=(i=h.endpoint)===null||i===void 0?void 0:i.payload.commands)===null||r===void 0?void 0:r.find(b=>{var I;return(I=b.musicBrowseFormBinderCommand)===null||I===void 0?void 0:I.browseEndpoint});p&&(p.musicBrowseFormBinderCommand.browseEndpoint.formData={selectedValues:[_.opaqueToken]})}}l.length>0&&console.warn(new x(`Mutation data missing or invalid for ${l.length} out of ${a.length} MusicMultiSelectMenuItems. The titles of the failed items are: ${l.join(", ")}.
This is a bug, please report it at ${Y.shim.info.bugs_url}`))}}static sanitizeClassName(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}static shouldIgnore(e){return this.ignore_list.has(e)}};s(ie,"Parser");te=ie,pi=s(function(){w0(ie,te,null,"f",on)},"_Parser_clearMemo"),fi=s(function(){w0(ie,te,new In,"f",on)},"_Parser_createMemo"),VT=s(function(e,t){if(!ue(ie,te,"f",on))return;let i=ue(ie,te,"f",on).get(e);if(!i)return ue(ie,te,"f",on).set(e,[t]);i.push(t)},"_Parser_addToMemo"),hi=s(function(){if(!ue(ie,te,"f",on))throw new Error("Parser#getMemo() called before Parser#createMemo()");return ue(ie,te,"f",on)},"_Parser_getMemo"),AT=s(function({classname:e,classdata:t,err:i}){if(i.code=="MODULE_NOT_FOUND")return console.warn(new x(`${e} not found!
This is a bug, want to help us fix it? Follow the instructions at ${Y.shim.info.repo_url.split("#")[0]}/blob/main/docs/updating-the-parser.md or report it at ${Y.shim.info.bugs_url}!`,t));console.warn(new x(`Something went wrong at ${e}!
This is a bug, please report it at ${Y.shim.info.bugs_url}`,{stack:i.stack}))},"_Parser_printError");g0={value:ue(ie,te,"m",AT)};on={value:null};ie.ignore_list=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","BackgroundPromo","PromotedSparklesWeb","RunAttestationCommand","CompactPromotedVideo","StatementBanner","SearchSubMenu"]);var On=class extends c{constructor(e){var t,i,r;super(),this.contents=ie.parseArray(e.contents),Array.isArray(e.continuations)&&(this.continuation=(r=(i=(t=e.continuations)===null||t===void 0?void 0:t.at(0))===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)}};s(On,"ItemSectionContinuation");On.type="itemSectionContinuation";var Ln=class extends c{constructor(e){super(),this.endpoint=new T(e.endpoint)}};s(Ln,"NavigateAction");Ln.type="navigateAction";var Xd=class extends c{constructor(e){super(),this.contents=ie.parse(e.continuationItems,!0)}};s(Xd,"AppendContinuationItemsAction");Xd.type="appendContinuationItemsAction";var Dn=class extends c{constructor(e){super(),this.target_id=e.targetId,this.contents=ie.parse(e.continuationItems,!0),this.slot=e==null?void 0:e.slot}};s(Dn,"ReloadContinuationItemsCommand");Dn.type="reloadContinuationItemsCommand";var kt=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.contents=ie.parse(e.contents,!0),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.reloadContinuationData)===null||h===void 0?void 0:h.continuation)||null,e.header&&(this.header=ie.parse(e.header))}};s(kt,"SectionListContinuation");kt.type="sectionListContinuation";var Bn=class extends c{constructor(e){var t;super(),this.contents=ie.parse(e.contents,!0),this.continuation=((t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData.continuation)||null}};s(Bn,"MusicPlaylistShelfContinuation");Bn.type="musicPlaylistShelfContinuation";var Li=class extends c{constructor(e){var t,i,r,a;super(),this.contents=ie.parseArray(e.contents),this.continuation=((i=(t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData)===null||i===void 0?void 0:i.continuation)||((a=(r=e.continuations)===null||r===void 0?void 0:r[0].reloadContinuationData)===null||a===void 0?void 0:a.continuation)||null}};s(Li,"MusicShelfContinuation");Li.type="musicShelfContinuation";var jn=class extends c{constructor(e){var t;super(),this.items=ie.parse(e.items,!0),this.continuation=((t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData.continuation)||null}get contents(){return this.items}};s(jn,"GridContinuation");jn.type="gridContinuation";var Qd=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.contents=ie.parseArray(e.contents),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.nextRadioContinuationData)===null||h===void 0?void 0:h.continuation)||null}};s(Qd,"PlaylistPanelContinuation");Qd.type="playlistPanelContinuation";var zo=class extends c{constructor(e){var t,i,r;super(),this.continuation_type=e.type,this.timeout_ms=(t=e.continuation)===null||t===void 0?void 0:t.timeoutMs,this.time_until_last_message_ms=(i=e.continuation)===null||i===void 0?void 0:i.timeUntilLastMessageMsec,this.token=(r=e.continuation)===null||r===void 0?void 0:r.continuation}};s(zo,"Continuation");zo.type="continuation";var Yn=class extends c{constructor(e){var t,i,r,a,l,h,v,_;super(),this.actions=ie.parse((t=e.actions)===null||t===void 0?void 0:t.map(I=>(delete I.clickTrackingParams,I)),!0)||de([]),this.action_panel=ie.parseItem(e.actionPanel),this.item_list=ie.parseItem(e.itemList),this.header=ie.parseItem(e.header),this.participants_list=ie.parseItem(e.participantsList),this.popout_message=ie.parseItem(e.popoutMessage),this.emojis=((i=e.emojis)===null||i===void 0?void 0:i.map(I=>({emoji_id:I.emojiId,shortcuts:I.shortcuts,search_terms:I.searchTerms,image:S.fromResponse(I.image),is_custom_emoji:I.isCustomEmoji})))||[];let p,b;!((r=e.continuations)===null||r===void 0)&&r[0].timedContinuationData?(b="timed",p=(a=e.continuations)===null||a===void 0?void 0:a[0].timedContinuationData):!((l=e.continuations)===null||l===void 0)&&l[0].invalidationContinuationData?(b="invalidation",p=(h=e.continuations)===null||h===void 0?void 0:h[0].invalidationContinuationData):!((v=e.continuations)===null||v===void 0)&&v[0].liveChatReplayContinuationData&&(b="replay",p=(_=e.continuations)===null||_===void 0?void 0:_[0].liveChatReplayContinuationData),this.continuation=new zo({continuation:p,type:b}),this.viewer_name=e.viewerName}};s(Yn,"LiveChatContinuation");Yn.type="liveChatContinuation";var F0={};Os(F0,{AccountInfo:()=>jm,Analytics:()=>Um,Channel:()=>Ke,ChannelListContinuation:()=>Hn,Comments:()=>Gm,FilteredChannelList:()=>un,History:()=>Zo,HomeFeed:()=>Kt,ItemMenu:()=>qm,Library:()=>Qm,LiveChat:()=>s_,NotificationsMenu:()=>r_,Playlist:()=>Di,Search:()=>a_,Settings:()=>u_,SmoothedQueue:()=>t_,TimeWatched:()=>c_,VideoInfo:()=>mp});var wS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},x0=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ko,Bm=class{constructor(e){if(Ko.set(this,void 0),wS(this,Ko,f.parseResponse(e.data),"f"),!x0(this,Ko,"f").contents)throw new x("Page contents not found");let t=x0(this,Ko,"f").contents.array().as(zf).first();if(!t)throw new x("Account section list not found");this.contents=t.contents,this.footers=t.footers}get page(){return x0(this,Ko,"f")}};s(Bm,"AccountInfo");Ko=new WeakMap;var jm=Bm;var gS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},RT=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Zd,Ym=class{constructor(e){var t;Zd.set(this,void 0),gS(this,Zd,f.parseResponse(e.data),"f"),this.sections=(t=RT(this,Zd,"f").contents_memo)===null||t===void 0?void 0:t.getType(Ro).map(i=>{var r;return(r=i.model)===null||r===void 0?void 0:r.item()}).flatMap(i=>i||[])}get page(){return RT(this,Zd,"f")}};s(Ym,"Analytics");Zd=new WeakMap;var Um=Ym;var FT=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ie=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ep=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},T0,ft,sn,tp,ht,OT,rn=class{constructor(e,t,i=!1){T0.add(this),ft.set(this,void 0),sn.set(this,void 0),tp.set(this,void 0),ht.set(this,void 0),Ie(this,T0,"m",OT).call(this,t)||i?ep(this,ft,t,"f"):ep(this,ft,f.parseResponse(t.data),"f");let r=Iv(Ie(this,ft,"f").contents_memo,Ie(this,ft,"f").continuation_contents_memo,Ie(this,ft,"f").on_response_received_commands_memo,Ie(this,ft,"f").on_response_received_endpoints_memo,Ie(this,ft,"f").on_response_received_actions_memo,Ie(this,ft,"f").sidebar_memo,Ie(this,ft,"f").header_memo);if(!r)throw new x("No memo found in feed");ep(this,ht,r,"f"),ep(this,tp,e,"f")}static getVideosFromMemo(e){return e.getType([Ho,kh,bm,yh,hm,dm,Rm])}static getPlaylistsFromMemo(e){return e.getType([ai,Eh])}get videos(){return rn.getVideosFromMemo(Ie(this,ht,"f"))}get posts(){return Ie(this,ht,"f").getType([Co,_m])}get channels(){return Ie(this,ht,"f").getType([th,Sh])}get playlists(){return rn.getPlaylistsFromMemo(Ie(this,ht,"f"))}get memo(){return Ie(this,ht,"f")}get page_contents(){var e;let t=(e=Ie(this,ht,"f").getType(Ce))===null||e===void 0?void 0:e.first().content,i=Ie(this,ht,"f").getType(Dn).first(),r=Ie(this,ht,"f").getType(Kf).first();return t||i||r}get shelves(){return Ie(this,ht,"f").getType([Go,xm,wm])}getShelf(e){return this.shelves.get({title:e})}get secondary_contents(){var e,t;if(!(!((e=Ie(this,ft,"f").contents)===null||e===void 0)&&e.is_node))return;let i=(t=Ie(this,ft,"f").contents)===null||t===void 0?void 0:t.item();if(!!i.is(nn,Pm))return i.secondary_contents}get actions(){return Ie(this,tp,"f")}get page(){return Ie(this,ft,"f")}get has_continuation(){return(Ie(this,ht,"f").get("ContinuationItem")||[]).length>0}getContinuationData(){return FT(this,void 0,void 0,function*(){if(Ie(this,sn,"f")){if(Ie(this,sn,"f").length>1)throw new x("There are too many continuations, you'll need to find the correct one yourself in this.page");if(Ie(this,sn,"f").length===0)throw new x("There are no continuations");return yield Ie(this,sn,"f")[0].endpoint.call(Ie(this,tp,"f"),{parse:!0})}if(ep(this,sn,Ie(this,ht,"f").getType(it),"f"),Ie(this,sn,"f"))return this.getContinuationData()})}getContinuation(){return FT(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new rn(this.actions,e,!0)})}};s(rn,"Feed");ft=new WeakMap,sn=new WeakMap,tp=new WeakMap,ht=new WeakMap,T0=new WeakSet,OT=s(function(e){return!("data"in e)},"_Feed_isParsed");var Pe=rn;var LT=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},DT=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},an=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Un,Wn,Gn=class extends Pe{constructor(e,t,i=!1){var r;super(e,t,i),Un.set(this,void 0),Wn.set(this,void 0),DT(this,Wn,e,"f"),DT(this,Un,(r=this.page.contents_memo)===null||r===void 0?void 0:r.getType(Ce),"f")}get tabs(){var e,t;return(t=(e=an(this,Un,"f"))===null||e===void 0?void 0:e.map(i=>i.title.toString()))!==null&&t!==void 0?t:[]}getTabByName(e){var t;return LT(this,void 0,void 0,function*(){let i=(t=an(this,Un,"f"))===null||t===void 0?void 0:t.find(a=>a.title.toLowerCase()===e.toLowerCase());if(!i)throw new x(`Tab "${e}" not found`);if(i.selected)return this;let r=yield i.endpoint.call(an(this,Wn,"f"));return new Gn(an(this,Wn,"f"),r,!1)})}getTabByURL(e){var t;return LT(this,void 0,void 0,function*(){let i=(t=an(this,Un,"f"))===null||t===void 0?void 0:t.find(a=>{var l;return((l=a.endpoint.metadata.url)===null||l===void 0?void 0:l.split("/").pop())===e});if(!i)throw new x(`Tab "${e}" not found`);if(i.selected)return this;let r=yield i.endpoint.call(an(this,Wn,"f"));return new Gn(an(this,Wn,"f"),r,!1)})}hasTabWithURL(e){var t,i;return(i=(t=an(this,Un,"f"))===null||t===void 0?void 0:t.some(r=>{var a;return((a=r.endpoint.metadata.url)===null||a===void 0?void 0:a.split("/").pop())===e}))!==null&&i!==void 0?i:!1}get title(){var e,t,i;return(i=(t=(e=this.page.contents_memo)===null||e===void 0?void 0:e.getType(Ce))===null||t===void 0?void 0:t.find(r=>r.selected))===null||i===void 0?void 0:i.title.toString()}};s(Gn,"TabbedFeed");Un=new WeakMap,Wn=new WeakMap;var ip=Gn;var xS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},I0=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},TS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},qo,Wm=class extends Pe{constructor(e,t,i=!1){super(e,t,i),qo.set(this,void 0)}get filter_chips(){var e,t;if(I0(this,qo,"f"))return I0(this,qo,"f")||[];if(((e=this.memo.getType(Oi))===null||e===void 0?void 0:e.length)>1)throw new x("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(((t=this.memo.getType(Oi))===null||t===void 0?void 0:t.length)===0)throw new x("There are no feed filter chipbars");return TS(this,qo,this.memo.getType(De),"f"),I0(this,qo,"f")||[]}get filters(){return this.filter_chips.map(e=>e.text.toString())||[]}getFilteredFeed(e){var t;return xS(this,void 0,void 0,function*(){let i;if(typeof e=="string"){if(!this.filters.includes(e))throw new x("Filter not found",{available_filters:this.filters});i=this.filter_chips.find(a=>a.text.toString()===e)}else if(e.type==="ChipCloudChip")i=e;else throw new x("Invalid filter");if(!i)throw new x("Filter not found");if(i.is_selected)return this;let r=yield(t=i.endpoint)===null||t===void 0?void 0:t.call(this.actions,{parse:!0});if(!r)throw new x("Failed to get filtered feed");return new Pe(this.actions,r,!0)})}};s(Wm,"FilterableFeed");qo=new WeakMap;var Jn=Wm;var lt=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ke=class extends ip{constructor(e,t,i=!1){var r,a,l,h,v,_;super(e,t,i),this.header=(a=(r=this.page.header)===null||r===void 0?void 0:r.item())===null||a===void 0?void 0:a.as(Po,eh,Ah);let p=(l=this.page.metadata)===null||l===void 0?void 0:l.item().as(nh),b=(h=this.page.microformat)===null||h===void 0?void 0:h.as(ui);if(this.page.alerts){let I=this.page.alerts.first();if((I==null?void 0:I.alert_type)==="ERROR")throw new wo(I.text.toString())}if(!p&&!this.page.contents)throw new x("Invalid channel",this);this.metadata=Object.assign(Object.assign({},p),b||{}),this.subscribe_button=(v=this.page.header_memo)===null||v===void 0?void 0:v.getType(Lt).first(),this.current_tab=(_=this.page.contents)===null||_===void 0?void 0:_.item().key("tabs").parsed().array().filterType(Ce,Fo).get({selected:!0})}applyFilter(e){var t;return lt(this,void 0,void 0,function*(){let i,r=this.memo.getType(Oi).first();if(typeof e=="string"){if(i=r==null?void 0:r.contents.get({text:e}),!i)throw new x(`Filter ${e} not found`,{available_filters:this.filters})}else e instanceof De&&(i=e);if(!i)throw new x("Invalid filter",e);let a=yield(t=i.endpoint)===null||t===void 0?void 0:t.call(this.actions,{parse:!0});if(!a)throw new x("No page returned",{filter:i});return new un(this.actions,a,!0)})}applySort(e){var t,i;return lt(this,void 0,void 0,function*(){let r=this.memo.getType(rd).first();if(!r)throw new x("No sort filter sub menu found");let a=(t=r==null?void 0:r.sub_menu_items)===null||t===void 0?void 0:t.find(h=>h.title===e);if(!a)throw new x(`Sort filter ${e} not found`,{available_sort_filters:this.sort_filters});if(a.selected)return this;let l=yield(i=a.endpoint)===null||i===void 0?void 0:i.call(this.actions,{parse:!0});return new Ke(this.actions,l,!0)})}applyContentTypeFilter(e){var t,i,r,a;return lt(this,void 0,void 0,function*(){let l=(r=(i=(t=this.current_tab)===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.as(_e).sub_menu)===null||r===void 0?void 0:r.as(Ar);if(!l)throw new x("Sub menu not found");let h=l.content_type_sub_menu_items.find(_=>_.title===e);if(!h)throw new x(`Sub menu item ${e} not found`,{available_filters:this.content_type_filters});if(h.selected)return this;let v=yield(a=h.endpoint)===null||a===void 0?void 0:a.call(this.actions,{parse:!0});return new Ke(this.actions,v,!0)})}get filters(){var e,t;return((t=(e=this.memo.getType(Oi))===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.contents.filterType(De).map(i=>i.text))||[]}get sort_filters(){var e;let t=this.memo.getType(rd).first();return((e=t==null?void 0:t.sub_menu_items)===null||e===void 0?void 0:e.map(i=>i.title))||[]}get content_type_filters(){var e,t,i;let r=(i=(t=(e=this.current_tab)===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.as(_e).sub_menu)===null||i===void 0?void 0:i.as(Ar);return(r==null?void 0:r.content_type_sub_menu_items.map(a=>a.title))||[]}getHome(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("featured");return new Ke(this.actions,e.page,!0)})}getVideos(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("videos");return new Ke(this.actions,e.page,!0)})}getShorts(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("shorts");return new Ke(this.actions,e.page,!0)})}getLiveStreams(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("streams");return new Ke(this.actions,e.page,!0)})}getPlaylists(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("playlists");return new Ke(this.actions,e.page,!0)})}getCommunity(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("community");return new Ke(this.actions,e.page,!0)})}getChannels(){return lt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("channels");return new Ke(this.actions,e.page,!0)})}getAbout(){var e;return lt(this,void 0,void 0,function*(){return(e=(yield this.getTabByURL("about")).memo.getType(ih))===null||e===void 0?void 0:e[0]})}search(e){var t,i;return lt(this,void 0,void 0,function*(){let r=(t=this.memo.getType(Fo))===null||t===void 0?void 0:t[0];if(!r)throw new x("Search tab not found",this);let a=yield(i=r.endpoint)===null||i===void 0?void 0:i.call(this.actions,{query:e,parse:!0});return new Ke(this.actions,a,!0)})}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_channels(){return this.hasTabWithURL("channels")}get has_about(){return this.hasTabWithURL("about")}get has_search(){var e;return((e=this.memo.getType(Fo))===null||e===void 0?void 0:e.length)>0}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return lt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!t)throw new x("Could not get continuation data");return new Hn(this.actions,t,!0)})}};s(Ke,"Channel");var Hn=class extends Pe{constructor(e,t,i=!1){var r;super(e,t,i),this.contents=this.page.on_response_received_actions.first()||((r=this.page.on_response_received_endpoints)===null||r===void 0?void 0:r.first())}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return lt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!t)throw new x("Could not get continuation data");return new Hn(this.actions,t,!0)})}};s(Hn,"ChannelListContinuation");var un=class extends Jn{constructor(e,t,i=!1){super(e,t,i),this.applied_filter=this.memo.getType(De).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions.first()}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return lt(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new un(this.actions,i.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return lt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!(t!=null&&t.on_response_received_actions_memo))throw new x("Unexpected continuation data",t);return t.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType(Oi)),t.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(De)),new un(this.actions,t,!0)})}};s(un,"FilteredChannelList");var S0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},E0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ct=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$o,mi,Xo,zn=class{constructor(e,t,i=!1){var r,a,l;$o.set(this,void 0),mi.set(this,void 0),Xo.set(this,void 0),E0(this,$o,i?t:f.parseResponse(t),"f"),E0(this,mi,e,"f");let h=Ct(this,$o,"f").on_response_received_endpoints;if(!h)throw new x("Comments page did not have any content.");let v=h.at(0),_=h.at(1);this.header=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.firstOfType(hh);let p=((a=_==null?void 0:_.contents)===null||a===void 0?void 0:a.filterType(_h))||[];this.contents=de(p.map(b=>{var I;return(I=b.comment)===null||I===void 0||I.setActions(Ct(this,mi,"f")),b.setActions(Ct(this,mi,"f")),b})),E0(this,Xo,(l=_==null?void 0:_.contents)===null||l===void 0?void 0:l.firstOfType(it),"f")}applySort(e){var t,i,r,a;return S0(this,void 0,void 0,function*(){if(!this.header)throw new x("Page header is missing. Cannot apply sort option.");let l;if(e==="TOP_COMMENTS"?l=(i=(t=this.header.sort_menu)===null||t===void 0?void 0:t.sub_menu_items)===null||i===void 0?void 0:i.at(0):e==="NEWEST_FIRST"&&(l=(a=(r=this.header.sort_menu)===null||r===void 0?void 0:r.sub_menu_items)===null||a===void 0?void 0:a.at(1)),!l)throw new x("Could not find target button.");if(l.selected)return this;let h=yield l.endpoint.call(Ct(this,mi,"f"),{parse:!0});return new zn(Ct(this,mi,"f"),h,!0)})}createComment(e){var t;return S0(this,void 0,void 0,function*(){if(!this.header)throw new x("Page header is missing. Cannot create comment.");let i=(t=this.header.create_renderer)===null||t===void 0?void 0:t.as(mh).submit_button;if(!i)throw new x("Could not find target button. You are probably not logged in.");if(!i.endpoint)throw new x("Button does not have an endpoint.");return yield i.endpoint.call(Ct(this,mi,"f"),{commentText:e})})}getContinuation(){return S0(this,void 0,void 0,function*(){if(!Ct(this,Xo,"f"))throw new x("Continuation not found");let e=yield Ct(this,Xo,"f").endpoint.call(Ct(this,mi,"f"),{parse:!0}),t=Object.assign({},Ct(this,$o,"f"));if(!t.on_response_received_endpoints||!e.on_response_received_endpoints)throw new x("Invalid reponse format, missing on_response_received_endpoints.");return t.on_response_received_endpoints.pop(),t.on_response_received_endpoints.push(e.on_response_received_endpoints[0]),new zn(Ct(this,mi,"f"),t,!0)})}get has_continuation(){return!!Ct(this,Xo,"f")}get page(){return Ct(this,$o,"f")}};s(zn,"Comments");$o=new WeakMap,mi=new WeakMap,Xo=new WeakMap;var Gm=zn;var IS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Qo=class extends Pe{constructor(e,t,i=!1){super(e,t,i),this.sections=this.memo.getType(Ve),this.feed_actions=this.memo.getType(Zf).first()}getContinuation(){return IS(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new Error("No continuation data found");return new Qo(this.actions,e,!0)})}};s(Qo,"History");var Zo=Qo;var BT=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Kt=class extends Jn{constructor(e,t,i=!1){super(e,t,i),this.header=this.memo.getType(Ih).first(),this.contents=this.memo.getType(tn).first()||this.page.on_response_received_actions.first()}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return BT(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new Kt(this.actions,i.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuation:{get:()=>super.getContinuation}});var t;return BT(this,void 0,void 0,function*(){let i=yield e.getContinuation.call(this);return i.page.header=this.page.header,(t=i.page.header_memo)===null||t===void 0||t.set(this.header.type,[this.header]),new Kt(this.actions,i.page,!0)})}};s(Kt,"HomeFeed");var SS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},k0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Jm=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Hm,zm,np,Km=class{constructor(e,t){Hm.set(this,void 0),zm.set(this,void 0),np.set(this,void 0),k0(this,Hm,e,"f"),k0(this,zm,t,"f");let i=e==null?void 0:e.live_chat_item_context_menu_supported_renderers;if(!i||!i.is(Ye))throw new x('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');k0(this,np,i.as(Ye).items,"f")}selectItem(e){return SS(this,void 0,void 0,function*(){let t;if(e instanceof G){if(!e.endpoint)throw new x("Item does not have an endpoint.");t=e.endpoint}else{let r=Jm(this,np,"f").find(a=>a.is(Oo)?a.as(Oo).icon_type===e:!1);if(!r||!r.is(Oo))throw new x(`Button "${e}" not found.`);t=r.endpoint}if(!t)throw new x("Target button does not have an endpoint.");return yield t.call(Jm(this,zm,"f"),{parse:!0})})}items(){return Jm(this,np,"f")}page(){return Jm(this,Hm,"f")}};s(Km,"ItemMenu");Hm=new WeakMap,zm=new WeakMap,np=new WeakMap;var qm=Km;var ES=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},C0=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},op,$m,es=class extends Pe{constructor(e,t,i=!1){var r,a;super(e,t,i),op.add(this);let l=this.memo.getType(lm).first(),h=this.memo.getType(pm).first(),v=this.memo.getType(fm).first();if(!h&&!v)throw new x("This playlist does not exist");this.info=Object.assign(Object.assign({},(r=this.page.metadata)===null||r===void 0?void 0:r.item().as(cm)),{author:(a=v==null?void 0:v.owner.item().as(Mm).author)!==null&&a!==void 0?a:l==null?void 0:l.author,thumbnails:h==null?void 0:h.thumbnail_renderer.item().as(mm,um).thumbnail,total_items:C0(this,op,"m",$m).call(this,0,h),views:C0(this,op,"m",$m).call(this,1,h),last_updated:C0(this,op,"m",$m).call(this,2,h),can_share:l==null?void 0:l.can_share,can_delete:l==null?void 0:l.can_delete,is_editable:l==null?void 0:l.is_editable,privacy:l==null?void 0:l.privacy}),this.menu=h==null?void 0:h.menu,this.endpoint=h==null?void 0:h.endpoint,this.messages=this.memo.getType(Dt)}get items(){return this.videos}getContinuation(){return ES(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new es(this.actions,e,!0)})}};s(es,"Playlist");op=new WeakSet,$m=s(function(e,t){var i;return!t||!t.stats?"N/A":((i=t.stats[e])===null||i===void 0?void 0:i.toString())||"N/A"},"_Playlist_getStat");var Di=es;var kS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},CS=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},P0,jT,Xm=class extends Pe{constructor(e,t){var i,r;if(super(e,t),P0.add(this),!this.page.contents_memo)throw new x("Page contents not found");let a=(i=this.page.contents_memo.getType(vm))===null||i===void 0?void 0:i[0],l=(r=this.page.contents_memo.getType(ym))===null||r===void 0?void 0:r[0];this.profile={stats:a,user_info:l};let h=this.page.contents_memo.getType(Go);this.sections=h.map(v=>{var _;return{type:v.icon_type,title:v.title,contents:((_=v.content)===null||_===void 0?void 0:_.key("items").array())||[],getAll:()=>CS(this,P0,"m",jT).call(this,v)}})}get history(){return this.sections.find(e=>e.type==="WATCH_HISTORY")}get watch_later(){return this.sections.find(e=>e.type==="WATCH_LATER")}get liked_videos(){return this.sections.find(e=>e.type==="LIKE")}get playlists_section(){return this.sections.find(e=>e.type==="PLAYLISTS")}get clips(){return this.sections.find(e=>e.type==="CONTENT_CUT")}};s(Xm,"Library");P0=new WeakSet,jT=s(function(e){var t;return kS(this,void 0,void 0,function*(){if(!(!((t=e.menu)===null||t===void 0)&&t.as(Ye).hasKey("top_level_buttons")))throw new x(`The ${e.title.text} shelf doesn't have more items`);let i=e.menu.as(Ye).top_level_buttons.firstOfType(G);if(!i)throw new x("Did not find target button.");let r=yield i.as(G).endpoint.call(this.actions,{parse:!0});switch(e.icon_type){case"LIKE":case"WATCH_LATER":return new Di(this.actions,r,!0);case"WATCH_HISTORY":return new Zo(this.actions,r,!0);case"CONTENT_CUT":return new Pe(this.actions,r,!0);default:throw new x("Target shelf not implemented.")}})},"_Library_getAll");var Qm=Xm;var mt=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},le=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Bi,ln,Kn,Bt,qt,_t;function PS(n){let e=[];for(let t of n)if(Array.isArray(t))for(let i of t)e.push(i);else e.push(t);return e}s(PS,"flattenQueue");var Zm=class{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}};s(Zm,"DelayQueue");var e_=class{constructor(){Bi.set(this,void 0),ln.set(this,void 0),Kn.set(this,void 0),Bt.set(this,void 0),qt.set(this,void 0),_t.set(this,void 0),mt(this,Bi,null,"f"),mt(this,ln,null,"f"),mt(this,Kn,null,"f"),mt(this,Bt,[],"f"),mt(this,qt,null,"f"),mt(this,_t,new Zm,"f")}enqueueActionGroup(e){if(le(this,Bi,"f")!==null){let t=Date.now()-le(this,Bi,"f");le(this,_t,"f").back.push(t),5<le(this,_t,"f").front.length+le(this,_t,"f").back.length&&(le(this,_t,"f").front.length||(le(this,_t,"f").front=le(this,_t,"f").back,le(this,_t,"f").front.reverse(),le(this,_t,"f").back=[]),le(this,_t,"f").front.pop()),mt(this,ln,Math.max(...le(this,_t,"f").getValues()),"f")}mt(this,Bi,Date.now(),"f"),le(this,Bt,"f").push(e),le(this,qt,"f")===null&&mt(this,qt,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(mt(this,qt,null,"f"),le(this,Bt,"f").length){let e=1e4;le(this,ln,"f")!==null&&le(this,Bi,"f")!==null&&(e=le(this,ln,"f")-Date.now()+le(this,Bi,"f")),e=le(this,Bt,"f").length<e/80?1:Math.ceil(le(this,Bt,"f").length/(e/80));let t=PS(le(this,Bt,"f").splice(0,e));le(this,Kn,"f")&&le(this,Kn,"f").call(this,t),le(this,Bt,"f")!==null&&(e==1?(e=le(this,ln,"f")/le(this,Bt,"f").length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80,mt(this,qt,setTimeout(this.emitSmoothedActions.bind(this),e),"f"))}}clear(){le(this,qt,"f")!==null&&(clearTimeout(le(this,qt,"f")),mt(this,qt,null,"f")),mt(this,Bt,[],"f")}set callback(e){mt(this,Kn,e,"f")}get callback(){return le(this,Kn,"f")}get action_queue(){return le(this,Bt,"f")}get estimated_update_interval(){return le(this,ln,"f")}get last_update_time(){return le(this,Bi,"f")}get next_update_id(){return le(this,qt,"f")}get poll_response_delay_queue(){return le(this,_t,"f")}};s(e_,"SmoothedQueue");Bi=new WeakMap,ln=new WeakMap,Kn=new WeakMap,Bt=new WeakMap,qt=new WeakMap,_t=new WeakMap;var t_=e_;var cn=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},_i=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Se=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Qe,ji,ap,i_,$n,sp,rp,N0,n_,YT,qn,o_=class extends Vi{constructor(e){var t,i;super(),Qe.add(this),ji.set(this,void 0),ap.set(this,void 0),i_.set(this,void 0),$n.set(this,void 0),sp.set(this,void 0),rp.set(this,0),this.running=!1,this.is_replay=!1,_i(this,ap,e.basic_info.id,"f"),_i(this,i_,e.basic_info.channel_id,"f"),_i(this,ji,e.actions,"f"),_i(this,$n,(t=e.livechat)===null||t===void 0?void 0:t.continuation,"f"),this.is_replay=((i=e.livechat)===null||i===void 0?void 0:i.is_replay)||!1,this.smoothed_queue=new t_,this.smoothed_queue.callback=r=>cn(this,void 0,void 0,function*(){r.length?r.length<10?yield Se(this,Qe,"m",n_).call(this,r):this.is_replay?(Se(this,Qe,"m",n_).call(this,r),yield Se(this,Qe,"m",qn).call(this,2e3)):Se(this,Qe,"m",n_).call(this,r):yield Se(this,Qe,"m",qn).call(this,2e3),this.running&&Se(this,Qe,"m",N0).call(this)})}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}start(){this.running||(this.running=!0,Se(this,Qe,"m",N0).call(this),Se(this,Qe,"m",YT).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}sendMessage(e){return cn(this,void 0,void 0,function*(){let t=yield Se(this,ji,"f").execute("/live_chat/send_message",{params:Oe.encodeMessageParams(Se(this,i_,"f"),Se(this,ap,"f")),richMessage:{textSegments:[{text:e}]},clientMessageId:Y.shim.uuidv4(),client:"ANDROID",parse:!0});if(!t.actions)throw new x("Unexpected response from send_message",t);return t.actions.array().as(Oh)})}applyFilter(e){var t,i,r,a,l,h,v;if(!this.initial_info)throw new x("Cannot apply filter before initial info is retrieved.");let _=(r=(i=(t=this.initial_info)===null||t===void 0?void 0:t.header)===null||i===void 0?void 0:i.view_selector)===null||r===void 0?void 0:r.sub_menu_items;if(e==="TOP_CHAT"){if(!((a=_==null?void 0:_.at(0))===null||a===void 0)&&a.selected)return;_i(this,$n,(l=_==null?void 0:_.at(0))===null||l===void 0?void 0:l.continuation,"f")}else{if(!((h=_==null?void 0:_.at(1))===null||h===void 0)&&h.selected)return;_i(this,$n,(v=_==null?void 0:_.at(1))===null||v===void 0?void 0:v.continuation,"f")}}getItemMenu(e){return cn(this,void 0,void 0,function*(){if(!e.menu_endpoint)throw new x("This item does not have a menu.",e);let t=yield e.menu_endpoint.call(Se(this,ji,"f"),{parse:!0});if(!t)throw new x("Could not retrieve item menu.",e);return new qm(t,Se(this,ji,"f"))})}selectButton(e){return cn(this,void 0,void 0,function*(){return yield e.endpoint.call(Se(this,ji,"f"),{parse:!0})})}};s(o_,"LiveChat");ji=new WeakMap,ap=new WeakMap,i_=new WeakMap,$n=new WeakMap,sp=new WeakMap,rp=new WeakMap,Qe=new WeakSet,N0=s(function n(){cn(this,void 0,void 0,function*(){var e,t;try{let i=yield Se(this,ji,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:Se(this,$n,"f"),parse:!0}),r=i.continuation_contents;if(r||(this.emit("error",new x("Unexpected live chat incremental continuation response",i)),this.emit("end"),this.stop()),!(r instanceof Yn)){this.stop(),this.emit("end");return}_i(this,$n,r.continuation.token,"f"),r.header?(this.initial_info=r,this.emit("start",r),this.running&&Se(this,Qe,"m",n).call(this)):this.smoothed_queue.enqueueActionGroup(r.actions),_i(this,rp,0,"f")}catch(i){this.emit("error",i),_i(this,rp,(t=Se(this,rp,"f"),e=t++,t),"f"),e<10?(yield Se(this,Qe,"m",qn).call(this,2e3),Se(this,Qe,"m",n).call(this)):(this.emit("error",new x("Reached retry limit for incremental continuation requests",i)),this.emit("end"),this.stop())}})},"_LiveChat_pollLivechat"),n_=s(function(e){return cn(this,void 0,void 0,function*(){let i=e.length<125?1:Math.ceil(e.length/125),r=i==1?(i=1e4/e.length,i*=Math.random()+.5,i=Math.min(1e3,i),i=Math.max(80,i)):i=80;for(let a of e)yield Se(this,Qe,"m",qn).call(this,r),this.emit("chat-update",a)})},"_LiveChat_emitSmoothedActions"),YT=s(function n(){cn(this,void 0,void 0,function*(){var e,t,i,r,a,l,h,v,_,p,b;try{let I={videoId:Se(this,ap,"f")};Se(this,sp,"f")&&(I.continuation=Se(this,sp,"f"));let C=yield Se(this,ji,"f").execute("/updated_metadata",I),N=f.parseResponse(C.data);_i(this,sp,(e=N.continuation)===null||e===void 0?void 0:e.token,"f"),this.metadata={title:((t=N.actions)===null||t===void 0?void 0:t.array().firstOfType(Uh))||((i=this.metadata)===null||i===void 0?void 0:i.title),description:((r=N.actions)===null||r===void 0?void 0:r.array().firstOfType(Yh))||((a=this.metadata)===null||a===void 0?void 0:a.description),views:((l=N.actions)===null||l===void 0?void 0:l.array().firstOfType(Gh))||((h=this.metadata)===null||h===void 0?void 0:h.views),likes:((v=N.actions)===null||v===void 0?void 0:v.array().firstOfType(Wh))||((_=this.metadata)===null||_===void 0?void 0:_.likes),date:((p=N.actions)===null||p===void 0?void 0:p.array().firstOfType(jh))||((b=this.metadata)===null||b===void 0?void 0:b.date)},this.emit("metadata-update",this.metadata),yield Se(this,Qe,"m",qn).call(this,5e3),this.running&&Se(this,Qe,"m",n).call(this)}catch(I){yield Se(this,Qe,"m",qn).call(this,2e3),this.running&&Se(this,Qe,"m",n).call(this)}})},"_LiveChat_pollMetadata"),qn=s(function(e){return cn(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(()=>t(),e))})},"_LiveChat_wait");var s_=o_;var NS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},UT=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ts=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Xn,up,is=class{constructor(e,t){Xn.set(this,void 0),up.set(this,void 0),UT(this,up,e,"f"),UT(this,Xn,f.parseResponse(t.data),"f"),this.header=ts(this,Xn,"f").actions_memo.getType(zh).first(),this.contents=ts(this,Xn,"f").actions_memo.getType(om)}getContinuation(){return NS(this,void 0,void 0,function*(){let e=ts(this,Xn,"f").actions_memo.getType(it).first();if(!e)throw new x("Continuation not found");let t=yield e.endpoint.call(ts(this,up,"f"),{parse:!1});return new is(ts(this,up,"f"),t)})}get page(){return ts(this,Xn,"f")}};s(is,"NotificationsMenu");Xn=new WeakMap,up=new WeakMap;var r_=is;var WT=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Qn=class extends Pe{constructor(e,t,i=!1){var r,a,l,h,v,_;super(e,t,i);let p=((r=this.page.contents_memo)===null||r===void 0?void 0:r.getType(_e).first().contents)||((a=this.page.on_response_received_commands)===null||a===void 0?void 0:a.first().contents);if(!p)throw new x("No contents found in search response");this.results=(l=p.firstOfType(Ve))===null||l===void 0?void 0:l.contents,this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results,this.watch_card=(h=this.page.contents_memo)===null||h===void 0?void 0:h.getType(Nm).first(),this.refinement_cards=(_=(v=this.results)===null||v===void 0?void 0:v.get({type:"HorizontalCardList"},!0))===null||_===void 0?void 0:_.as(Nh)}selectRefinementCard(e){var t,i;return WT(this,void 0,void 0,function*(){let r;if(typeof e=="string"){if(!this.refinement_cards)throw new x("No refinement cards found.");if(r=(i=(t=this.refinement_cards)===null||t===void 0?void 0:t.cards.get({query:e}))===null||i===void 0?void 0:i.as(Oc),!r)throw new x(`Refinement card "${e}" not found`,{available_cards:this.refinement_card_queries})}else if(e.type==="SearchRefinementCard")r=e;else throw new x("Invalid refinement card!");let a=yield r.endpoint.call(this.actions,{parse:!0});return new Qn(this.actions,a,!0)})}get refinement_card_queries(){var e;return((e=this.refinement_cards)===null||e===void 0?void 0:e.cards.as(Oc).map(t=>t.query))||[]}getContinuation(){return WT(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new Qn(this.actions,e,!0)})}};s(Qn,"Search");var a_=Qn;var MS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},GT=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ns=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Zn,lp,os=class{constructor(e,t){var i,r,a,l;if(Zn.set(this,void 0),lp.set(this,void 0),GT(this,lp,e,"f"),GT(this,Zn,f.parseResponse(t.data),"f"),this.sidebar=(i=ns(this,Zn,"f").sidebar)===null||i===void 0?void 0:i.as(Sm),!ns(this,Zn,"f").contents)throw new x("Page contents not found");let h=ns(this,Zn,"f").contents.item().as(nn).tabs.array().as(Ce).get({selected:!0});if(!h)throw new x("Target tab not found");let v=(r=h.content)===null||r===void 0?void 0:r.as(_e).contents.as(Ve);this.introduction=(l=(a=v==null?void 0:v.shift())===null||a===void 0?void 0:a.contents)===null||l===void 0?void 0:l.firstOfType(sm),this.sections=v==null?void 0:v.map(_=>{var p;return{title:((p=_.header)===null||p===void 0?void 0:p.title.toString())||null,contents:_.contents}})}selectSidebarItem(e){return MS(this,void 0,void 0,function*(){if(!this.sidebar)throw new x("Sidebar not available");let t;if(typeof e=="string"){if(t=this.sidebar.items.get({title:e}),!t)throw new x(`Item "${e}" not found`,{available_items:this.sidebar_items})}else if(e!=null&&e.is(Ao))t=e;else throw new x("Invalid item",{target_item:e});let i=yield t.endpoint.call(ns(this,lp,"f"),{parse:!1});return new os(ns(this,lp,"f"),i)})}getSettingOption(e){var t;if(!this.sections)throw new x("Sections not available");for(let i of this.sections)if(!!i.contents)for(let r of i.contents){let a=r.as(Wo).options;if(a){for(let l of a)if(l.is(Uo)&&((t=l.title)===null||t===void 0?void 0:t.toString())===e)return l}}throw new x(`Option "${e}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new x("Sections not available");let e=[];for(let t of this.sections)if(!!t.contents)for(let i of t.contents)i.as(Wo).options&&(e=e.concat(i.as(Wo).options));return e.map(t=>{var i;return(i=t.title)===null||i===void 0?void 0:i.toString()}).filter(t=>t)}get sidebar_items(){if(!this.sidebar)throw new x("Sidebar not available");return this.sidebar.items.map(e=>e.title.toString())}get page(){return ns(this,Zn,"f")}};s(os,"Settings");Zn=new WeakMap,lp=new WeakMap;var u_=os;var VS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},M0=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ss,l_=class{constructor(e){var t;if(ss.set(this,void 0),VS(this,ss,f.parseResponse(e.data),"f"),!M0(this,ss,"f").contents)throw new x("Page contents not found");let i=M0(this,ss,"f").contents.item().as(di).tabs.get({selected:!0});if(!i)throw new x("Could not find target tab.");this.contents=(t=i.content)===null||t===void 0?void 0:t.as(_e).contents.as(Ve)}get page(){return M0(this,ss,"f")}};s(l_,"TimeWatched");ss=new WeakMap;var c_=l_;var AS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},d_=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},eo,cp=class{constructor(e,t){eo.set(this,void 0),AS(this,eo,new Y.shim.Cache(e,t),"f")}get cache_dir(){return d_(this,eo,"f").cache_dir}get(e){return d_(this,eo,"f").get(e)}set(e,t){return d_(this,eo,"f").set(e,t)}remove(e){return d_(this,eo,"f").remove(e)}};s(cp,"UniversalCache");eo=new WeakMap;var RS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},V0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},vt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},A0,$t,rs,dp,JT,to=class{constructor(e,t,i){A0.add(this),$t.set(this,void 0),rs.set(this,void 0),dp.set(this,void 0),V0(this,$t,e,"f"),V0(this,rs,t,"f"),V0(this,dp,i||Y.shim.fetch,"f")}get fetch_function(){return vt(this,dp,"f")}fetch(e,t){return RS(this,void 0,void 0,function*(){let i=W.URLS.API.PRODUCTION_1+vt(this,$t,"f").api_version,r=(t==null?void 0:t.baseURL)||i,a=typeof e=="string"?!r.endsWith("/")&&!e.startsWith("/")?new URL(`${r}/${e}`):new URL(r+e):e instanceof URL?e:new URL(e.url,r),l=(t==null?void 0:t.headers)||(e instanceof Y.shim.Request?e.headers:new Y.shim.Headers)||new Y.shim.Headers,h=(t==null?void 0:t.body)||(e instanceof Y.shim.Request?e.body:void 0),v=new Y.shim.Headers(l);v.set("Accept","*/*"),v.set("Accept-Language","*"),v.set("x-goog-visitor-id",vt(this,$t,"f").context.client.visitorData||""),v.set("x-origin",a.origin),v.set("x-youtube-client-version",vt(this,$t,"f").context.client.clientVersion||""),Y.shim.server&&(v.set("User-Agent",qi("desktop")),v.set("origin",a.origin)),a.searchParams.set("key",vt(this,$t,"f").key),a.searchParams.set("prettyPrint","false"),a.searchParams.set("alt","json");let _=v.get("Content-Type"),p=h,b=!1,I=r===i||r===W.URLS.YT_UPLOAD;if(_==="application/json"&&I&&typeof h=="string"){let L=JSON.parse(h),O=Object.assign(Object.assign({},L),{context:JSON.parse(JSON.stringify(vt(this,$t,"f").context))});vt(this,A0,"m",JT).call(this,O.context,O.client),v.set("x-youtube-client-version",O.context.client.clientVersion),delete O.client,b=O.context.client.clientName==="WEB_KIDS",p=JSON.stringify(O)}if(vt(this,$t,"f").logged_in&&I&&!b){let L=vt(this,$t,"f").oauth;if(L.validateCredentials()&&(yield L.refreshIfRequired(),v.set("authorization",`Bearer ${L.credentials.access_token}`),a.searchParams.delete("key")),vt(this,rs,"f")){let O=Ft(vt(this,rs,"f"),"PAPISID=",";");O&&(v.set("authorization",yield Tv(O)),v.set("x-goog-authuser",vt(this,$t,"f").account_index.toString())),v.set("cookie",vt(this,rs,"f"))}}let C=new Y.shim.Request(a,e instanceof Y.shim.Request?e:t),N=yield vt(this,dp,"f").call(this,C,{body:p,headers:v,credentials:"include",redirect:e instanceof Y.shim.Request?e.redirect:(t==null?void 0:t.redirect)||"follow"});if(N.ok)return N;throw new x(`Request to ${N.url} failed with status ${N.status}`,yield N.text())})}};s(to,"HTTPClient");$t=new WeakMap,rs=new WeakMap,dp=new WeakMap,A0=new WeakSet,JT=s(function(e,t){switch(t){case"YTMUSIC":e.client.clientVersion=W.CLIENTS.YTMUSIC.VERSION,e.client.clientName=W.CLIENTS.YTMUSIC.NAME;break;case"ANDROID":e.client.clientVersion=W.CLIENTS.ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=W.CLIENTS.ANDROID.NAME,e.client.androidSdkVersion=W.CLIENTS.ANDROID.SDK_VERSION;break;case"YTMUSIC_ANDROID":e.client.clientVersion=W.CLIENTS.YTMUSIC_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=W.CLIENTS.YTMUSIC_ANDROID.NAME,e.client.androidSdkVersion=W.CLIENTS.ANDROID.SDK_VERSION;break;case"YTSTUDIO_ANDROID":e.client.clientVersion=W.CLIENTS.YTSTUDIO_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=W.CLIENTS.YTSTUDIO_ANDROID.NAME,e.client.androidSdkVersion=W.CLIENTS.ANDROID.SDK_VERSION;break;case"TV_EMBEDDED":e.client.clientVersion=W.CLIENTS.TV_EMBEDDED.VERSION,e.client.clientScreen="EMBED",e.thirdParty={embedUrl:W.URLS.YT_BASE};break;case"YTKIDS":e.client.clientVersion=W.CLIENTS.WEB_KIDS.VERSION,e.client.clientName=W.CLIENTS.WEB_KIDS.NAME,e.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}};break;default:break}},"_HTTPClient_adjustContext");var pp=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},nt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},FS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(h,v){l=n[a](l),r(h,v,l.done,l.value)})}}function r(a,l,h,v){Promise.resolve(v).then(function(_){a({value:_,done:h})},l)}},Ze,yt,zT,HT,R0,fp=class{static download(e,t,i,r,a,l){return pp(this,void 0,void 0,function*(){if((i==null?void 0:i.status)==="UNPLAYABLE")throw new x("Video is unplayable",{error_type:"UNPLAYABLE"});if((i==null?void 0:i.status)==="LOGIN_REQUIRED")throw new x("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!r)throw new x("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});let h=Object.assign({quality:"360p",type:"video+audio",format:"mp4",range:void 0},e),v=this.chooseFormat(h,r),_=v.decipher(a);if(h.type==="video+audio"&&!e.range){let O=yield t.session.http.fetch_function(`${_}&cpn=${l}`,{method:"GET",headers:Jt.STREAM_HEADERS,redirect:"follow"});if(!O.ok)throw new x("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:O});let D=O.body;if(!D)throw new x("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:O});return D}let p=1048576*10,b=e.range?e.range.start:0,I=e.range?e.range.end:p,C=!1,N;return new Y.shim.ReadableStream({start(){},pull:O=>pp(this,void 0,void 0,function*(){if(C){O.close();return}return(I>=v.content_length||e.range)&&(C=!0),new Promise((D,K)=>pp(this,void 0,void 0,function*(){var F,w,ve,Ge;try{N=new AbortController;let B=yield t.session.http.fetch_function(`${_}&cpn=${l}&range=${b}-${I||""}`,{method:"GET",headers:Object.assign({},Jt.STREAM_HEADERS),signal:N.signal}),se=B.body;if(!se)throw new x("Could not get ReadableStream from fetch Response.",{video:this,error_type:"FETCH_FAILED",response:B});try{for(var Ee=!0,tt=FS(Sv(se)),$;$=yield tt.next(),F=$.done,!F;){Ge=$.value,Ee=!1;try{let re=Ge;O.enqueue(re)}finally{Ee=!0}}}catch(re){w={error:re}}finally{try{!Ee&&!F&&(ve=tt.return)&&(yield ve.call(tt))}finally{if(w)throw w.error}}b=I+1,I+=p,D();return}catch(B){K(B)}}))}),cancel(O){return pp(this,void 0,void 0,function*(){N.abort(O)})}},{highWaterMark:1,size(O){return O.byteLength}})})}static chooseFormat(e,t){if(!t)throw new x("Streaming data not available");let i=[...t.formats||[],...t.adaptive_formats||[]],r=e.type?e.type.includes("audio"):!0,a=e.type?e.type.includes("video"):!0,l=e.language||"original",h=e.quality||"best",v=-1,_=["best","bestefficiency"].includes(h),p=h!=="best",b=i.filter(I=>r&&!I.has_audio||a&&!I.has_video||e.format!=="any"&&!I.mime_type.includes(e.format||"mp4")||!_&&I.quality_label!==h?!1:(v<I.width&&(v=I.width),!0));if(!b.length)throw new x("No matching formats found",{options:e});if(_&&a&&(b=b.filter(I=>I.width===v)),r&&!a){let I=b.filter(C=>l!=="original"?!C.has_video&&C.language===l:!C.has_video&&C.is_original);I.length>0&&(b=I)}return p?b.sort((I,C)=>I.bitrate-C.bitrate):b.sort((I,C)=>C.bitrate-I.bitrate),b[0]}static toDash(e,t=l=>l,i,r,a){if(!e)throw new x("Streaming data not available");let l;i?l={formats:e.formats.filter(I=>!i(I)),adaptive_formats:e.adaptive_formats.filter(I=>!i(I)),expires:e.expires,dash_manifest_url:e.dash_manifest_url,hls_manifest_url:e.hls_manifest_url}:l=e;let{adaptive_formats:h}=l;if(!h.length)throw new x("No adaptive formats found");let v=h[0].approx_duration_ms/1e3,_=new Y.shim.DOMParser().parseFromString('<?xml version="1.0" encoding="utf-8"?><MPD />',"application/xml"),p=_.querySelector("MPD"),b=_.createElement("Period");return p.replaceWith(nt(this,Ze,"m",yt).call(this,_,"MPD",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${v}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},[b])),nt(this,Ze,"m",zT).call(this,_,b,h,t,r,a),Y.shim.serializeDOM(_)}};s(fp,"FormatUtils");Ze=fp,yt=s(function(e,t,i,r=[]){let a=e.createElement(t);for(let[l,h]of Object.entries(i))h&&a.setAttribute(l,h);for(let l of r)typeof l>"u"||a.appendChild(l);return a},"_FormatUtils_el"),zT=s(function(e,t,i,r,a,l){let h=[],v=[[]];i.forEach(p=>{if(!p.index_range||!p.init_range)return;let b=p.mime_type,I=h.indexOf(b);I>-1?v[I].push(p):(h.push(b),v.push([]),v[h.length-1].push(p))});let _=0;for(let p=0;p<h.length;p++)if(v[p][0].has_audio&&v[p][0].language){let b=[],I=[[]];v[p].forEach(C=>{let N=b.indexOf(C.language);N>-1?I[N].push(C):(b.push(C.language),I.push([]),I[b.length-1].push(C))});for(let C=0;C<b.length;C++){let N=I[C][0],L=[];if(N.audio_track){let D;N.audio_track.audio_is_default?D="main":N.is_dubbed?D="dub":D="alternate",L.push(nt(this,Ze,"m",yt).call(this,e,"Role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:D}))}let O=nt(this,Ze,"m",yt).call(this,e,"AdaptationSet",{id:`${_++}`,mimeType:h[p].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true",lang:b[C]},L);t.appendChild(O),I[C].forEach(D=>{nt(this,Ze,"m",R0).call(this,e,O,D,r,a,l)})}}else{let b=nt(this,Ze,"m",yt).call(this,e,"AdaptationSet",{id:`${_++}`,mimeType:h[p].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true"});t.appendChild(b),v[p].forEach(I=>{I.has_video?nt(this,Ze,"m",HT).call(this,e,b,I,r,a,l):nt(this,Ze,"m",R0).call(this,e,b,I,r,a,l)})}},"_FormatUtils_generateAdaptationSet"),HT=s(function(e,t,i,r,a,l){var h,v,_,p,b,I;let C=Ft(i.mime_type,'codecs="','"');if(!i.index_range||!i.init_range)throw new x("Index and init ranges not available",{format:i});let N=new URL(i.decipher(l));N.searchParams.set("cpn",a||""),t.appendChild(nt(this,Ze,"m",yt).call(this,e,"Representation",{id:(h=i.itag)===null||h===void 0?void 0:h.toString(),codecs:C,bandwidth:(v=i.bitrate)===null||v===void 0?void 0:v.toString(),width:(_=i.width)===null||_===void 0?void 0:_.toString(),height:(p=i.height)===null||p===void 0?void 0:p.toString(),maxPlayoutRate:"1",frameRate:(b=i.fps)===null||b===void 0?void 0:b.toString()},[nt(this,Ze,"m",yt).call(this,e,"BaseURL",{},[e.createTextNode((I=r(N))===null||I===void 0?void 0:I.toString())]),nt(this,Ze,"m",yt).call(this,e,"SegmentBase",{indexRange:`${i.index_range.start}-${i.index_range.end}`},[nt(this,Ze,"m",yt).call(this,e,"Initialization",{range:`${i.init_range.start}-${i.init_range.end}`})])]))},"_FormatUtils_generateRepresentationVideo"),R0=s(function(e,t,i,r,a,l){var h,v,_,p,b;return pp(this,void 0,void 0,function*(){let I=Ft(i.mime_type,'codecs="','"');if(!i.index_range||!i.init_range)throw new x("Index and init ranges not available",{format:i});let C=new URL(i.decipher(l));C.searchParams.set("cpn",a||""),t.appendChild(nt(this,Ze,"m",yt).call(this,e,"Representation",{id:(h=i.itag)===null||h===void 0?void 0:h.toString(),codecs:I,bandwidth:(v=i.bitrate)===null||v===void 0?void 0:v.toString(),audioSamplingRate:(_=i.audio_sample_rate)===null||_===void 0?void 0:_.toString()},[nt(this,Ze,"m",yt).call(this,e,"AudioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:((p=i.audio_channels)===null||p===void 0?void 0:p.toString())||"2"}),nt(this,Ze,"m",yt).call(this,e,"BaseURL",{},[e.createTextNode((b=r(C))===null||b===void 0?void 0:b.toString())]),nt(this,Ze,"m",yt).call(this,e,"SegmentBase",{indexRange:`${i.index_range.start}-${i.index_range.end}`},[nt(this,Ze,"m",yt).call(this,e,"Initialization",{range:`${i.init_range.start}-${i.init_range.end}`})])]))})},"_FormatUtils_generateRepresentationAudio");var jt=fp;var io=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},dn=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},qe=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},p_,Yt,f_,as,pn,hp,h_=class{constructor(e,t,i,r){var a,l,h,v,_,p,b,I,C,N,L,O,D,K,F,w,ve,Ge,Ee,tt,$,B,se,re,st,rt,xt,Xe,Je;p_.set(this,void 0),Yt.set(this,void 0),f_.set(this,void 0),as.set(this,void 0),pn.set(this,void 0),hp.set(this,void 0),dn(this,Yt,t,"f"),dn(this,f_,i,"f"),dn(this,as,r,"f");let ce=f.parseResponse(e[0].data),Me=!((a=e==null?void 0:e[1])===null||a===void 0)&&a.data?f.parseResponse(e[1].data):void 0;if(dn(this,p_,[ce,Me],"f"),((l=ce.playability_status)===null||l===void 0?void 0:l.status)==="ERROR")throw new x("This video is unavailable",ce.playability_status);if(ce.microformat&&!(!((h=ce.microformat)===null||h===void 0)&&h.is(Zi,ui)))throw new x("Invalid microformat",ce.microformat);this.basic_info=Object.assign(Object.assign(Object.assign({},ce.video_details),{embed:!((v=ce.microformat)===null||v===void 0)&&v.is(Zi)?(_=ce.microformat)===null||_===void 0?void 0:_.embed:null,channel:!((p=ce.microformat)===null||p===void 0)&&p.is(Zi)?(b=ce.microformat)===null||b===void 0?void 0:b.channel:null,is_unlisted:(I=ce.microformat)===null||I===void 0?void 0:I.is_unlisted,is_family_safe:(C=ce.microformat)===null||C===void 0?void 0:C.is_family_safe,has_ypc_metadata:!((N=ce.microformat)===null||N===void 0)&&N.is(Zi)?(L=ce.microformat)===null||L===void 0?void 0:L.has_ypc_metadata:null,start_timestamp:!((O=ce.microformat)===null||O===void 0)&&O.is(Zi)?ce.microformat.start_timestamp:null}),{like_count:void 0,is_liked:void 0,is_disliked:void 0}),this.streaming_data=ce.streaming_data,this.playability_status=ce.playability_status,this.annotations=ce.annotations,this.storyboards=ce.storyboards,this.endscreen=ce.endscreen,this.captions=ce.captions,this.cards=ce.cards,dn(this,hp,ce.playback_tracking,"f");let He=(D=Me==null?void 0:Me.contents)===null||D===void 0?void 0:D.item().as(Jo),Vt=He==null?void 0:He.results,At=He==null?void 0:He.secondary_results;if(Vt&&At){this.primary_info=Vt.firstOfType(Vm),this.secondary_info=Vt.firstOfType(Am),this.merchandise=Vt.firstOfType(Kh),this.related_chip_cloud=(K=At.firstOfType(gm))===null||K===void 0?void 0:K.content.item().as(Ai),this.watch_next_feed=((F=At.firstOfType(Ve))===null||F===void 0?void 0:F.contents)||At,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&((w=this.watch_next_feed.at(-1))===null||w===void 0?void 0:w.is(it))&&dn(this,pn,(ve=this.watch_next_feed.pop())===null||ve===void 0?void 0:ve.as(it),"f"),this.player_overlays=(Ge=Me==null?void 0:Me.player_overlays)===null||Ge===void 0?void 0:Ge.item().as(en);let ct=(tt=(Ee=this.primary_info)===null||Ee===void 0?void 0:Ee.menu)===null||tt===void 0?void 0:tt.top_level_buttons.firstOfType(Fn);this.basic_info.like_count=(B=($=ct==null?void 0:ct.like_button)===null||$===void 0?void 0:$.as(Et))===null||B===void 0?void 0:B.like_count,this.basic_info.is_liked=(re=(se=ct==null?void 0:ct.like_button)===null||se===void 0?void 0:se.as(Et))===null||re===void 0?void 0:re.is_toggled,this.basic_info.is_disliked=(rt=(st=ct==null?void 0:ct.dislike_button)===null||st===void 0?void 0:st.as(Et))===null||rt===void 0?void 0:rt.is_toggled;let Hi=(xt=Vt.get({target_id:"comments-entry-point"}))===null||xt===void 0?void 0:xt.as(Ve);this.comments_entry_point_header=(Xe=Hi==null?void 0:Hi.contents)===null||Xe===void 0?void 0:Xe.firstOfType(fh),this.livechat=(Je=Me==null?void 0:Me.contents_memo)===null||Je===void 0?void 0:Je.getType(Fh).first()}}selectFilter(e){var t,i,r,a;return io(this,void 0,void 0,function*(){if(!this.related_chip_cloud)throw new x("Chip cloud not found, cannot apply filter");let l;if(typeof e=="string"){let _=(i=(t=this.related_chip_cloud)===null||t===void 0?void 0:t.chips)===null||i===void 0?void 0:i.get({text:e});if(!_)throw new x("Invalid filter",{available_filters:this.filters});l=_}else if(e!=null&&e.is(De))l=e;else throw new x("Invalid cloud chip",e);if(l.is_selected)return this;let h=yield(r=l.endpoint)===null||r===void 0?void 0:r.call(qe(this,Yt,"f"),{parse:!0}),v=(a=h==null?void 0:h.on_response_received_endpoints)===null||a===void 0?void 0:a.get({target_id:"watch-next-feed"});return this.watch_next_feed=v==null?void 0:v.contents,this})}addToWatchHistory(){return io(this,void 0,void 0,function*(){if(!qe(this,hp,"f"))throw new x("Playback tracking not available");let e={cpn:qe(this,as,"f"),fmt:251,rtn:0,rt:0},t=qe(this,hp,"f").videostats_playback_url.replace("https://s.","https://www.");return yield qe(this,Yt,"f").stats(t,{client_name:W.CLIENTS.WEB.NAME,client_version:W.CLIENTS.WEB.VERSION},e)})}getWatchNextContinuation(){var e,t,i,r,a;return io(this,void 0,void 0,function*(){if(!qe(this,pn,"f"))throw new x("Watch next feed continuation not found");let l=yield(e=qe(this,pn,"f"))===null||e===void 0?void 0:e.endpoint.call(qe(this,Yt,"f"),{parse:!0}),h=(t=l==null?void 0:l.on_response_received_endpoints)===null||t===void 0?void 0:t.get({type:"appendContinuationItemsAction"});if(!h)throw new x("AppendContinuationItemsAction not found");return this.watch_next_feed=h==null?void 0:h.contents,!((r=(i=this.watch_next_feed)===null||i===void 0?void 0:i.at(-1))===null||r===void 0)&&r.is(it)?dn(this,pn,(a=this.watch_next_feed.pop())===null||a===void 0?void 0:a.as(it),"f"):dn(this,pn,void 0,"f"),this})}like(){var e,t,i;return io(this,void 0,void 0,function*(){let r=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(Fn),a=(i=r==null?void 0:r.like_button)===null||i===void 0?void 0:i.as(Et);if(!a)throw new x("Like button not found",{video_id:this.basic_info.id});if(a.is_toggled)throw new x("This video is already liked",{video_id:this.basic_info.id});return yield a.endpoint.call(qe(this,Yt,"f"))})}dislike(){var e,t,i;return io(this,void 0,void 0,function*(){let r=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(Fn),a=(i=r==null?void 0:r.dislike_button)===null||i===void 0?void 0:i.as(Et);if(!a)throw new x("Dislike button not found",{video_id:this.basic_info.id});if(a.is_toggled)throw new x("This video is already disliked",{video_id:this.basic_info.id});return yield a.endpoint.call(qe(this,Yt,"f"))})}removeRating(){var e,t,i,r;return io(this,void 0,void 0,function*(){let a,l=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(Fn),h=(i=l==null?void 0:l.like_button)===null||i===void 0?void 0:i.as(Et),v=(r=l==null?void 0:l.dislike_button)===null||r===void 0?void 0:r.as(Et);if(h!=null&&h.is_toggled?a=h:v!=null&&v.is_toggled&&(a=v),!a)throw new x("This video is not liked/disliked",{video_id:this.basic_info.id});return yield a.toggled_endpoint.call(qe(this,Yt,"f"))})}getLiveChat(){if(!this.livechat)throw new x("Live Chat is not available",{video_id:this.basic_info.id});return new s_(this)}chooseFormat(e){return jt.chooseFormat(e,this.streaming_data)}toDash(e,t){return jt.toDash(this.streaming_data,e,t,qe(this,as,"f"),qe(this,f_,"f"))}download(e={}){return io(this,void 0,void 0,function*(){return jt.download(e,qe(this,Yt,"f"),this.playability_status,this.streaming_data,qe(this,Yt,"f").session.player,this.cpn)})}get filters(){var e,t;return((t=(e=this.related_chip_cloud)===null||e===void 0?void 0:e.chips)===null||t===void 0?void 0:t.map(i=>{var r;return(r=i.text)===null||r===void 0?void 0:r.toString()}))||[]}get actions(){return qe(this,Yt,"f")}get cpn(){return qe(this,as,"f")}get wn_has_continuation(){return!!qe(this,pn,"f")}get music_tracks(){return[]}get page(){return qe(this,p_,"f")}};s(h_,"VideoInfo");p_=new WeakMap,Yt=new WeakMap,f_=new WeakMap,as=new WeakMap,pn=new WeakMap,hp=new WeakMap;var mp=h_;var L0={};Os(L0,{Album:()=>__,Artist:()=>w_,Explore:()=>x_,HomeFeed:()=>I_,Library:()=>E_,LibraryContinuation:()=>oo,Playlist:()=>vs,Recap:()=>P_,Search:()=>M_,TrackInfo:()=>Sp});var OS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},us=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Yi,m_=class{constructor(e){var t,i,r;if(Yi.set(this,void 0),OS(this,Yi,f.parseResponse(e.data),"f"),this.header=(t=us(this,Yi,"f").header)===null||t===void 0?void 0:t.item().as(An),this.url=((i=us(this,Yi,"f").microformat)===null||i===void 0?void 0:i.as(ui).url_canonical)||null,!us(this,Yi,"f").contents_memo)throw new Error("No contents found in the response");this.contents=(r=us(this,Yi,"f").contents_memo.getType(Ae))===null||r===void 0?void 0:r.first().contents,this.sections=us(this,Yi,"f").contents_memo.getType(Ue)||[]}get page(){return us(this,Yi,"f")}};s(m_,"Album");Yi=new WeakMap;var __=m_;var LS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},KT=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},v_=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ls,y_,b_=class{constructor(e,t){var i,r,a;ls.set(this,void 0),y_.set(this,void 0),KT(this,ls,f.parseResponse(e.data),"f"),KT(this,y_,t,"f"),this.header=(i=this.page.header)===null||i===void 0?void 0:i.item().as(tm,nm,Qi);let l=((r=v_(this,ls,"f").contents_memo)===null||r===void 0?void 0:r.getType(Ae))||[],h=((a=v_(this,ls,"f").contents_memo)===null||a===void 0?void 0:a.getType(Ue))||[];this.sections=[...l,...h]}getAllSongs(){var e,t;return LS(this,void 0,void 0,function*(){let i=this.sections.filter(h=>h.type==="MusicShelf");if(!i.length)throw new x("Could not find any node of type MusicShelf.");let r=i.find(h=>h.title.toString()==="Songs");if(!r)throw new x("Could not find target shelf (Songs).");if(!r.endpoint)throw new x("Target shelf (Songs) did not have an endpoint.");return(t=(e=(yield r.endpoint.call(v_(this,y_,"f"),{client:"YTMUSIC",parse:!0})).contents_memo)===null||e===void 0?void 0:e.getType(Rn))===null||t===void 0?void 0:t.first()})}get page(){return v_(this,ls,"f")}};s(b_,"Artist");ls=new WeakMap,y_=new WeakMap;var w_=b_;var DS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},qT=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},_p,g_=class{constructor(e){var t,i,r;_p.set(this,void 0),DS(this,_p,f.parseResponse(e.data),"f");let a=(t=qT(this,_p,"f").contents)===null||t===void 0?void 0:t.item().as(di).tabs.get({selected:!0});if(!a)throw new x("Could not find target tab.");let l=(i=a.content)===null||i===void 0?void 0:i.as(_e);if(!l)throw new x("Target tab did not have any content.");this.top_buttons=((r=l.contents.firstOfType(Mn))===null||r===void 0?void 0:r.items.as(jo))||[],this.sections=l.contents.filterType(Ue)}get page(){return qT(this,_p,"f")}};s(g_,"Explore");_p=new WeakMap;var x_=g_;var BS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},T_=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},vi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},fn,vp,no,cs=class{constructor(e,t){var i,r,a,l;fn.set(this,void 0),vp.set(this,void 0),no.set(this,void 0),T_(this,vp,t,"f"),T_(this,fn,f.parseResponse(e.data),"f");let h=(i=vi(this,fn,"f").contents)===null||i===void 0?void 0:i.item().as(di).tabs.get({selected:!0});if(!h)throw new x("Could not find Home tab.");if(h.key("content").isNull()){if(!vi(this,fn,"f").continuation_contents)throw new x("Continuation did not have any content.");T_(this,no,vi(this,fn,"f").continuation_contents.as(kt).continuation,"f"),this.sections=(r=vi(this,fn,"f").continuation_contents.as(kt).contents)===null||r===void 0?void 0:r.as(Ue);return}T_(this,no,(a=h.content)===null||a===void 0?void 0:a.as(_e).continuation,"f"),this.sections=(l=h.content)===null||l===void 0?void 0:l.as(_e).contents.as(Ue)}getContinuation(){return BS(this,void 0,void 0,function*(){if(!vi(this,no,"f"))throw new x("Continuation not found.");let e=yield vi(this,vp,"f").execute("/browse",{client:"YTMUSIC",continuation:vi(this,no,"f")});return new cs(e,vi(this,vp,"f"))})}get has_continuation(){return!!vi(this,no,"f")}get page(){return vi(this,fn,"f")}};s(cs,"HomeFeed");fn=new WeakMap,vp=new WeakMap,no=new WeakMap;var I_=cs;var S_=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},fs=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ne=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},yi,hn,ds,mn,yp,ps,hs=class{constructor(e,t){var i,r,a,l,h;yi.set(this,void 0),hn.set(this,void 0),ds.set(this,void 0),fs(this,yi,f.parseResponse(e.data),"f"),fs(this,hn,t,"f");let v=(i=Ne(this,yi,"f").contents_memo)===null||i===void 0?void 0:i.getType(_e).first();this.header=(r=v==null?void 0:v.header)===null||r===void 0?void 0:r.item().as(im),this.contents=(a=v==null?void 0:v.contents)===null||a===void 0?void 0:a.as(Mn,Ae),fs(this,ds,(h=(l=this.contents)===null||l===void 0?void 0:l.find(_=>_.continuation))===null||h===void 0?void 0:h.continuation,"f")}applySort(e){var t,i,r,a,l,h,v,_,p,b;return S_(this,void 0,void 0,function*(){let I;if(typeof e=="string"){let O=(t=Ne(this,yi,"f").contents_memo)===null||t===void 0?void 0:t.getType(Jl).first(),D=(i=O==null?void 0:O.menu)===null||i===void 0?void 0:i.options.filter(K=>K instanceof Ht);if(I=D==null?void 0:D.find(K=>K.title===e),!I)throw new x(`Sort option "${e}" not found`,{available_filters:D.map(K=>K.title)})}else e instanceof Ht&&(I=e);if(!I)throw new x("Invalid sort option");if(I.selected)return this;let C=(h=(l=(a=(r=I.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.commands)===null||l===void 0?void 0:l.find(O=>O.browseSectionListReloadEndpoint))===null||h===void 0?void 0:h.browseSectionListReloadEndpoint;if(!C)throw new x("Failed to find sort option command");let N=yield Ne(this,hn,"f").execute("/browse",{client:"YTMUSIC",continuation:C.continuation.reloadContinuationData.continuation,parse:!0}),L=(_=(v=Ne(this,yi,"f").contents_memo)===null||v===void 0?void 0:v.getType(Ht))===null||_===void 0?void 0:_.find(O=>O.selected);return L&&(L.selected=!1),I.selected=!0,this.contents=(b=(p=N.continuation_contents)===null||p===void 0?void 0:p.as(kt).contents)===null||b===void 0?void 0:b.as(Mn,Ae),this})}applyFilter(e){var t,i,r,a;return S_(this,void 0,void 0,function*(){let l,h=(t=Ne(this,yi,"f").contents_memo)===null||t===void 0?void 0:t.getType(Ai).first();if(typeof e=="string"){if(l=h==null?void 0:h.chips.get({text:e}),!l)throw new x(`Filter "${e}" not found`,{available_filters:this.filters})}else e instanceof De&&(l=e);if(!l)throw new x("Invalid filter",e);let _=yield new T((a=(r=(i=l.endpoint)===null||i===void 0?void 0:i.payload)===null||r===void 0?void 0:r.commands)===null||a===void 0?void 0:a[0]).call(Ne(this,hn,"f"),{client:"YTMUSIC"});return new hs(_,Ne(this,hn,"f"))})}getContinuation(){return S_(this,void 0,void 0,function*(){if(!Ne(this,ds,"f"))throw new x("No continuation available");let e=yield Ne(this,hn,"f").execute("/browse",{client:"YTMUSIC",continuation:Ne(this,ds,"f")});return new oo(e,Ne(this,hn,"f"))})}get has_continuation(){return!!Ne(this,ds,"f")}get sort_options(){var e,t;let i=(e=Ne(this,yi,"f").contents_memo)===null||e===void 0?void 0:e.getType(Jl).first();return((t=i==null?void 0:i.menu)===null||t===void 0?void 0:t.options.filter(a=>a instanceof Ht)).map(a=>a.title)}get filters(){var e,t;return((t=(e=Ne(this,yi,"f").contents_memo)===null||e===void 0?void 0:e.getType(Ai))===null||t===void 0?void 0:t.first().chips.map(i=>i.text))||[]}get page(){return Ne(this,yi,"f")}};s(hs,"Library");yi=new WeakMap,hn=new WeakMap,ds=new WeakMap;var oo=class{constructor(e,t){var i,r;if(mn.set(this,void 0),yp.set(this,void 0),ps.set(this,void 0),fs(this,mn,f.parseResponse(e.data),"f"),fs(this,yp,t,"f"),!Ne(this,mn,"f").continuation_contents)throw new x("No continuation contents found");this.contents=Ne(this,mn,"f").continuation_contents.as(Li,jn),fs(this,ps,!((i=Ne(this,mn,"f").continuation_contents)===null||i===void 0)&&i.key("continuation").isNull()?null:(r=Ne(this,mn,"f").continuation_contents)===null||r===void 0?void 0:r.key("continuation").string(),"f")}getContinuation(){return S_(this,void 0,void 0,function*(){if(!Ne(this,ps,"f"))throw new x("No continuation available");let e=yield Ne(this,yp,"f").execute("/browse",{client:"YTMUSIC",continuation:Ne(this,ps,"f")});return new oo(e,Ne(this,yp,"f"))})}get has_continuation(){return!!Ne(this,ps,"f")}get page(){return Ne(this,mn,"f")}};s(oo,"LibraryContinuation");mn=new WeakMap,yp=new WeakMap,ps=new WeakMap;var E_=hs;var k_=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},_n=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Be=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},O0,Pt,ro,so,ms,bp,$T,_s=class{constructor(e,t){var i,r,a,l,h,v;if(O0.add(this),Pt.set(this,void 0),ro.set(this,void 0),so.set(this,void 0),ms.set(this,void 0),bp.set(this,void 0),_n(this,ro,t,"f"),_n(this,Pt,f.parseResponse(e.data),"f"),_n(this,ms,null,"f"),_n(this,bp,null,"f"),Be(this,Pt,"f").continuation_contents){let _=(i=Be(this,Pt,"f").continuation_contents)===null||i===void 0?void 0:i.as(Bn);this.items=_.contents,_n(this,so,_.continuation,"f")}else((r=Be(this,Pt,"f").header)===null||r===void 0?void 0:r.item().type)==="MusicEditablePlaylistDetailHeader"?this.header=(a=Be(this,Pt,"f").header)===null||a===void 0?void 0:a.item().as(em).header.item().as(An):this.header=(l=Be(this,Pt,"f").header)===null||l===void 0?void 0:l.item().as(An),this.items=((h=Be(this,Pt,"f").contents_memo)===null||h===void 0?void 0:h.getType(Rn).first().contents)||null,_n(this,so,((v=Be(this,Pt,"f").contents_memo)===null||v===void 0?void 0:v.getType(Rn).first().continuation)||null,"f")}getContinuation(){return k_(this,void 0,void 0,function*(){if(!Be(this,so,"f"))throw new x("Continuation not found.");let e=yield Be(this,ro,"f").execute("/browse",{client:"YTMUSIC",continuation:Be(this,so,"f")});return new _s(e,Be(this,ro,"f"))})}getRelated(){var e,t,i,r,a;return k_(this,void 0,void 0,function*(){let l=(t=(e=Be(this,Pt,"f").contents_memo)===null||e===void 0?void 0:e.getType(_e))===null||t===void 0?void 0:t[0].continuation;for(;l;){let v=(i=(yield Be(this,ro,"f").execute("/browse",{client:"YTMUSIC",continuation:l,parse:!0})).continuation_contents)===null||i===void 0?void 0:i.as(kt),_=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.as(Ue,Ae),p=(a=_==null?void 0:_.matchCondition(b=>b.is(Ue)))===null||a===void 0?void 0:a.as(Ue);if(p)return p;l=v==null?void 0:v.continuation}throw new x("Target section not found.")})}getSuggestions(e=!0){return k_(this,void 0,void 0,function*(){let r=yield e||!Be(this,ms,"f")?Be(this,O0,"m",$T).call(this):Promise.resolve(null);return r&&(_n(this,ms,r.items,"f"),_n(this,bp,r.continuation,"f")),(r==null?void 0:r.items)||Be(this,ms,"f")})}get page(){return Be(this,Pt,"f")}get has_continuation(){return!!Be(this,so,"f")}};s(_s,"Playlist");Pt=new WeakMap,ro=new WeakMap,so=new WeakMap,ms=new WeakMap,bp=new WeakMap,O0=new WeakSet,$T=s(function(){var e,t,i,r,a;return k_(this,void 0,void 0,function*(){let l=Be(this,bp,"f")||((t=(e=Be(this,Pt,"f").contents_memo)===null||e===void 0?void 0:e.get("SectionList"))===null||t===void 0?void 0:t[0].as(_e).continuation);if(l){let v=(i=(yield Be(this,ro,"f").execute("/browse",{client:"YTMUSIC",continuation:l,parse:!0})).continuation_contents)===null||i===void 0?void 0:i.as(kt),_=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.as(Ue,Ae),p=(a=_==null?void 0:_.matchCondition(b=>b.is(Ae)))===null||a===void 0?void 0:a.as(Ae);return{items:(p==null?void 0:p.contents)||[],continuation:(p==null?void 0:p.continuation)||null}}return{items:[],continuation:null}})},"_Playlist_fetchSuggestions");var vs=_s;var jS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},XT=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ao=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},vn,wp,C_=class{constructor(e,t){var i,r,a,l,h,v,_;vn.set(this,void 0),wp.set(this,void 0),XT(this,vn,f.parseResponse(e.data),"f"),XT(this,wp,t,"f");let p=(i=ao(this,vn,"f").header)===null||i===void 0?void 0:i.item();this.header=p!=null&&p.is(Vl)?(l=(a=(r=ao(this,vn,"f").header)===null||r===void 0?void 0:r.item().as(Vl).element)===null||a===void 0?void 0:a.model)===null||l===void 0?void 0:l.item().as(Ua):(h=ao(this,vn,"f").header)===null||h===void 0?void 0:h.item().as(Qi);let b=(v=ao(this,vn,"f").contents)===null||v===void 0?void 0:v.item().as(di).tabs.firstOfType(Ce);if(!b)throw new x("Target tab not found");this.sections=(_=b.content)===null||_===void 0?void 0:_.as(_e).contents.as(Ve,Ue,Dt)}getPlaylist(){return jS(this,void 0,void 0,function*(){if(!this.header)throw new x("Header not found");if(!this.header.is(Ua))throw new x("Recap playlist not available, check back later.");let t=yield this.header.panels[0].text_on_tap_endpoint.call(ao(this,wp,"f"),{client:"YTMUSIC"});return new vs(t,ao(this,wp,"f"))})}get page(){return ao(this,vn,"f")}};s(C_,"Recap");vn=new WeakMap,wp=new WeakMap;var P_=C_;var N_=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},xp=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},je=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},bi,Ui,ys,gp,bs,uo=class{constructor(e,t,i){var r,a,l;if(bi.set(this,void 0),Ui.set(this,void 0),ys.set(this,void 0),xp(this,Ui,t,"f"),xp(this,bi,f.parseResponse(e.data),"f"),!je(this,bi,"f").contents||!je(this,bi,"f").contents_memo)throw new x("Response did not contain any contents.");let h=je(this,bi,"f").contents.item().as(Cm).tabs.get({selected:!0});if(!h)throw new x("Could not find target tab.");let v=(r=h.content)===null||r===void 0?void 0:r.as(_e);if(!v)throw new x("Target tab did not have any content.");this.header=(a=v.header)===null||a===void 0?void 0:a.item().as(Ai),this.contents=v.contents.as(Ae,Ve),i&&xp(this,ys,(l=this.contents.firstOfType(Ae))===null||l===void 0?void 0:l.continuation,"f")}getMore(e){return N_(this,void 0,void 0,function*(){if(!e||!e.endpoint)throw new x("Cannot retrieve more items for this shelf because it does not have an endpoint.");let t=yield e.endpoint.call(je(this,Ui,"f"),{client:"YTMUSIC"});if(!t)throw new x("Endpoint did not return any data");return new uo(t,je(this,Ui,"f"),!0)})}getContinuation(){return N_(this,void 0,void 0,function*(){if(!je(this,ys,"f"))throw new x("Continuation not found.");let e=yield je(this,Ui,"f").execute("/search",{continuation:je(this,ys,"f"),client:"YTMUSIC"});return new ws(je(this,Ui,"f"),e)})}applyFilter(e){var t,i;return N_(this,void 0,void 0,function*(){let r;if(typeof e=="string"){if(r=(i=(t=this.header)===null||t===void 0?void 0:t.chips)===null||i===void 0?void 0:i.as(De).get({text:e}),!r)throw new x("Could not find filter with given name.",{available_filters:this.filters})}else e!=null&&e.is(De)&&(r=e);if(!r)throw new x("Invalid filter",{available_filters:this.filters});if(r!=null&&r.is_selected)return this;if(!r.endpoint)throw new x("Selected filter does not have an endpoint.");let a=yield r.endpoint.call(je(this,Ui,"f"),{client:"YTMUSIC"});return new uo(a,je(this,Ui,"f"),!0)})}get filters(){var e,t;return((t=(e=this.header)===null||e===void 0?void 0:e.chips)===null||t===void 0?void 0:t.as(De).map(i=>i.text))||[]}get has_continuation(){return!!je(this,ys,"f")}get did_you_mean(){var e;return(e=je(this,bi,"f").contents_memo)===null||e===void 0?void 0:e.getType(wh).first()}get showing_results_for(){var e;return(e=je(this,bi,"f").contents_memo)===null||e===void 0?void 0:e.getType(Em).first()}get message(){var e;return(e=je(this,bi,"f").contents_memo)===null||e===void 0?void 0:e.getType(Dt).first()}get songs(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae).find(t=>t.title.toString()==="Songs")}get videos(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae).find(t=>t.title.toString()==="Videos")}get albums(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae).find(t=>t.title.toString()==="Albums")}get artists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae).find(t=>t.title.toString()==="Artists")}get playlists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae).find(t=>t.title.toString()==="Community playlists")}get results(){var e,t;return(t=(e=this.contents)===null||e===void 0?void 0:e.firstOfType(Ae))===null||t===void 0?void 0:t.contents}get sections(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Ae)}get page(){return je(this,bi,"f")}};s(uo,"Search");bi=new WeakMap,Ui=new WeakMap,ys=new WeakMap;var M_=uo,ws=class{constructor(e,t){var i,r;gp.set(this,void 0),bs.set(this,void 0),xp(this,gp,e,"f"),xp(this,bs,f.parseResponse(t.data),"f"),this.header=(i=je(this,bs,"f").header)===null||i===void 0?void 0:i.item().as(Qi),this.contents=(r=je(this,bs,"f").continuation_contents)===null||r===void 0?void 0:r.as(Li)}getContinuation(){var e;return N_(this,void 0,void 0,function*(){if(!(!((e=this.contents)===null||e===void 0)&&e.continuation))throw new x("Continuation not found.");let t=yield je(this,gp,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new ws(je(this,gp,"f"),t)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}get page(){return je(this,bs,"f")}};s(ws,"SearchContinuation");gp=new WeakMap,bs=new WeakMap;var gs=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},V_=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Xt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},A_,Wi,Tp,Ip,R_=class{constructor(e,t,i){var r,a,l,h,v,_,p,b,I,C,N;A_.set(this,void 0),Wi.set(this,void 0),Tp.set(this,void 0),Ip.set(this,void 0),V_(this,Wi,t,"f");let L=f.parseResponse(e[0].data),O=!((r=e==null?void 0:e[1])===null||r===void 0)&&r.data?f.parseResponse(e[1].data):void 0;if(V_(this,A_,[L,O],"f"),V_(this,Tp,i,"f"),((a=L.playability_status)===null||a===void 0?void 0:a.status)==="ERROR")throw new x("This video is unavailable",L.playability_status);if(!(!((l=L.microformat)===null||l===void 0)&&l.is(ui)))throw new x("Invalid microformat",L.microformat);if(this.basic_info=Object.assign(Object.assign({},L.video_details),{description:(h=L.microformat)===null||h===void 0?void 0:h.description,is_unlisted:(v=L.microformat)===null||v===void 0?void 0:v.is_unlisted,is_family_safe:(_=L.microformat)===null||_===void 0?void 0:_.is_family_safe,url_canonical:(p=L.microformat)===null||p===void 0?void 0:p.url_canonical,tags:(b=L.microformat)===null||b===void 0?void 0:b.tags}),this.streaming_data=L.streaming_data,this.playability_status=L.playability_status,this.storyboards=L.storyboards,this.endscreen=L.endscreen,V_(this,Ip,L.playback_tracking,"f"),O){let D=(C=(I=O.contents_memo)===null||I===void 0?void 0:I.getType(Fm))===null||C===void 0?void 0:C[0];this.tabs=D==null?void 0:D.tabs.array().as(Ce),this.current_video_endpoint=O.current_video_endpoint,this.player_overlays=(N=O.player_overlays)===null||N===void 0?void 0:N.item().as(en)}}toDash(e,t){return jt.toDash(this.streaming_data,e,t,Xt(this,Tp,"f"),Xt(this,Wi,"f").session.player)}chooseFormat(e){return jt.chooseFormat(e,this.streaming_data)}download(e={}){return gs(this,void 0,void 0,function*(){return jt.download(e,Xt(this,Wi,"f"),this.playability_status,this.streaming_data,Xt(this,Wi,"f").session.player)})}getTab(e){var t,i;return gs(this,void 0,void 0,function*(){if(!this.tabs)throw new x("Could not find any tab");let r=this.tabs.get({title:e})||this.tabs.matchCondition(l=>{var h,v;return((v=(h=l.endpoint.payload.browseEndpointContextSupportedConfigs)===null||h===void 0?void 0:h.browseEndpointContextMusicConfig)===null||v===void 0?void 0:v.pageType)===e})||((t=this.tabs)===null||t===void 0?void 0:t[0]);if(!r)throw new x(`Tab "${e}" not found`,{available_tabs:this.available_tabs});if(r.content)return r.content;let a=yield r.endpoint.call(Xt(this,Wi,"f"),{client:"YTMUSIC",parse:!0});if(((i=a.contents)===null||i===void 0?void 0:i.item().key("type").string())==="Message")return a.contents.item().as(Dt);if(!a.contents)throw new x("Page contents was empty",a);return a.contents.item().as(_e).contents})}getUpNext(e=!0){var t,i;return gs(this,void 0,void 0,function*(){let r=yield this.getTab("Up next");if(!r||!r.content)throw new x("Music queue was empty, the video id is probably invalid.",r);let a=r.content.as(ci);if(!a.playlist_id&&e){let l=a.contents.firstOfType(Eo);if(!l)throw new x("Automix item not found");let h=yield(t=l.playlist_video)===null||t===void 0?void 0:t.endpoint.call(Xt(this,Wi,"f"),{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!h||!h.contents_memo)throw new x("Could not fetch automix");return(i=h.contents_memo.getType(ci))===null||i===void 0?void 0:i[0]}return a})}getRelated(){return gs(this,void 0,void 0,function*(){return yield this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")})}getLyrics(){return gs(this,void 0,void 0,function*(){return(yield this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(Vn)})}addToWatchHistory(){return gs(this,void 0,void 0,function*(){if(!Xt(this,Ip,"f"))throw new x("Playback tracking not available");let e={cpn:Xt(this,Tp,"f"),fmt:251,rtn:0,rt:0},t=Xt(this,Ip,"f").videostats_playback_url.replace("https://s.","https://music.");return yield Xt(this,Wi,"f").stats(t,{client_name:W.CLIENTS.YTMUSIC.NAME,client_version:W.CLIENTS.YTMUSIC.VERSION},e)})}get available_tabs(){return this.tabs?this.tabs.map(e=>e.title):[]}get page(){return Xt(this,A_,"f")}};s(R_,"TrackInfo");A_=new WeakMap,Wi=new WeakMap,Tp=new WeakMap,Ip=new WeakMap;var Sp=R_;var D0={};Os(D0,{Channel:()=>F_,HomeFeed:()=>O_,Search:()=>D_,VideoInfo:()=>U_});var YS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},xs=class extends Pe{constructor(e,t,i=!1){var r,a;super(e,t,i),this.header=(r=this.page.header)===null||r===void 0?void 0:r.item().as(Po),this.contents=this.memo.getType(Ve).first()||((a=this.page.continuation_contents)===null||a===void 0?void 0:a.as(On))}getContinuation(){var e;return YS(this,void 0,void 0,function*(){let t=yield this.actions.execute("/browse",{continuation:(e=this.contents)===null||e===void 0?void 0:e.continuation,client:"YTKIDS"});return new xs(this.actions,t)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}};s(xs,"Channel");var F_=xs;var US=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ts=class extends Pe{constructor(e,t,i=!1){var r,a;super(e,t,i),this.header=(r=this.page.header)===null||r===void 0?void 0:r.item().as(Om),this.contents=(a=this.page.contents)===null||a===void 0?void 0:a.item().as(Dm)}selectCategoryTab(e){var t;return US(this,void 0,void 0,function*(){let i;if(typeof e=="string"?i=(t=this.header)===null||t===void 0?void 0:t.category_tabs.find(a=>a.title.toString()===e):e!=null&&e.is(Lm)&&(i=e),!i)throw new x(`Tab "${e}" not found`);let r=yield i.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return r.header=this.page.header,r.header_memo=this.page.header_memo,new Ts(this.actions,r,!0)})}get categories(){var e;return((e=this.header)===null||e===void 0?void 0:e.category_tabs.map(t=>t.title.toString()))||[]}};s(Ts,"HomeFeed");var O_=Ts;var L_=class extends Pe{constructor(e,t){super(e,t),this.estimated_results=this.page.estimated_results;let i=this.memo.getType(Ve).first();if(!i)throw new x("No item section found in search response.");this.contents=i.contents}};s(L_,"Search");var D_=L_;var QT=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},B_=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Qt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},j_,yn,Is,Ep,Y_=class{constructor(e,t,i){var r,a,l,h,v,_,p;j_.set(this,void 0),yn.set(this,void 0),Is.set(this,void 0),Ep.set(this,void 0),B_(this,yn,t,"f");let b=f.parseResponse(e[0].data),I=!((r=e==null?void 0:e[1])===null||r===void 0)&&r.data?f.parseResponse(e[1].data):void 0;if(B_(this,j_,[b,I],"f"),B_(this,Is,i,"f"),((a=b.playability_status)===null||a===void 0?void 0:a.status)==="ERROR")throw new x("This video is unavailable",b.playability_status);this.basic_info=b.video_details,this.streaming_data=b.streaming_data,this.playability_status=b.playability_status,this.captions=b.captions,B_(this,Ep,b.playback_tracking,"f");let C=(l=I==null?void 0:I.contents)===null||l===void 0?void 0:l.item().as(Jo),N=C==null?void 0:C.results,L=C==null?void 0:C.secondary_results;N&&L&&(this.slim_video_metadata=(v=(h=N.firstOfType(Ve))===null||h===void 0?void 0:h.contents)===null||v===void 0?void 0:v.firstOfType(km),this.watch_next_feed=((_=L.firstOfType(Ve))===null||_===void 0?void 0:_.contents)||L,this.current_video_endpoint=I==null?void 0:I.current_video_endpoint,this.player_overlays=(p=I==null?void 0:I.player_overlays)===null||p===void 0?void 0:p.item().as(en))}toDash(e,t){return jt.toDash(this.streaming_data,e,t,Qt(this,Is,"f"),Qt(this,yn,"f").session.player)}chooseFormat(e){return jt.chooseFormat(e,this.streaming_data)}download(e={}){return QT(this,void 0,void 0,function*(){return jt.download(e,Qt(this,yn,"f"),this.playability_status,this.streaming_data,Qt(this,yn,"f").session.player,this.cpn)})}addToWatchHistory(){return QT(this,void 0,void 0,function*(){if(!Qt(this,Ep,"f"))throw new x("Playback tracking not available");let e={cpn:Qt(this,Is,"f"),fmt:251,rtn:0,rt:0},t=Qt(this,Ep,"f").videostats_playback_url.replace("https://s.","https://www.");return yield Qt(this,yn,"f").stats(t,{client_name:Jt.CLIENTS.WEB.NAME,client_version:Jt.CLIENTS.WEB.VERSION},e)})}get actions(){return Qt(this,yn,"f")}get cpn(){return Qt(this,Is,"f")}get page(){return Qt(this,j_,"f")}};s(Y_,"VideoInfo");j_=new WeakMap,yn=new WeakMap,Is=new WeakMap,Ep=new WeakMap;var U_=Y_;var f=ie;var W_=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},WS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},wi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ss,Gi,B0,ZT,e1,G_=class{constructor(e){Ss.add(this),Gi.set(this,void 0),WS(this,Gi,e,"f")}get session(){return wi(this,Gi,"f")}getVideoInfo(e,t,i,r){var a;return W_(this,void 0,void 0,function*(){let l={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"https://www.youtube.com",currentUrl:`/watch?v=${e}`,autonavState:"STATE_NONE",signatureTimestamp:((a=wi(this,Gi,"f").player)===null||a===void 0?void 0:a.sts)||0,autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1"}},attestationRequest:{omitBotguardData:!0},videoId:e};i&&(l.client=i),t&&(l.cpn=t),r&&(l.playlistId=r);let h=yield wi(this,Gi,"f").http.fetch("/player",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});return wi(this,Ss,"m",B0).call(this,h)})}stats(e,t,i){return W_(this,void 0,void 0,function*(){let r=new URL(e);r.searchParams.set("ver","2"),r.searchParams.set("c",t.client_name.toLowerCase()),r.searchParams.set("cbrver",t.client_version),r.searchParams.set("cver",t.client_version);for(let l of Object.keys(i))r.searchParams.set(l,i[l]);return yield wi(this,Gi,"f").http.fetch(r)})}execute(e,t){var i,r;return W_(this,void 0,void 0,function*(){let a;if(t&&!t.protobuf){if(a=Object.assign({},t),Reflect.has(a,"browseId")&&wi(this,Ss,"m",e1).call(this,a.browseId)&&!wi(this,Gi,"f").logged_in)throw new x("You must be signed in to perform this operation.");Reflect.has(a,"override_endpoint")&&delete a.override_endpoint,Reflect.has(a,"parse")&&delete a.parse,Reflect.has(a,"request")&&delete a.request,Reflect.has(a,"clientActions")&&delete a.clientActions,Reflect.has(a,"settingItemIdForClient")&&delete a.settingItemIdForClient,Reflect.has(a,"action")&&(a.actions=[a.action],delete a.action),Reflect.has(a,"boolValue")&&(a.newValue={boolValue:a.boolValue},delete a.boolValue),Reflect.has(a,"token")&&(a.continuation=a.token,delete a.token),(a==null?void 0:a.client)==="YTMUSIC"&&(a.isAudioOnly=!0)}else t&&(a=t.serialized_data);let l=Reflect.has(t||{},"override_endpoint")?t==null?void 0:t.override_endpoint:e,h=yield wi(this,Gi,"f").http.fetch(l,{method:"POST",body:t!=null&&t.protobuf?a:JSON.stringify(a||{}),headers:{"Content-Type":t!=null&&t.protobuf?"application/x-protobuf":"application/json"}});if(t!=null&&t.parse){let v=f.parseResponse(yield h.json());if(wi(this,Ss,"m",ZT).call(this,v)&&((r=(i=v.on_response_received_actions)===null||i===void 0?void 0:i.first())===null||r===void 0?void 0:r.type)==="navigateAction"){let _=v.on_response_received_actions.firstOfType(Ln);_&&(v=yield _.endpoint.call(this,{parse:!0}))}return v}return wi(this,Ss,"m",B0).call(this,h)})}};s(G_,"Actions");Gi=new WeakMap,Ss=new WeakSet,B0=s(function(e){return W_(this,void 0,void 0,function*(){return{success:e.ok,status_code:e.status,data:JSON.parse(yield e.text())}})},"_Actions_wrap"),ZT=s(function(e){return"on_response_received_actions"in e},"_Actions_isBrowse"),e1=s(function(e){return["FElibrary","FEhistory","FEsubscriptions","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(e)},"_Actions_needsLogin");var j0=G_;var J_=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},H_=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},gi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Es,ks,kp,Cp,bt=class{constructor(e,t,i,r){Es.set(this,void 0),ks.set(this,void 0),kp.set(this,void 0),Cp.set(this,void 0),H_(this,Es,i,"f"),H_(this,ks,t,"f"),H_(this,kp,e,"f"),H_(this,Cp,r,"f")}static create(e,t=Y.shim.fetch){return J_(this,void 0,void 0,function*(){let i=new URL("/iframe_api",W.URLS.YT_BASE),r=yield t(i);if(r.status!==200)throw new It("Failed to request player id");let a=yield r.text(),l=Ft(a,"player\\/","\\/");if(!l)throw new It("Failed to get player id");if(e){let C=yield bt.fromCache(e,l);if(C)return C}let h=new URL(`/s/player/${l}/player_ias.vflset/en_US/base.js`,W.URLS.YT_BASE),v=yield t(h,{headers:{"user-agent":qi("desktop")}});if(!v.ok)throw new It(`Failed to get player data: ${v.status}`);let _=yield v.text(),p=this.extractSigTimestamp(_),b=this.extractSigSourceCode(_),I=this.extractNSigSourceCode(_);return yield bt.fromSource(e,p,b,I,l)})}decipher(e,t,i){if(e=e||t||i,!e)throw new It("No valid URL to decipher");let r=new URLSearchParams(e),a=new URL(r.get("url")||e);if(t||i){let h=Y.shim.eval(gi(this,ks,"f"),{sig:r.get("s")});if(typeof h!="string")throw new It("Failed to decipher signature");let v=r.get("sp");v?a.searchParams.set(v,h):a.searchParams.set("signature",h)}let l=a.searchParams.get("n");if(l){let h=Y.shim.eval(gi(this,Es,"f"),{nsig:l});if(typeof h!="string")throw new It("Failed to decipher nsig");h.startsWith("enhanced_except_")&&console.warn(`Warning:
Could not transform nsig, download may be throttled.
Changing the InnerTube client to "ANDROID" might help!`),a.searchParams.set("n",h)}return a.toString()}static fromCache(e,t){return J_(this,void 0,void 0,function*(){let i=yield e.get(t);if(!i)return null;let r=new DataView(i);if(r.getUint32(0,!0)!==bt.LIBRARY_VERSION)return null;let l=r.getUint32(4,!0),h=r.getUint32(8,!0),v=i.slice(12,12+h),_=i.slice(12+h),p=new TextDecoder,b=p.decode(v),I=p.decode(_);return new bt(l,b,I,t)})}static fromSource(e,t,i,r,a){return J_(this,void 0,void 0,function*(){let l=new bt(t,i,r,a);return yield l.cache(e),l})}cache(e){return J_(this,void 0,void 0,function*(){if(!e)return;let t=new TextEncoder,i=t.encode(gi(this,ks,"f")),r=t.encode(gi(this,Es,"f")),a=new ArrayBuffer(12+i.byteLength+r.byteLength),l=new DataView(a);l.setUint32(0,bt.LIBRARY_VERSION,!0),l.setUint32(4,gi(this,kp,"f"),!0),l.setUint32(8,i.byteLength,!0),new Uint8Array(a).set(i,12),new Uint8Array(a).set(r,12+i.byteLength),yield e.set(gi(this,Cp,"f"),new Uint8Array(a))})}static extractSigTimestamp(e){return parseInt(Ft(e,"signatureTimestamp:",",")||"0")}static extractSigSourceCode(e){var t,i,r;let a=Ft(e,'function(a){a=a.split("")','return a.join("")}'),l=(r=(i=(t=a==null?void 0:a.split(/\.|\[/))===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.replace(";",""))===null||r===void 0?void 0:r.trim(),h=Ft(e,`var ${l}={`,"};");return(!h||!a)&&console.warn(new It("Failed to extract signature decipher algorithm")),`function descramble_sig(a) { a = a.split(""); let ${l}={${h}}${a} return a.join("") } descramble_sig(sig);`}static extractNSigSourceCode(e){let t=`function descramble_nsig(a) { let b=a.split("")${Ft(e,'b=a.split("")','}return b.join("")}')}} return b.join(""); } descramble_nsig(nsig)`;return t||console.warn(new It("Failed to extract n-token decipher algorithm")),t}get url(){return new URL(`/s/player/${gi(this,Cp,"f")}/player_ias.vflset/en_US/base.js`,W.URLS.YT_BASE).toString()}get sts(){return gi(this,kp,"f")}get nsig_sc(){return gi(this,Es,"f")}get sig_sc(){return gi(this,ks,"f")}static get LIBRARY_VERSION(){return 2}};s(bt,"Player");Es=new WeakMap,ks=new WeakMap,kp=new WeakMap,Cp=new WeakMap;var xi=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},bn=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},z=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ji,lo,We,Re,z_,i1,U0,t1,n1,Y0,K_=class{constructor(e){Ji.add(this),lo.set(this,void 0),We.set(this,void 0),Re.set(this,void 0),z_.set(this,5),bn(this,We,e,"f")}init(e){return xi(this,void 0,void 0,function*(){bn(this,Re,e,"f"),this.validateCredentials()?this.has_access_token_expired||z(this,We,"f").emit("auth",{credentials:z(this,Re,"f"),status:"SUCCESS"}):(yield z(this,Ji,"m",i1).call(this))||(yield z(this,Ji,"m",U0).call(this))})}cacheCredentials(){var e;return xi(this,void 0,void 0,function*(){let i=new TextEncoder().encode(JSON.stringify(z(this,Re,"f")));yield(e=z(this,We,"f").cache)===null||e===void 0?void 0:e.set("youtubei_oauth_credentials",i.buffer)})}removeCache(){var e;return xi(this,void 0,void 0,function*(){yield(e=z(this,We,"f").cache)===null||e===void 0?void 0:e.remove("youtubei_oauth_credentials")})}refreshIfRequired(){return xi(this,void 0,void 0,function*(){this.has_access_token_expired&&(yield z(this,Ji,"m",n1).call(this))})}revokeCredentials(){return xi(this,void 0,void 0,function*(){if(!!z(this,Re,"f"))return yield this.removeCache(),z(this,We,"f").http.fetch_function(new URL(`/o/oauth2/revoke?token=${encodeURIComponent(z(this,Re,"f").access_token)}`,W.URLS.YT_BASE),{method:"post"})})}get credentials(){return z(this,Re,"f")}get has_access_token_expired(){let e=z(this,Re,"f")?new Date(z(this,Re,"f").expires).getTime():-1/0;return new Date().getTime()>e}validateCredentials(){return z(this,Re,"f")&&Reflect.has(z(this,Re,"f"),"access_token")&&Reflect.has(z(this,Re,"f"),"refresh_token")&&Reflect.has(z(this,Re,"f"),"expires")||!1}};s(K_,"OAuth");lo=new WeakMap,We=new WeakMap,Re=new WeakMap,z_=new WeakMap,Ji=new WeakSet,i1=s(function(){var e;return xi(this,void 0,void 0,function*(){let t=yield(e=z(this,We,"f").cache)===null||e===void 0?void 0:e.get("youtubei_oauth_credentials");if(!t)return!1;let i=new TextDecoder,r=JSON.parse(i.decode(t));return bn(this,Re,{access_token:r.access_token,refresh_token:r.refresh_token,expires:new Date(r.expires)},"f"),z(this,We,"f").emit("auth",{credentials:z(this,Re,"f"),status:"SUCCESS"}),!0})},"_OAuth_loadCachedCredentials"),U0=s(function(){return xi(this,void 0,void 0,function*(){bn(this,lo,yield z(this,Ji,"m",Y0).call(this),"f");let e={client_id:z(this,lo,"f").client_id,scope:W.OAUTH.SCOPE,device_id:Y.shim.uuidv4(),model_name:W.OAUTH.MODEL_NAME},i=yield(yield z(this,We,"f").http.fetch_function(new URL("/o/oauth2/device/code",W.URLS.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json();z(this,We,"f").emit("auth-pending",i),bn(this,z_,i.interval,"f"),z(this,Ji,"m",t1).call(this,i.device_code)})},"_OAuth_getUserCode"),t1=s(function(e){let t=setInterval(()=>xi(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},z(this,lo,"f")),{code:e,grant_type:W.OAUTH.GRANT_TYPE});try{let a=yield(yield z(this,We,"f").http.fetch_function(new URL("/o/oauth2/token",W.URLS.YT_BASE),{body:JSON.stringify(i),method:"POST",headers:{"Content-Type":"application/json"}})).json();if(a.error){switch(a.error){case"access_denied":z(this,We,"f").emit("auth-error",new oi("Access was denied.",{status:"ACCESS_DENIED"}));break;case"expired_token":z(this,We,"f").emit("auth-error",new oi("The device code has expired, restarting auth flow.",{status:"DEVICE_CODE_EXPIRED"})),clearInterval(t),z(this,Ji,"m",U0).call(this);break;default:break}return}let l=new Date(new Date().getTime()+a.expires_in*1e3);bn(this,Re,{access_token:a.access_token,refresh_token:a.refresh_token,expires:l},"f"),z(this,We,"f").emit("auth",{credentials:z(this,Re,"f"),status:"SUCCESS"}),clearInterval(t)}catch(r){return clearInterval(t),z(this,We,"f").emit("auth-error",new oi("Could not obtain user code.",{status:"FAILED",error:r}))}}),z(this,z_,"f")*1e3)},"_OAuth_startPolling"),n1=s(function(){return xi(this,void 0,void 0,function*(){if(!z(this,Re,"f"))return;bn(this,lo,yield z(this,Ji,"m",Y0).call(this),"f");let e=Object.assign(Object.assign({},z(this,lo,"f")),{refresh_token:z(this,Re,"f").refresh_token,grant_type:"refresh_token"}),i=yield(yield z(this,We,"f").http.fetch_function(new URL("/o/oauth2/token",W.URLS.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json(),r=new Date(new Date().getTime()+i.expires_in*1e3);bn(this,Re,{access_token:i.access_token,refresh_token:i.refresh_token||z(this,Re,"f").refresh_token,expires:r},"f"),z(this,We,"f").emit("update-credentials",{credentials:z(this,Re,"f"),status:"SUCCESS"})})},"_OAuth_refreshAccessToken"),Y0=s(function(){var e;return xi(this,void 0,void 0,function*(){let i=yield(yield z(this,We,"f").http.fetch_function(new URL("/tv",W.URLS.YT_BASE),{headers:W.OAUTH.HEADERS})).text(),r=(e=W.OAUTH.REGEX.AUTH_SCRIPT.exec(i))===null||e===void 0?void 0:e[1];if(!r)throw new oi("Could not obtain script url.",{status:"FAILED"});let l=(yield(yield z(this,We,"f").http.fetch(r,{baseURL:W.URLS.YT_BASE})).text()).replace(/\n/g,"").match(W.OAUTH.REGEX.CLIENT_IDENTITY),h=l==null?void 0:l.groups;if(!h)throw new oi("Could not obtain client identity.",{status:"FAILED"});return h})},"_OAuth_getClientIdentity");var W0=K_;var Cs=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Pp=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ti=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},G0,q_,$_,co,X_,Q_,o1,s1,Z_;(function(n){n.WEB="WEB",n.KIDS="WEB_KIDS",n.MUSIC="WEB_REMIX",n.ANDROID="ANDROID",n.ANDROID_MUSIC="ANDROID_MUSIC",n.ANDROID_CREATOR="ANDROID_CREATOR",n.TV_EMBEDDED="TVHTML5_SIMPLY_EMBEDDED_PLAYER"})(Z_=Z_||(Z_={}));var Zt=class extends Vi{constructor(e,t,i,r,a,l,h,v){super(),q_.set(this,void 0),$_.set(this,void 0),co.set(this,void 0),X_.set(this,void 0),Q_.set(this,void 0),Pp(this,co,e,"f"),Pp(this,X_,r,"f"),Pp(this,$_,t,"f"),Pp(this,q_,i,"f"),Pp(this,Q_,a,"f"),this.http=new to(this,l,h),this.actions=new j0(this),this.oauth=new W0(this),this.logged_in=!!l,this.cache=v}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}static create(e={}){return Cs(this,void 0,void 0,function*(){let{context:t,api_key:i,api_version:r,account_index:a}=yield Zt.getSessionData(e.lang,e.location,e.account_index,e.enable_safety_mode,e.generate_session_locally,e.device_category,e.client_type,e.timezone,e.fetch);return new Zt(t,i,r,a,e.retrieve_player===!1?void 0:yield bt.create(e.cache,e.fetch),e.cookie,e.fetch,e.cache)})}static getSessionData(e="",t="",i=0,r=!1,a=!1,l="desktop",h=Z_.WEB,v=Intl.DateTimeFormat().resolvedOptions().timeZone,_=Y.shim.fetch){return Cs(this,void 0,void 0,function*(){let p;return a?p=Ti(this,G0,"m",s1).call(this,{lang:e,location:t,time_zone:v,device_category:l,client_name:h,enable_safety_mode:r}):p=yield Ti(this,G0,"m",o1).call(this,{lang:e,location:t,time_zone:v,device_category:l,client_name:h,enable_safety_mode:r},_),Object.assign(Object.assign({},p),{account_index:i})})}signIn(e){return Cs(this,void 0,void 0,function*(){return new Promise((t,i)=>Cs(this,void 0,void 0,function*(){let r=s(a=>i(a),"error_handler");this.once("auth",a=>{this.off("auth-error",r),a.status==="SUCCESS"&&(this.logged_in=!0,t()),i(a)}),this.once("auth-error",r);try{yield this.oauth.init(e),this.oauth.validateCredentials()&&(yield this.oauth.refreshIfRequired(),this.logged_in=!0,t())}catch(a){i(a)}}))})}signOut(){return Cs(this,void 0,void 0,function*(){if(!this.logged_in)throw new x("You must be signed in to perform this operation.");let e=yield this.oauth.revokeCredentials();return this.logged_in=!1,e})}get key(){return Ti(this,$_,"f")}get api_version(){return Ti(this,q_,"f")}get client_version(){return Ti(this,co,"f").client.clientVersion}get client_name(){return Ti(this,co,"f").client.clientName}get account_index(){return Ti(this,X_,"f")}get context(){return Ti(this,co,"f")}get player(){return Ti(this,Q_,"f")}get lang(){return Ti(this,co,"f").client.hl}};s(Zt,"Session");G0=Zt,q_=new WeakMap,$_=new WeakMap,co=new WeakMap,X_=new WeakMap,Q_=new WeakMap,o1=s(function(e,t=Y.shim.fetch){return Cs(this,void 0,void 0,function*(){let i=new URL("/sw.js_data",W.URLS.YT_BASE),r=yield t(i,{headers:{"accept-language":e.lang||"en-US","user-agent":qi("desktop"),accept:"*/*",referer:"https://www.youtube.com/sw.js",cookie:`PREF=tz=${e.time_zone.replace("/",".")}`}});if(!r.ok)throw new bo(`Failed to retrieve session data: ${r.status}`);let a=yield r.text(),h=JSON.parse(a.replace(/^\)\]\}'/,""))[0][2],v=`v${h[0][0][6]}`,[[_],p]=h;return{context:{client:{hl:_[0],gl:e.location||_[2],remoteHost:_[3],screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:_[13],userAgent:_[14],clientName:e.client_name,clientVersion:_[16],osName:_[17],osVersion:_[18],platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:_[79]||e.time_zone,browserName:_[86],browserVersion:_[87],originalUrl:W.URLS.YT_BASE,deviceMake:_[11],deviceModel:_[12],utcOffsetMinutes:new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:p,api_version:v}})},"_Session_retrieveSessionData"),s1=s(function(e){let t=Wt(11),i=Math.floor(Date.now()/1e3);return{context:{client:{hl:e.lang||"en",gl:e.location||"US",screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:Oe.encodeVisitorData(t,i),userAgent:qi("desktop"),clientName:e.client_name,clientVersion:Gt.WEB.VERSION,osName:"Windows",osVersion:"10.0",platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:e.time_zone,originalUrl:W.URLS.YT_BASE,deviceMake:"",deviceModel:"",utcOffsetMinutes:new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:Gt.WEB.API_KEY,api_version:Gt.WEB.API_VERSION}},"_Session_generateSessionData");var GS=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},wn=class extends Jn{constructor(e,t){if(super(e,t),!this.page.contents_memo)throw new x("Unexpected response",this.page);let i=this.page.contents_memo.getType(Ce).first();if(!i.content)throw new x("Content tab has no content",i);this.page.header&&(this.header=this.page.header.item().as(Ch)),this.contents=i.content.as(tn)}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return GS(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new wn(this.actions,i.page)})}};s(wn,"HashtagFeed");var ev=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},JS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ii=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Nt,tv=class{constructor(e){Nt.set(this,void 0),JS(this,Nt,e,"f"),this.channel={editName:t=>{if(!Ii(this,Nt,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");return Ii(this,Nt,"f").execute("/channel/edit_name",{givenName:t,client:"ANDROID"})},editDescription:t=>{if(!Ii(this,Nt,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");return Ii(this,Nt,"f").execute("/channel/edit_description",{givenDescription:t,client:"ANDROID"})},getBasicAnalytics:()=>this.getAnalytics()}}getInfo(){return ev(this,void 0,void 0,function*(){if(!Ii(this,Nt,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let e=yield Ii(this,Nt,"f").execute("/account/accounts_list",{client:"ANDROID"});return new jm(e)})}getTimeWatched(){return ev(this,void 0,void 0,function*(){let e=yield Ii(this,Nt,"f").execute("/browse",{browseId:"SPtime_watched",client:"ANDROID"});return new c_(e)})}getSettings(){return ev(this,void 0,void 0,function*(){let e=yield Ii(this,Nt,"f").execute("/browse",{browseId:"SPaccount_overview"});return new u_(Ii(this,Nt,"f"),e)})}getAnalytics(){var e;return ev(this,void 0,void 0,function*(){let t=yield this.getInfo(),i=Oe.encodeChannelAnalyticsParams((e=t.footers)===null||e===void 0?void 0:e.endpoint.payload.browseId),r=yield Ii(this,Nt,"f").execute("/browse",{browseId:"FEanalytics_screen",client:"ANDROID",params:i});return new Um(r)})}};s(tv,"AccountManager");Nt=new WeakMap;var J0=tv;var gn=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},HS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},pt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},et,iv=class{constructor(e){et.set(this,void 0),HS(this,et,e,"f")}like(e){return gn(this,void 0,void 0,function*(){if(pe({video_id:e}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/like/like",{client:"ANDROID",target:{videoId:e}})})}dislike(e){return gn(this,void 0,void 0,function*(){if(pe({video_id:e}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/like/dislike",{client:"ANDROID",target:{videoId:e}})})}removeRating(e){return gn(this,void 0,void 0,function*(){if(pe({video_id:e}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/like/removelike",{client:"ANDROID",target:{videoId:e}})})}subscribe(e){return gn(this,void 0,void 0,function*(){if(pe({channel_id:e}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/subscription/subscribe",{client:"ANDROID",channelIds:[e],params:"EgIIAhgA"})})}unsubscribe(e){return gn(this,void 0,void 0,function*(){if(pe({channel_id:e}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/subscription/unsubscribe",{client:"ANDROID",channelIds:[e],params:"CgIIAhgA"})})}comment(e,t){return gn(this,void 0,void 0,function*(){if(pe({video_id:e,text:t}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield pt(this,et,"f").execute("/comment/create_comment",{client:"ANDROID",commentText:t,createCommentParams:Oe.encodeCommentParams(e)})})}translate(e,t,i={}){return gn(this,void 0,void 0,function*(){pe({text:e,target_language:t});let r=Oe.encodeCommentActionParams(22,Object.assign({text:e,target_language:t},i)),a=yield pt(this,et,"f").execute("/comment/perform_comment_action",{client:"ANDROID",actions:[r]}),l=a.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:a.success,status_code:a.status_code,translated_content:l.translatedContent.content,data:a.data}})}setNotificationPreferences(e,t){return gn(this,void 0,void 0,function*(){if(pe({channel_id:e,type:t}),!pt(this,et,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");let i={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(i).includes(t.toUpperCase()))throw new Error(`Invalid notification preference type: ${t}`);return yield pt(this,et,"f").execute("/notification/modify_channel_preference",{client:"WEB",params:Oe.encodeNotificationPref(e,i[t.toUpperCase()])})})}};s(iv,"InteractionManager");et=new WeakMap;var H0=iv;var nv=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},zS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Si=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Mt,ov=class{constructor(e){Mt.set(this,void 0),zS(this,Mt,e,"f")}search(e){return nv(this,void 0,void 0,function*(){let t=yield Si(this,Mt,"f").actions.execute("/search",{query:e,client:"YTKIDS"});return new D_(Si(this,Mt,"f").actions,t)})}getInfo(e){var t;return nv(this,void 0,void 0,function*(){let i=Wt(16),r=Si(this,Mt,"f").actions.execute("/player",{cpn:i,client:"YTKIDS",videoId:e,playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=Si(this,Mt,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=Si(this,Mt,"f").actions.execute("/next",{videoId:e,client:"YTKIDS"}),l=yield Promise.all([r,a]);return new U_(l,Si(this,Mt,"f").actions,i)})}getChannel(e){return nv(this,void 0,void 0,function*(){let t=yield Si(this,Mt,"f").actions.execute("/browse",{browseId:e,client:"YTKIDS"});return new F_(Si(this,Mt,"f").actions,t)})}getHomeFeed(){return nv(this,void 0,void 0,function*(){let e=yield Si(this,Mt,"f").actions.execute("/browse",{browseId:"FEkids_home",client:"YTKIDS"});return new O_(Si(this,Mt,"f").actions,e)})}};s(ov,"Kids");Mt=new WeakMap;var z0=ov;var wt=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},r1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ye=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},sv,Np,ge,a1,u1,rv=class{constructor(e){sv.add(this),Np.set(this,void 0),ge.set(this,void 0),r1(this,Np,e,"f"),r1(this,ge,e.actions,"f")}getInfo(e){if(e instanceof Do)return ye(this,sv,"m",u1).call(this,e);if(typeof e=="string")return ye(this,sv,"m",a1).call(this,e);throw new x("Invalid target, expected either a video id or a valid MusicTwoRowItem",e)}search(e,t={}){return wt(this,void 0,void 0,function*(){pe({query:e});let i={query:e,client:"YTMUSIC"};t.type&&t.type!=="all"&&(i.params=Oe.encodeMusicSearchFilters(t));let r=yield ye(this,ge,"f").execute("/search",i);return new M_(r,ye(this,ge,"f"),Reflect.has(t,"type")&&t.type!=="all")})}getHomeFeed(){return wt(this,void 0,void 0,function*(){let e=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_home"});return new I_(e,ye(this,ge,"f"))})}getExplore(){return wt(this,void 0,void 0,function*(){let e=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_explore"});return new x_(e)})}getLibrary(){return wt(this,void 0,void 0,function*(){let e=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_library_landing"});return new E_(e,ye(this,ge,"f"))})}getArtist(e){return wt(this,void 0,void 0,function*(){if(pe({artist_id:e}),!e.startsWith("UC")&&!e.startsWith("FEmusic_library_privately_owned_artist"))throw new x("Invalid artist id",e);let t=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new w_(t,ye(this,ge,"f"))})}getAlbum(e){return wt(this,void 0,void 0,function*(){if(pe({album_id:e}),!e.startsWith("MPR")&&!e.startsWith("FEmusic_library_privately_owned_release"))throw new x("Invalid album id",e);let t=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new __(t)})}getPlaylist(e){return wt(this,void 0,void 0,function*(){pe({playlist_id:e}),e.startsWith("VL")||(e=`VL${e}`);let t=yield ye(this,ge,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new vs(t,ye(this,ge,"f"))})}getUpNext(e,t=!0){var i,r,a;return wt(this,void 0,void 0,function*(){pe({video_id:e});let h=(i=(yield ye(this,ge,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||i===void 0?void 0:i.getType(Ce),v=h==null?void 0:h.first();if(!v)throw new x("Could not find target tab.");let _=(r=v.content)===null||r===void 0?void 0:r.as(Yo);if(!_||!_.content)throw new x("Music queue was empty, the given id is probably invalid.",_);let p=_.content.as(ci);if(!p.playlist_id&&t){let b=p.contents.firstOfType(Eo);if(!b)throw new x("Automix item not found");let I=yield(a=b.playlist_video)===null||a===void 0?void 0:a.endpoint.call(ye(this,ge,"f"),{videoId:e,client:"YTMUSIC",parse:!0});if(!I||!I.contents_memo)throw new x("Could not fetch automix");return I.contents_memo.getType(ci).first()}return p})}getRelated(e){var t;return wt(this,void 0,void 0,function*(){pe({video_id:e});let r=(t=(yield ye(this,ge,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||t===void 0?void 0:t.getType(Ce),a=r==null?void 0:r.matchCondition(v=>{var _,p;return((p=(_=v.endpoint.payload.browseEndpointContextSupportedConfigs)===null||_===void 0?void 0:_.browseEndpointContextMusicConfig)===null||p===void 0?void 0:p.pageType)==="MUSIC_PAGE_TYPE_TRACK_RELATED"});if(!a)throw new x("Could not find target tab.");let l=yield a.endpoint.call(ye(this,ge,"f"),{client:"YTMUSIC",parse:!0});if(!l.contents)throw new x("Unexpected response",l);return l.contents.item().as(_e).contents.as(Ue,Vn)})}getLyrics(e){var t;return wt(this,void 0,void 0,function*(){pe({video_id:e});let r=(t=(yield ye(this,ge,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||t===void 0?void 0:t.getType(Ce),a=r==null?void 0:r.matchCondition(v=>{var _,p;return((p=(_=v.endpoint.payload.browseEndpointContextSupportedConfigs)===null||_===void 0?void 0:_.browseEndpointContextMusicConfig)===null||p===void 0?void 0:p.pageType)==="MUSIC_PAGE_TYPE_TRACK_LYRICS"});if(!a)throw new x("Could not find target tab.");let l=yield a.endpoint.call(ye(this,ge,"f"),{client:"YTMUSIC",parse:!0});if(!l.contents)throw new x("Unexpected response",l);if(l.contents.item().key("type").string()==="Message")throw new x(l.contents.item().as(Dt).text,e);return l.contents.item().as(_e).contents.firstOfType(Vn)})}getRecap(){return wt(this,void 0,void 0,function*(){let e=yield ye(this,ge,"f").execute("/browse",{browseId:"FEmusic_listening_review",client:"YTMUSIC_ANDROID"});return new P_(e,ye(this,ge,"f"))})}getSearchSuggestions(e){var t,i;return wt(this,void 0,void 0,function*(){let a=(i=(t=(yield ye(this,ge,"f").execute("/music/get_search_suggestions",{parse:!0,input:e,client:"YTMUSIC"})).contents_memo)===null||t===void 0?void 0:t.getType(Tm))===null||i===void 0?void 0:i[0];return a!=null&&a.contents.is_array?a==null?void 0:a.contents.array():de([])})}};s(rv,"Music");Np=new WeakMap,ge=new WeakMap,sv=new WeakSet,a1=s(function(e){var t;return wt(this,void 0,void 0,function*(){let i=Wt(16),r=ye(this,ge,"f").execute("/player",{cpn:i,client:"YTMUSIC",videoId:e,playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=ye(this,Np,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=ye(this,ge,"f").execute("/next",{client:"YTMUSIC",videoId:e}),l=yield Promise.all([r,a]);return new Sp(l,ye(this,ge,"f"),i)})},"_Music_fetchInfoFromVideoId"),u1=s(function(e){var t;return wt(this,void 0,void 0,function*(){if(!e)throw new x("List item cannot be undefined");if(!e.endpoint)throw new Error("This item does not have an endpoint.");let i=Wt(16),r=e.endpoint.call(ye(this,ge,"f"),{cpn:i,client:"YTMUSIC",playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=ye(this,Np,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=e.endpoint.call(ye(this,ge,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),l=yield Promise.all([r,a]);return new Sp(l,ye(this,ge,"f"),i)})},"_Music_fetchInfoFromListItem");var K0=rv;var po=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},KS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},gt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ot,av=class{constructor(e){ot.set(this,void 0),KS(this,ot,e,"f")}create(e,t){return po(this,void 0,void 0,function*(){if(pe({title:e,video_ids:t}),!gt(this,ot,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield gt(this,ot,"f").execute("/playlist/create",{title:e,ids:t,parse:!1});return{success:i.success,status_code:i.status_code,playlist_id:i.data.playlistId,data:i.data}})}delete(e){return po(this,void 0,void 0,function*(){if(pe({playlist_id:e}),!gt(this,ot,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let t=yield gt(this,ot,"f").execute("playlist/delete",{playlistId:e});return{playlist_id:e,success:t.success,status_code:t.status_code,data:t.data}})}addVideos(e,t){return po(this,void 0,void 0,function*(){if(pe({playlist_id:e,video_ids:t}),!gt(this,ot,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield gt(this,ot,"f").execute("/browse/edit_playlist",{playlistId:e,actions:t.map(r=>({action:"ACTION_ADD_VIDEO",addedVideoId:r})),parse:!1});return{playlist_id:e,action_result:i.data.actions}})}removeVideos(e,t){return po(this,void 0,void 0,function*(){if(pe({playlist_id:e,video_ids:t}),!gt(this,ot,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield gt(this,ot,"f").execute("/browse",{browseId:`VL${e}`,parse:!0}),r=new Di(gt(this,ot,"f"),i,!0);if(!r.info.is_editable)throw new x("This playlist cannot be edited.",e);let a={playlistId:e,actions:[]},l=s(v=>po(this,void 0,void 0,function*(){if(v.videos.filter(p=>t.includes(p.key("id").string())).forEach(p=>a.actions.push({action:"ACTION_REMOVE_VIDEO",setVideoId:p.key("set_video_id").string()})),a.actions.length<t.length){let p=yield v.getContinuation();return l(p)}}),"getSetVideoIds");if(yield l(r),!a.actions.length)throw new x("Given video ids were not found in this playlist.",t);let h=yield gt(this,ot,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},a),{parse:!1}));return{playlist_id:e,action_result:h.data.actions}})}moveVideo(e,t,i){return po(this,void 0,void 0,function*(){if(pe({playlist_id:e,moved_video_id:t,predecessor_video_id:i}),!gt(this,ot,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let r=yield gt(this,ot,"f").execute("/browse",{browseId:`VL${e}`,parse:!0}),a=new Di(gt(this,ot,"f"),r,!0);if(!a.info.is_editable)throw new x("This playlist cannot be edited.",e);let l={playlistId:e,actions:[]},h,v,_=s(b=>po(this,void 0,void 0,function*(){let I=b.videos.find(N=>t===N.key("id").string()),C=b.videos.find(N=>i===N.key("id").string());if(h=h||(I==null?void 0:I.key("set_video_id").string()),v=v||(C==null?void 0:C.key("set_video_id").string()),!h||!v){let N=yield b.getContinuation();return _(N)}}),"getSetVideoIds");yield _(a),l.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",setVideoId:h,movedSetVideoIdPredecessor:v});let p=yield gt(this,ot,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},l),{parse:!1}));return{playlist_id:e,action_result:p.data.actions}})}};s(av,"PlaylistManager");ot=new WeakMap;var q0=av;var Ps=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},qS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ei=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Mp,ti,l1,c1,d1,uv=class{constructor(e){Mp.add(this),ti.set(this,void 0),qS(this,ti,e,"f")}setThumbnail(e,t){return Ps(this,void 0,void 0,function*(){if(!ei(this,ti,"f").logged_in)throw new x("You must be signed in to perform this operation.");if(!e||!t)throw new Sn("One or more parameters are missing.");let i=Oe.encodeCustomThumbnailPayload(e,t);return yield ei(this,ti,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})})}updateVideoMetadata(e,t){return Ps(this,void 0,void 0,function*(){if(!ei(this,ti,"f").logged_in)throw new x("You must be signed in to perform this operation.");let i=Oe.encodeVideoMetadataPayload(e,t);return yield ei(this,ti,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})})}upload(e,t={}){return Ps(this,void 0,void 0,function*(){if(!ei(this,ti,"f").logged_in)throw new x("You must be signed in to perform this operation.");let i=yield ei(this,Mp,"m",l1).call(this),r=yield ei(this,Mp,"m",c1).call(this,i.upload_url,e);if(r.status!=="STATUS_SUCCESS")throw new x("Could not process video.");return yield ei(this,Mp,"m",d1).call(this,i,r,t)})}};s(uv,"Studio");ti=new WeakMap,Mp=new WeakSet,l1=s(function(){return Ps(this,void 0,void 0,function*(){let e=`innertube_android:${Y.shim.uuidv4()}:0:v=3,api=1,cf=3`,t={frontendUploadId:e,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${Y.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},i=yield ei(this,ti,"f").http.fetch("/upload/youtubei",{baseURL:Jt.URLS.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(t)});if(!i.ok)throw new x("Could not get initial upload data");return{frontend_upload_id:e,upload_id:i.headers.get("x-guploader-uploadid"),upload_url:i.headers.get("x-goog-upload-url"),scotty_resource_id:i.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:i.headers.get("x-goog-upload-chunk-granularity")}})},"_Studio_getInitialUploadData"),c1=s(function(e,t){return Ps(this,void 0,void 0,function*(){let i=yield ei(this,ti,"f").http.fetch_function(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:t});if(!i.ok)throw new x("Could not upload video");return yield i.json()})},"_Studio_uploadVideo"),d1=s(function(e,t,i){return Ps(this,void 0,void 0,function*(){let r={resourceId:{scottyResourceId:{id:t.scottyResourceId}},frontendUploadId:e.frontend_upload_id,initialMetadata:{title:{newTitle:i.title||new Date().toDateString()},description:{newDescription:i.description||"",shouldSegment:!0},privacy:{newPrivacy:i.privacy||"PRIVATE"},draftState:{isDraft:i.is_draft||!1}}};return yield ei(this,ti,"f").actions.execute("/upload/createvideo",Object.assign({client:"ANDROID"},r))})},"_Studio_setVideoMetadata");var $0=uv;var $e=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ns=class{constructor(e){this.session=e,this.account=new J0(this.session.actions),this.playlist=new q0(this.session.actions),this.interact=new H0(this.session.actions),this.music=new K0(this.session),this.studio=new $0(this.session),this.kids=new z0(this.session),this.actions=this.session.actions}static create(e={}){return $e(this,void 0,void 0,function*(){return new Ns(yield Zt.create(e))})}getInfo(e,t){return $e(this,void 0,void 0,function*(){pe({video_id:e});let i=Wt(16),r=this.actions.getVideoInfo(e,i,t),a=this.actions.execute("/next",{videoId:e}),l=yield Promise.all([r,a]);return new mp(l,this.actions,this.session.player,i)})}getBasicInfo(e,t){return $e(this,void 0,void 0,function*(){pe({video_id:e});let i=Wt(16),r=yield this.actions.getVideoInfo(e,i,t);return new mp([r],this.actions,this.session.player,i)})}search(e,t={}){return $e(this,void 0,void 0,function*(){pe({query:e});let i=Object.assign({query:e},{params:t?Oe.encodeSearchFilters(t):void 0}),r=yield this.actions.execute("/search",i);return new a_(this.actions,r)})}getSearchSuggestions(e){return $e(this,void 0,void 0,function*(){pe({query:e});let t=new URL(`${W.URLS.YT_SUGGESTIONS}search`);t.searchParams.set("q",e),t.searchParams.set("hl",this.session.context.client.hl),t.searchParams.set("gl",this.session.context.client.gl),t.searchParams.set("ds","yt"),t.searchParams.set("client","youtube"),t.searchParams.set("xssi","t"),t.searchParams.set("oe","UTF");let r=yield(yield this.session.http.fetch(t)).text();return JSON.parse(r.replace(")]}'",""))[1].map(h=>h[0])})}getComments(e,t){return $e(this,void 0,void 0,function*(){pe({video_id:e});let i=Oe.encodeCommentsSectionParams(e,{sort_by:t||"TOP_COMMENTS"}),r=yield this.actions.execute("/next",{continuation:i});return new Gm(this.actions,r.data)})}getHomeFeed(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEwhat_to_watch"});return new Kt(this.actions,e)})}getLibrary(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FElibrary"});return new Qm(this.actions,e)})}getHistory(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEhistory"});return new Zo(this.actions,e)})}getTrending(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEtrending",parse:!0});return new ip(this.actions,e)})}getSubscriptionsFeed(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEsubscriptions",parse:!0});return new Pe(this.actions,e)})}getChannel(e){return $e(this,void 0,void 0,function*(){pe({id:e});let t=yield this.actions.execute("/browse",{browseId:e});return new Ke(this.actions,t)})}getNotifications(){return $e(this,void 0,void 0,function*(){let e=yield this.actions.execute("/notification/get_notification_menu",{notificationsMenuRequestType:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"});return new r_(this.actions,e)})}getUnseenNotificationsCount(){var e,t,i,r;return $e(this,void 0,void 0,function*(){let a=yield this.actions.execute("/notification/get_unseen_count");return((e=a.data)===null||e===void 0?void 0:e.unseenCount)||((r=(i=(t=a.data)===null||t===void 0?void 0:t.actions)===null||i===void 0?void 0:i[0].updateNotificationsUnseenCountAction)===null||r===void 0?void 0:r.unseenCount)||0})}getPlaylist(e){return $e(this,void 0,void 0,function*(){pe({id:e}),e.startsWith("VL")||(e=`VL${e}`);let t=yield this.actions.execute("/browse",{browseId:e});return new Di(this.actions,t)})}getHashtag(e){return $e(this,void 0,void 0,function*(){pe({hashtag:e});let t=Oe.encodeHashtag(e),i=yield this.actions.execute("/browse",{browseId:"FEhashtag",params:t});return new wn(this.actions,i)})}getStreamingData(e,t={}){return $e(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e)).chooseFormat(t)})}download(e,t){return $e(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e,t==null?void 0:t.client)).download(t)})}resolveURL(e){return $e(this,void 0,void 0,function*(){return(yield this.actions.execute("/navigation/resolve_url",{url:e,parse:!0})).endpoint})}call(e,t){return e.call(this.actions,t)}};s(Ns,"Innertube");var X0=Ns;var p1={};var f1=X0;var Q0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},h1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Vp=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ap,lv,cv,dv,pv=class{constructor(e=!1,t){Ap.add(this),lv.set(this,void 0),cv.set(this,void 0),h1(this,lv,t||"","f"),h1(this,cv,e,"f")}get cache_dir(){return Vp(this,cv,"f")?Vp(this,lv,"f"):""}get(e){return Q0(this,void 0,void 0,function*(){let t=yield Vp(this,Ap,"m",dv).call(this);if(!!t)return new Promise((i,r)=>{let a=t.transaction("kv-store","readonly").objectStore("kv-store").get(e);a.onerror=r,a.onsuccess=function(){var l;let h=(l=this.result)===null||l===void 0?void 0:l.v;i(h?h.buffer:void 0)}})})}set(e,t){return Q0(this,void 0,void 0,function*(){let i=yield Vp(this,Ap,"m",dv).call(this);if(!!i)return new Promise((r,a)=>{let l=i.transaction("kv-store","readwrite").objectStore("kv-store").put({k:e,v:t});l.onerror=a,l.onsuccess=()=>r()})})}remove(e){return Q0(this,void 0,void 0,function*(){let t=yield Vp(this,Ap,"m",dv).call(this);if(!!t)return new Promise((i,r)=>{let a=t.transaction("kv-store","readwrite").objectStore("kv-store").delete(e);a.onerror=r,a.onsuccess=()=>i()})})}};s(pv,"Cache");lv=new WeakMap,cv=new WeakMap,Ap=new WeakSet,dv=s(function(){let e=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return e?new Promise((t,i)=>{let r=e.open("youtubei.js",1);r.onsuccess=function(){t(this.result)},r.onerror=function(a){i("indexedDB request error"),console.error(a)},r.onupgradeneeded=function(){let a=this.result.createObjectStore("kv-store",{keyPath:"k"});a.transaction.oncomplete=function(){t(this.db)}}}):console.log("IndexedDB is not supported. No cache will be used.")},"_Cache_getBrowserDB");Y.load({runtime:"browser",server:!1,info:{version:Hp.version,bugs_url:Hp.bugs.url,repo_url:Hp.homepage.split("#")[0]},Cache:pv,sha1Hash:kv,uuidv4(){var n;return!((n=globalThis.crypto)===null||n===void 0)&&n.randomUUID()?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>{let t=parseInt(e);return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},eval:u0,DOMParser:globalThis.DOMParser,serializeDOM(n){return new XMLSerializer().serializeToString(n)},fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream});var kce=f1;export{J0 as AccountManager,j0 as Actions,Xd as AppendContinuationItemsAction,Z_ as ClientType,Jt as Constants,zo as Continuation,Vi as EventEmitter,Pe as Feed,Jn as FilterableFeed,jn as GridContinuation,to as HTTPClient,X0 as Innertube,H0 as InteractionManager,On as ItemSectionContinuation,z0 as Kids,Yn as LiveChatContinuation,yS as Misc,K0 as Music,Bn as MusicPlaylistShelfContinuation,Li as MusicShelfContinuation,Ln as NavigateAction,W0 as OAuth,f as Parser,Y as Platform,bt as Player,q0 as PlaylistManager,Qd as PlaylistPanelContinuation,Oe as Proto,Dn as ReloadContinuationItemsCommand,kt as SectionListContinuation,Zt as Session,$0 as Studio,ip as TabbedFeed,p1 as Types,cp as UniversalCache,Ev as Utils,F0 as YT,D0 as YTKids,L0 as YTMusic,MT as YTNodes,kce as default};
//# sourceMappingURL=browser.min.js.map
